if (self.CavalryLogger) { CavalryLogger.start_js(["uQPQX"]); }

__d("NotificationsTabEnum",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONVERSATIONS:"My Conversations",KEYWORDS:"Keywords"};}),null);
__d('SignalsTab.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component,k=c('React').PropTypes;h=babelHelpers.inherits(l,j);i=h&&h.prototype;l.prototype.render=function(){return (c('React').createElement('div',null,this.props.children));};function l(){h.apply(this,arguments);}l.propTypes={children:k.any,count:k.number,title:k.node.isRequired};f.exports=l;}),null);
__d('SignalsTabHeader.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').Component;i=babelHelpers.inherits(l,k);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$SignalsTabHeader1=function(){this.props.onSelect(this.props.index);}.bind(this),n;}l.prototype.render=function(){var m="_7wn"+(this.props.selected?' '+"_7wo":'')+(!this.props.selected?' '+"_7wp":''),n=this.props.count==null?null:c('React').createElement('div',{className:"_7wq"},this.props.count);return (c('React').createElement('div',{className:"_7wr",onClick:this.$SignalsTabHeader1},c('React').createElement('div',{className:m},this.props.title),n));};f.exports=l;}),null);
__d('SignalsTabGroup.react',['cx','invariant','React','SignalsTab.react','SignalsTabHeader.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').Children,m=c('React').Component,n=c('React').PropTypes;j=babelHelpers.inherits(o,m);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$SignalsTabGroup1=function(r){this.setState({selectedIndex:r},this.props.onSelectionChanged);}.bind(this);!(p.children!=null&&p.children.length>0)?i(0):void 0;var q=p.initiallySelectedIndex!=null?p.initiallySelectedIndex:0;!(0<=q&&q<p.children.length)?i(0):void 0;this.state={selectedIndex:q};}o.prototype.getSelectedIndex=function(){return this.state.selectedIndex;};o.prototype.render=function(){var p=l.toArray(this.props.children),q=this.state.selectedIndex,r=[];for(var s=0;s<p.length;s++){var t=p[s],u=c('React').createElement(c('SignalsTabHeader.react'),{count:t.props.count,index:s,key:'header'+s,selected:s===q,title:t.props.title,onSelect:this.$SignalsTabGroup1});r.push(u);if(s<p.length-1){var v=c('React').createElement('div',{className:"_58-m",key:'separator'+s});r.push(v);}}var w=p[q],x=this.props.maxBodyHeight!=null?{maxHeight:this.props.maxBodyHeight}:null;return (c('React').createElement('div',{className:this.props.className},c('React').createElement('div',{className:"_58-n"},r),c('React').createElement('div',{className:"_58-o",style:x},w)));};o.propTypes={className:n.string,children:n.array,initiallySelectedIndex:n.number,maxBodyHeight:n.number,onSelectionChanged:n.func};f.exports=o;}),null);
__d('NotificationsTabsModel',['fbt','EnterpriseLabsLoggingEvents','EnterpriseLabsTypedLogger'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={TABS:{all:h._("All"),myConversations:h._("My Conversations"),keywords:h._("Keywords")},onTabSelectionChanged:function j(){var k=this.props.children[this.getSelectedIndex()].key;new (c('EnterpriseLabsTypedLogger'))().setEntityID('tab:'+k).setEvent(c('EnterpriseLabsLoggingEvents').NT_CLICK_TAB).log();}};f.exports=i;}),null);
__d("XKeywordSubscribeController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/keyword\/controller\/{?keyword_id}\/",{keyword_id:{type:"String"}});}),null);
__d('NotificationTabsController',['cx','React','LogicalGrid.react','NotificationsTabConfig','NotificationsTabsModel','SignalsTab.react','XKeywordSubscribeController'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={conversations:'https://our.intern.facebook.com/intern/wiki/IT_Frontpage'+'/Enterprise_Labs/Tabs_for_Notifications/#FAQ',keywords:c('XKeywordSubscribeController').getURIBuilder().getURI()},j={getSizeUnseenState:function k(l){var m={};for(var n in c('NotificationsTabsModel').TABS)m[c('NotificationsTabsModel').TABS[n]]=0;m.All=m.All||0;var o=[];for(var p in l){o.push(l[p].seen_state);if(l[p].seen_state in c('NotificationsTabConfig').notifs_unseen){m.All++;if(!isNaN(m[l[p].notifTab]))m[l[p].notifTab]++;}}return m;},getTabByName:function k(l,m,n,o){var p=m[l]||0;return (c('React').createElement(c('SignalsTab.react'),{title:l,key:l,count:p},c('React').createElement(c('LogicalGrid.react'),{component:n},o),c('React').createElement('div',{className:"_57g3"},c('React').createElement('a',{href:i.conversations},'Learn More'))));}};f.exports=j;}),null);
__d('NotificationJewelList.react',['cx','fbt','Animation','Event','LogicalGrid.react','NotificationListItem.react','NotificationListPropTypes','NotificationsTabConfig','NotificationTabsController','NotificationsTabEnum','NotificationsTabsModel','NotifTestIDs','NotificationVPVs','React','ReactDOM','ScrollableArea.react','SignalsTab.react','SignalsTabGroup.react','Vector','XUISpinner.react','FunnelLogger','NotificationJewelFunnelLoggingConstants','debounce','getObjectValues','isEmpty'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_NAME,m=c('NotificationJewelFunnelLoggingConstants').FUNNEL_LOGGING_EVENT,n=160,o=530,p=40,q=64,r=430;j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(){var t,u;'use strict';for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.$NotificationJewelList3=function(){if(c('ReactDOM').findDOMNode(this.refs.notifList)){var y=c('ReactDOM').findDOMNode(this.refs.notifList),z=c('NotificationVPVs').getValidatedRectangle(c('ReactDOM').findDOMNode(this.refs.scrollable));this.props.afterScroll(this.$NotificationJewelList1(),y,z);}}.bind(this),this.$NotificationJewelList4=function(){return c('getObjectValues')(this.props.notifs).map(function(y){return JSON.stringify(y);});}.bind(this),this.$NotificationJewelList7=function(){c('FunnelLogger').appendAction(l,m.SCROLL_TO_FETCH);this.$NotificationJewelList3();}.bind(this),u;}s.prototype.$NotificationJewelList1=function(){'use strict';var t=this.refs.loading;if(!t)return false;var u=c('ReactDOM').findDOMNode(this.refs.scrollable),v=c('Vector').getElementDimensions(u).y;if(v===0)return false;var w=c('Vector').getElementPosition(u).y+v,x=c('Vector').getElementPosition(c('ReactDOM').findDOMNode(t)).y;x-=p;return x<w;};s.prototype.$NotificationJewelList2=function(){'use strict';var t=c('Vector').getViewportDimensions().y,u=Math.min(this.props.maxHeight||o,t-n);if(this.props.upsell)return Math.max(u-q,0);return u;};s.prototype.$NotificationJewelList5=function(t,u){'use strict';var v=void 0;if(!t){v=function x(y){return y;};}else v=function x(y){if(y.notifTab===u)return y;return null;};var w=c('getObjectValues')(this.props.notifs).filter(v).map(function(x){return x.alert_id;});return c('getObjectValues')(this.props.notifs).filter(v).map(function(x,y){var z=x.alert_id,aa=this.$NotificationJewelList6(z,w);return c('React').createElement(c('NotificationListItem.react'),babelHelpers['extends']({getDebugData:this.$NotificationJewelList4,isRead:this.props.readState[z],key:z,negativeTracking:this.props.negativeTracking,onChevronHide:this.props.onChevronHide,onChevronShow:this.props.onChevronShow,onRead:this.props.onRead,parent:this,paused:this.props.paused,row:aa,rowIndex:y,shortenTimestamp:this.props.shortenTimestamp,visible:!this.props.hiddenState[z]},x));}.bind(this));};s.prototype.componentDidMount=function(){'use strict';var t=c('ReactDOM').findDOMNode(this.refs.scrollable);c('Event').listen(window,'resize',c('debounce')(function(){if(!c('isEmpty')(this.props.notifs))new (c('Animation'))(t).to('height',this.$NotificationJewelList2()+'px').duration(100).go();}.bind(this)));};s.prototype.componentDidUpdate=function(t){'use strict';if(this.props.paused&&!t.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this.$NotificationJewelList3,0);};s.prototype.$NotificationJewelList6=function(t,u){'use strict';return u.indexOf(t);};s.prototype.render=function(){'use strict';var t=this.props.notifs,u=null,v=null,w=r,x=null,y=c('React').createElement('ul',{'data-gt':this.props.tracking,'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST});if(!c('isEmpty')(t)){u=c('React').createElement(c('LogicalGrid.react'),{ref:'notifList',component:y},this.$NotificationJewelList5(false,''));v=this.$NotificationJewelList2();}else if(!this.props.canFetchMore)u=c('React').createElement('div',{className:"_572e",'data-testid':c('NotifTestIDs').REACT_NOTIF_LIST},i._("\u65b0\u3057\u3044\u304a\u77e5\u3089\u305b\u306f\u3042\u308a\u307e\u305b\u3093"));if(this.props.canFetchMore)x=c('React').createElement(c('XUISpinner.react'),{ref:'loading',className:"jewelLoading"});var z=null;if(this.props.upsell){var aa=this.props.upsell.module;z=c('React').createElement(aa,this.props.upsell.props);}var ba="_50-t"+(this.props.showingChevron?' '+"_2iy1":''),ca=c('React').createElement(c('ScrollableArea.react'),{ref:'scrollable',width:w,height:v,fade:true,persistent:true,onScroll:c('debounce')(this.$NotificationJewelList7,200)},u,x);if(c('NotificationsTabConfig').in_gk_notifications_tab&&c('NotificationsTabConfig').is_work_user){var da=true,ea=this.$NotificationJewelList5(da,c('NotificationsTabEnum').CONVERSATIONS),fa=this.$NotificationJewelList5(da,c('NotificationsTabEnum').KEYWORDS),ga=c('NotificationTabsController').getSizeUnseenState(t),ha=c('NotificationTabsController').getTabByName(c('NotificationsTabsModel').TABS.myConversations,ga,y,ea),ia=c('NotificationTabsController').getTabByName(c('NotificationsTabsModel').TABS.keywords,ga,y,fa),ja=c('NotificationsTabsModel').TABS.all;ca=c('React').createElement(c('SignalsTabGroup.react'),{onSelectionChanged:c('NotificationsTabsModel').onTabSelectionChanged},c('React').createElement(c('SignalsTab.react'),{title:ja,key:ja,count:ga[ja]},ca),ha,ia);}return (c('React').createElement('div',{className:ba},ca,z));};s.propTypes=c('NotificationListPropTypes');f.exports=s;}),null);