if (self.CavalryLogger) { CavalryLogger.start_js(["wPP42"]); }

__d("EnterpriseLabsLoggingEvents",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FOCUS_MODE_MESSAGE_SENT_ASYNC:"enterprise_labs.focus_mode.send_message_async",FOCUS_MODE_MESSAGE_SENT_BYPASSED:"enterprise_labs.focus_mode.send_message_bypassed",FOCUS_MODE_SENT_NO_MESSAGES:"enterprise_labs.focus_mode.sent_no_messages",FOCUS_MODE_BYPASS_THREAD:"enterprise_labs.focus_mode.bypass_thread",FOCUS_MODE_BYPASS_FAILURE:"enterprise_labs.focus_mode.bypass_failure",FOCUS_MODE_MUTE_NOTIFICATION:"enterprise_labs.focus_mode.mute_notification",DUALITY_WARNING_SHOWN:"enterprise_labs.duality.warning_shown",DUALITY_WARNING_DISMISSED:"enterprise_labs.duality.warning_dismissed",DUALITY_SWITCH_USER:"enterprise_labs.duality.switch_user",DUALITY_SWITCH_ACCOUNTS:"enterprise_labs.duality.switch_accounts",HIJACKED_DUALITY_WARNING_SHOWN:"enterprise_labs.hijacked_duality.warning_shown",HIJACKED_DUALITY_WARNING_DISMISSED:"enterprise_labs.hijacked_duality.warning_dismissed",HIJACKED_DUALITY_SWITCH_USER:"enterprise_labs.hijacked_duality.switch_user",TIMEZONE_WARNING_SHOWN:"enterprise_labs.timezone.warning_shown",TIMEZONE_WARNING_IGNORED:"enterprise_labs.timezone.warning_ignored",TIMEZONE_WARNING_DISMISSED:"enterprise_labs.timezone.warning_dismissed",NT_CLICK_TAB:"enterprise_labs.nt.click.tab"};}),null);
__d('EnterpriseLabsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:EnterpriseLabsLoggerConfig',this.$EnterpriseLabsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:EnterpriseLabsLoggerConfig',this.$EnterpriseLabsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$EnterpriseLabsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$EnterpriseLabsTypedLogger1=babelHelpers['extends']({},this.$EnterpriseLabsTypedLogger1,j);return this;};h.prototype.setEntityID=function(j){this.$EnterpriseLabsTypedLogger1.entity_id=j;return this;};h.prototype.setEvent=function(j){this.$EnterpriseLabsTypedLogger1.event=j;return this;};h.prototype.setVC=function(j){this.$EnterpriseLabsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$EnterpriseLabsTypedLogger1=babelHelpers['extends']({},this.$EnterpriseLabsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={entity_id:true,event:true,vc:true};f.exports=h;}),null);
__d('WorkAvailabilityStatusFragment',['Relay'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{alias:'workInfo',children:[{alias:'availabilityStatus',children:[{fieldName:'status',kind:'Field',metadata:{},type:'WorkUserAvailabilityStatusType'},{alias:'endDate',fieldName:'end_date',kind:'Field',metadata:{},type:'Time'}],fieldName:'availability_status',kind:'Field',metadata:{canHaveSubselections:true},type:'WorkUserAvailabilityStatus'},{alias:'dndSettings',children:[{alias:'basicWeeklySchedule',children:[{alias:'startHour',fieldName:'start_hour',kind:'Field',metadata:{},type:'Int'},{alias:'startMinute',fieldName:'start_minute',kind:'Field',metadata:{},type:'Int'},{alias:'endHour',fieldName:'end_hour',kind:'Field',metadata:{},type:'Int'},{alias:'endMinute',fieldName:'end_minute',kind:'Field',metadata:{},type:'Int'}],fieldName:'basic_weekly_schedule',kind:'Field',metadata:{canHaveSubselections:true},type:'DoNotDisturbWeekdaySchedule'},{alias:'basicWeekendSchedule',children:[{alias:'startDay',fieldName:'start_day',kind:'Field',metadata:{},type:'DayOfTheWeek'},{alias:'startHour',fieldName:'start_hour',kind:'Field',metadata:{},type:'Int'},{alias:'startMinute',fieldName:'start_minute',kind:'Field',metadata:{},type:'Int'},{alias:'endDay',fieldName:'end_day',kind:'Field',metadata:{},type:'DayOfTheWeek'},{alias:'endHour',fieldName:'end_hour',kind:'Field',metadata:{},type:'Int'},{alias:'endMinute',fieldName:'end_minute',kind:'Field',metadata:{},type:'Int'}],fieldName:'basic_weekend_schedule',kind:'Field',metadata:{canHaveSubselections:true},type:'DoNotDisturbWeekendsSchedule'},{alias:'isWeeklyScheduleTurnedOn',fieldName:'is_weekly_schedule_turned_on',kind:'Field',metadata:{},type:'Boolean'},{alias:'isWeekendScheduleTurnedOn',fieldName:'is_weekend_schedule_turned_on',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'do_not_disturb_settings',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'WorkUserDoNotDisturbSchedule'}],fieldName:'work_info',kind:'Field',metadata:{canHaveSubselections:true},type:'WorkUserInfo'}],id:c('Relay').QL.__id(),kind:'Fragment',metadata:{},name:'WorkAvailabilityStatusFragmentRelayQL',type:'User'};}();}),null);
__d('WorkAvailabilityStatusChangeSubscription',['GraphQLSubscription','Relay','WorkAvailabilityStatusFragment','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('GraphQLSubscription'));i=h&&h.prototype;j.getSubscriptionQuery=function(){return function(k){return {calls:[{kind:'Call',metadata:{},name:'work_availability_status_change_subscribe',value:{kind:'CallVariable',callVariableName:'input'}}],children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('Relay').QL.__frag(k)]),fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'},{fieldName:'client_subscription_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'client_mutation_id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],kind:'Subscription',metadata:{inputType:'WorkAvailabilityStatusChangeSubscribeData!'},name:'WorkAvailabilityStatusChangeSubscription',responseType:'WorkAvailabilityStatusChangeSubscribeResponsePayload'};}(c('WorkAvailabilityStatusFragment'));};j.prototype.getQueryParams=function(k){return {user_id:c('nullthrows')(k.user_id)};};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XCheckFocusModeAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/work\/focus_mode\/check\/",{fbid:{type:"FBID",required:true}});}),null);
__d('ChatSubscribeToFocusModeChanges',['AsyncRequest','ImmutableObject','RelayGraphQLSubscriber','RelayGraphQLSubscriptionNetworkLayer','WorkAvailabilityStatusChangeSubscription','XDliteGraphQLSkywalkerController','MercuryServerPayloadPreprocessor','MercuryPayloadSource','WorkUserAvailabilityStatusType','MercuryThreadInformer','XCheckFocusModeAsyncController','MercuryParticipants'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();'use strict';var h=c('XDliteGraphQLSkywalkerController').getURIBuilder().getURI();c('RelayGraphQLSubscriptionNetworkLayer').injectGraphQLSubscriber(c('RelayGraphQLSubscriber')(h));var i={},j={},k=function m(n,o,p,q){var r=c('MercuryParticipants').getNow(p.id);if(!r)return;var s=c('ImmutableObject').setProperty(r,'is_user_focusing',q);c('MercuryServerPayloadPreprocessor').getForFBID(n).handleUpdate({participants:[s],from_client:false,payload_source:c('MercuryPayloadSource').SERVER_FETCH_PARTICIPANTS});Object.keys(j[o]).forEach(function(t){c('MercuryThreadInformer').getForFBID(n).updatedThread(t);});},l=function m(n,o,p){var q=p.fbid;if(!q)return;if(!p.employee)return;if(n===q)return;if(!j[q])j[q]={};j[q][o]=o;if(i[q])return;var r=c('XCheckFocusModeAsyncController').getURIBuilder().setFBID('fbid',q).getURI();new (c('AsyncRequest'))().setURI(r).setHandler(function(s){var t=s.payload;if(!t)return;k(n,q,p,t.is_user_focusing);}).send();i[q]=new (c('WorkAvailabilityStatusChangeSubscription'))({user_id:q},function(s){var t=s.work_availability_status_change_subscribe.user,u=t?t.work_info:null,v=u?u.availability_status:null;if(v&&v.status&&v.end_date!==null){var w=c('WorkUserAvailabilityStatusType')[v.status],x=w===c('WorkUserAvailabilityStatusType').FOCUS&&v.end_date*1000>Date.now();k(n,q,p,x);}});};f.exports={subscribe:l};}),null);
__d('ChatUserFocusLogging',['ChatDispatcher','ChatTabActions','EnterpriseLabsLoggingEvents','EnterpriseLabsTypedLogger','MercuryDispatcher','MercuryPayloadSource','MercuryThreads'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('MercuryDispatcher').get(),i=c('MercuryThreads').get(),j={},k=function n(o,p){try{if(p.payload_source!==c('MercuryPayloadSource').CLIENT_SEND_MESSAGE)return;var r=p.actions||[];r.forEach(function(s){var t=s.thread_id;if(!t||!j[t])return;var u=i.getThreadMetaNow(t);if(!u)return;var v=(u.bypass_focus_mode_until||0)*1000>Date.now();j[s.thread_id].messagesSent=true;var w=v?c('EnterpriseLabsLoggingEvents').FOCUS_MODE_MESSAGE_SENT_BYPASSED:c('EnterpriseLabsLoggingEvents').FOCUS_MODE_MESSAGE_SENT_ASYNC;new (c('EnterpriseLabsTypedLogger'))().setEntityID(t).setEvent(w).log();});}catch(q){return;}},l=function n(o){try{if(o.actionType===c('ChatTabActions').Types.CLOSE_TAB&&(o.reason==='close_click'||o.reason==='close_esc')){var q=j[o.threadID];if(!q)return;if(!q.messagesSent&&!q.closed)new (c('EnterpriseLabsTypedLogger'))().setEntityID(o.threadID).setEvent(c('EnterpriseLabsLoggingEvents').FOCUS_MODE_SENT_NO_MESSAGES).log();q.closed=true;}}catch(p){return;}};h.subscribe('update-messages',k);c('ChatDispatcher').register(l);m.prototype.registerThreadID=function(n){if(j[n]&&!j[n].closed)return;j[n]={messagesSent:false,closed:false};};function m(){}f.exports=new m();}),null);
__d('ChatUserFocusWarning',['MercuryParticipants','MercuryViewer','emptyFunction','ifRequired'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=void 0,i=void 0,j=function m(n){if(!h)c('ifRequired')('ChatUserFocusLogging',function(o){return h=o;},c('emptyFunction'));if(h&&h.registerThreadID)h.registerThreadID(n);},k=function m(n,o,p){if(!i)c('ifRequired')('ChatSubscribeToFocusModeChanges',function(q){i=q;},c('emptyFunction'));if(i&&i.subscribe)i.subscribe(n,o,p);},l={updateUserFocusWarning:function m(n,o,p){c('MercuryParticipants').get(c('MercuryViewer').getID(),function(q){var r=q.employee;if(r)c('MercuryParticipants').getMulti(n.participants,function(s){var t=false;for(var u in s){if(q.id!==s[u].id&&s[u].is_user_focusing)t=true;if(s[u].employee&&q.fbid)k(q.fbid,n.thread_id,s[u]);}if(t){j(n.thread_id);var v=n&&n.bypass_focus_mode_until&&n.bypass_focus_mode_until>Date.now()/1000;o(v);}else p();});});}};f.exports=l;}),null);