if (self.CavalryLogger) { CavalryLogger.start_js(["Vp8dK"]); }

__d("createExponentialMovingAverage",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k){var l=arguments.length<=1||arguments[1]===undefined?0:arguments[1],m=l;return function(n){return m+=k*(n-m);};}function i(k){return function(l){return 1-Math.exp(-l/k);};}function j(k){var l=arguments.length<=1||arguments[1]===undefined?0:arguments[1],m=l,n=i(k);return function(o,p){return m+=n(p)*(o-m);};}h.createContinuous=j;f.exports=h;}),null);
__d('VelocityTracker',['createExponentialMovingAverage','performanceNow'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var i=arguments.length<=0||arguments[0]===undefined?50:arguments[0],j=arguments.length<=1||arguments[1]===undefined?{x:0,y:0}:arguments[1];'use strict';this.$VelocityTracker5=j.x;this.$VelocityTracker6=j.y;this.$VelocityTracker1=c('performanceNow')();this.$VelocityTracker2=c('createExponentialMovingAverage').createContinuous(i,this.$VelocityTracker5);this.$VelocityTracker3=c('createExponentialMovingAverage').createContinuous(i,this.$VelocityTracker6);}h.prototype.update=function(i,j){'use strict';var k=0;if(this.$VelocityTracker4){k=c('performanceNow')()-this.$VelocityTracker1;k=this.updateVelocity((i-this.$VelocityTracker4.x)*1000/k,(j-this.$VelocityTracker4.y)*1000/k);}else this.$VelocityTracker1=c('performanceNow')();this.$VelocityTracker4={x:i,y:j};return k;};h.prototype.updateVelocity=function(i,j){'use strict';var k=c('performanceNow')(),l=k-this.$VelocityTracker1;this.$VelocityTracker1=k;this.$VelocityTracker5=this.$VelocityTracker2(i,l);this.$VelocityTracker6=this.$VelocityTracker3(j,l);return l;};h.prototype.getVelocityX=function(){'use strict';return Math.trunc(this.$VelocityTracker5);};h.prototype.getVelocityY=function(){'use strict';return Math.trunc(this.$VelocityTracker6);};h.prototype.getSpeed=function(){'use strict';return Math.trunc(Math.sqrt(this.$VelocityTracker5*this.$VelocityTracker5+this.$VelocityTracker6*this.$VelocityTracker6));};f.exports=h;}),null);
__d('PhotoMultiPhotosThumb',['Event','Style'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1200,i={init:function j(k,l){var m=null,n=0;function o(q){n=q;l.forEach(function(r,s){c('Style').set(r,'opacity',s===q?1:0);});}function p(){o((n+1)%l.length);m=setTimeout(p,h);}c('Event').listen(k,'mouseenter',function(){if(m)return;n=0;p();});c('Event').listen(k,'mouseleave',function(){o(0);window.clearTimeout(m);m=null;});}};f.exports=i;}),null);
__d('BulkTagLoader',['AsyncRequest','emptyFunction'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=false;function i(){}Object.assign(i,{loadForSet:function j(k){if(!h){h=true;new (c('AsyncRequest'))('/ajax/photos/sets/tags_fetch.php').setHandler(c('emptyFunction')).setData({set:k}).send();}},loadForAlbum:function j(k){if(!h){h=true;new (c('AsyncRequest'))('/ajax/photos/album/tags_fetch.php').setHandler(c('emptyFunction')).setData({fbid:k}).send();}},reset:function j(){h=false;}});f.exports=i;}),null);
__d('SphericalMediaConstants',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={COMP_PHOTO_EDIT_THUMB:'PhotoEditThumbanil',COMP_PHOTO_VIEWER:'PhotoViewer',EDIT_VIEWPORT_SIZE:{width:476,height:476},HI_ALPHA_BG:{start:.2,end:.5},HI_ALPHA_ELEMENT:{start:.5,end:.85},HI_ALPHA_DURATION:400,HI_SIZE_NORMAL:{width:35,height:35,center_radius:2,background_radius:17.5,inner_radius:12,arc_radius:6.3,arc_stroke:5.3,inner_stroke:1,triangle:[2,2.5,5.2],rim_radius:16.8,rim_stroke:1.4},HI_SIZE_FULL:{width:50,height:50,center_radius:3,background_radius:25,inner_radius:17.14,arc_radius:9,arc_stroke:7.57,inner_stroke:1.5,triangle:[2.85,4.29,7.9],rim_radius:24,rim_stroke:2},HI_BLINK_ARC_RAD:Math.PI/6,HI_BLINK_DURATION:400,HI_FADE_OUT_DELAY:1000,MOUSE_EXPOSURE:4000,LOGGER_SURFACES:{newsfeed:'newsfeed',timeline:'timeline',fullpage:'photo_viewer',snowlift:'www_snowlift',composer:'composer',albumComposer:'album_composer',other:'other'},LOGGER_SIGNIFICANT_MOVEMENT_DEGREE:30,GYRO_SLIP_FACTOR:.15,RB_SPRING_FACTOR:25,RB_MAX_SPRING_DEGREE:15,RB_MAX_STRETCH_X_DEGREE:20,RB_MAX_STRETCH_Y_DEGREE:20,RB_FRICTION:.3,TILED_CUBE_FACES:{PLUS_X:2,MINUS_X:0,PLUS_Y:4,MINUS_Y:5,PLUS_Z:3,MINUS_Z:1},TILED_CUBE_TILE_SIZE:512};f.exports=h;}),null);
__d('SphericalMediaBootloaded.react',['cx','BootloadedComponent.react','JSResource','LoadingIndicator.react','React','SphericalMediaConstants'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('SphericalMediaConstants').COMP_PHOTO_EDIT_THUMB,l=c('SphericalMediaConstants').COMP_PHOTO_VIEWER,m=function o(p,q){return (c('React').createElement('div',{className:p,style:q},c('React').createElement(c('LoadingIndicator.react'),{className:"_4qlq",size:'small',color:'white'})));};i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;n.prototype.render=function(){'use strict';var o=void 0;switch(this.props.componentName){case k:var p=this.props.loadingElement||m("_7d7",{width:this.props.width,height:this.props.height});return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('SphericalPhotoEditThumbnail.react').__setRef('SphericalMediaBootloaded.react'),bootloadPlaceholder:p},this.props)));case l:o=c('React').createElement('div',null);return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('SphericalPhotoViewer.react').__setRef('SphericalMediaBootloaded.react'),bootloadPlaceholder:o},this.props)));default:return null;}};function n(){'use strict';i.apply(this,arguments);}f.exports=n;}),null);
__d('SphericalMediaActions',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={TURN_ON:'TURN_ON',TURN_OFF:'TURN_OFF',ENABLE_SPHERICAL:'ENABLE_SPHERICAL',DISABLE_SPHERICAL:'DISABLE_SPHERICAL',REQUEST_PHOTO_FAILED:'REQUEST_PHOTO_FAILED',REQUEST_PHOTO:'REQUEST_PHOTO',RECEIVE_PHOTO:'RECEIVE_PHOTO',UPDATE_CONTROLLER:'UPDATE_CONTROLLER',DRAG_START:'DRAG_START',UPDATE_VIEW:'UPDATE_VIEW',UPDATE_VIEWPORT:'UPDATE_VIEWPORT',UPDATE_FOV:'UPDATE_FOV',UPDATE_VIEWPORT_AND_FOV:'UPDATE_VIEWPORT_AND_FOV',START_ANIMATING:'START_ANIMATING',STOP_ANIMATING:'STOP_ANIMATING',UPDATE_RENDERER:'UPDATE_RENDERER',UPDATE_DIMENSION:'UPDATE_DIMENSION',UPDATE_INITIAL_FOV:'UPDATE_INITIAL_FOV',UPDATE_INITIAL_VIEWPORT:'UPDATE_INITIAL_VIEWPORT',SETUP_RENDERER:'SETUP_RENDERER',WEBGL_INIT_FAILED:'WEBGL_INIT_FAILED',UPDATE_SOURCE:'UPDATE_SOURCE',SOURCE_ONLOAD:'SOURCE_ONLOAD',UPDATE_PHOTO_EDIT:'UPDATE_PHOTO_EDIT',CANCEL_EDITING:'CANCEL_EDITING',START_EDITING:'START_EDITING',STOP_EDITING:'STOP_EDITING',UPDATE_PHOTO:'UPDATE_PHOTO',UPDATE_PHOTO_FAILED:'UPDATE_PHOTO_FAILED',UPDATE_PHOTO_DONE:'UPDATE_PHOTO_DONE',RESET_MOUSE_ANIMATION:'RESET_MOUSE_ANIMATION',START_MOUSE_ANIMATION:'START_MOUSE_ANIMATION',STOP_MOUSE_ANIMATION:'STOP_MOUSE_ANIMATION',DISABLE_SPHERICAL_ON_SAVE:'DISABLE_SPHERICAL_ON_SAVE',ENABLE_SPHERICAL_ON_SAVE:'ENABLE_SPHERICAL_ON_SAVE',ENABLE_EDITING:'ENABLE_EDITING',DISABLE_EDITING:'DISABLE_EDITING',TAKE_STATE_SNAPSHOT:'TAKE_STATE_SNAPSHOT',RESORE_STATE_FROM_SNAPSHOT:'RESORE_STATE_FROM_SNAPSHOT',REMOVE_STATE_SNAPSHOT:'REMOVE_STATE_SNAPSHOT',PHOTO_REMOVED:'PHOTO_REMOVED'};}),null);
__d('ElementVisibilityObserver',['EventEmitter','getElementRect'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={notvisible:'notvisible',visible:'visible',fullyvisible:'fullyvisible'},k={visiblestart:'visiblestart',visibleend:'visibleend',fullyvisiblestart:'fullyvisiblestart',fullyvisibleend:'fullyvisibleend'};function l(n,o){var p=(n?1:0)+(o?1:0);switch(p){case 0:return j.notvisible;case 1:return j.visible;case 2:return j.fullyvisible;}throw new Error('This cannot happen but keeps flow happy. Happy flow.');}h=babelHelpers.inherits(m,c('EventEmitter'));i=h&&h.prototype;function m(n){i.constructor.call(this);this.$ElementVisibilityObserver1=n;this.$ElementVisibilityObserver2=false;this.$ElementVisibilityObserver3=false;}m.prototype.getCurrentState=function(){return l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3);};m.prototype.onMove=function(n){var o=c('getElementRect')(this.$ElementVisibilityObserver1),p=o.top>n.top&&o.top<n.bottom,q=o.bottom>n.top&&o.bottom<n.bottom,r=l(this.$ElementVisibilityObserver2,this.$ElementVisibilityObserver3),s=l(q,p);if(r==s)return;switch(r){case j.notvisible:this.emit(k.visiblestart);break;case j.fullyvisible:this.emit(k.fullyvisibleend);break;}switch(s){case j.notvisible:this.emit(k.visibleend);break;case j.fullyvisible:this.emit(k.fullyvisiblestart);break;}this.$ElementVisibilityObserver2=q;this.$ElementVisibilityObserver3=p;};f.exports.ElementVisibilityObserver=m;f.exports.VISIBILITY=j;f.exports.VISIBILITY_CHANGE=k;}),null);
__d('VisibilityObserver',['ElementVisibilityObserver','EmitterSubscription','onViewportChanged'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('ElementVisibilityObserver').ElementVisibilityObserver;function i(){this.$VisibilityObserver1=[];var j=c('onViewportChanged')(this.$VisibilityObserver4.bind(this));this.$VisibilityObserver2=j.scheduleCheck;this.$VisibilityObserver3=j.remove;}i.prototype.removeSubscriptions=function(){this.$VisibilityObserver3();};i.prototype.addListener=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.addListener(k,l);};i.prototype.once=function(j,k,l){var m=this.$VisibilityObserver5(j);return m.once(k,l);};i.prototype.getCurrentState=function(j){return this.$VisibilityObserver5(j).getCurrentState();};i.prototype.$VisibilityObserver5=function(j){for(var k=this.$VisibilityObserver1,l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++];}else{m=k.next();if(m.done)break;n=m.value;}var o=n;if(o.element===j)return o;}var p=new h(j);this.$VisibilityObserver1.push(p);this.$VisibilityObserver2();return p;};i.prototype.$VisibilityObserver4=function(j){this.$VisibilityObserver1.forEach(function(k){return k.onMove(j);});};f.exports.instance=new i();f.exports.VISIBILITY=c('ElementVisibilityObserver').VISIBILITY;f.exports.VISIBILITY_CHANGE=c('ElementVisibilityObserver').VISIBILITY_CHANGE;}),null);