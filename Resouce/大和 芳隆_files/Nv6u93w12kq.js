if (self.CavalryLogger) { CavalryLogger.start_js(["BnIxf"]); }

__d("NavigationMetricsEnumJS",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"};}),null);
__d("ResourceTimingMetricsEnumJS",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={START_TIME:"startTime",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",SECURE_CONNECTION_START:"secureConnectionStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd"};}),null);
__d('ImageTimingHelper',['Arbiter','BigPipe','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={};c('Arbiter').subscribe(c('BigPipe').Events.init,function(j,k){if(k.lid&&k.lid!=='0')k.arbiter.subscribe('images_displayed',function(l,m){var n=h[m.lid];if(!n)n=h[m.lid]=[];m.images.forEach(function(o){try{var q=new (c('URI'))(o);o=q.setFragment('').toString();}catch(p){return;}if(i[o])return;i[o]=true;n.push({pagelet:m.pagelet,timeslice:m.timeslice,ts:m.ts,uri:o});});});});f.exports.getImageTimings=function(j){return h[j]||[];};}),null);
__d('PageletEventsHelper',['Arbiter','PageletEventConstsJS'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='BigPipe/init',i='pagelet_event',j='phase_begin',k={},l=false;function m(){return {pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}};}function n(q,r,s,t){if(k[t].pagelets[r]==undefined)k[t].pagelets[r]={};k[t].pagelets[r][q]=s;}function o(q){q.subscribe(i,function(r,s){var event=s.event,t=s.ts,u=s.id,v=s.lid,w=s.phase,x=s.categories,y=s.allResources,z=s.displayResources;n(event,u,t,v);var aa=k[v],ba=aa.pagelets[u];if(event===c('PageletEventConstsJS').ARRIVE_END){ba.phase=w;aa.all_resources[u]=y;aa.display_resources[u]=z;}if((event===c('PageletEventConstsJS').ONLOAD_END||event===c('PageletEventConstsJS').DISPLAY_END)&&x)x.forEach(function(ca){if(aa.categories[ca]==undefined)aa.categories[ca]={};aa.categories[ca][event]=t;});});q.subscribe(j,function(event,r){k[r.lid].phase_start[r.phase]=r.ts;});}var p={init:function q(){if(l)return;c('Arbiter').subscribe(h,function(event,r){var s=r.lid,t=r.arbiter;k[s]=m();o(t);});l=true;},getMetrics:function q(r){if(k[r])return JSON.parse(JSON.stringify(k[r]));return null;}};f.exports=p;}),null);
__d('ReactSpeedHelper',['LogBuffer','ReactDOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={enableRenderMeasurements:function i(){if(!c('ReactDOM').enableRenderMeasurements)return;c('ReactDOM').enableRenderMeasurements();},getMetrics:function i(j,k){return c('LogBuffer').read('react_speed').filter(function(l){return ((j==null||l.begin>=j)&&(k==null||l.end<=k));});}};f.exports=h;}),null);
__d('sourceMetaToString',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k;if(i.name){k=i.name;if(i.module)k=i.module+'.'+k;}else if(i.module)k=i.module+'.<anonymous>';if(j&&i.line){k=(k?k:'<anonymous>')+':'+i.line;if(i.column)k+=':'+i.column;}return k;}f.exports=h;}),null);
__d('NavigationTimingHelper',['NavigationMetricsEnumJS','forEachObject','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k){var l={};c('forEachObject')(c('NavigationMetricsEnumJS'),function(m){var n=k[m];if(n)l[m]=n+j;});return l;}var i={getAsyncRequestTimings:function j(k){if(!k||!c('performance').timing||!c('performance').getEntriesByName)return undefined;var l=c('performance').getEntriesByName(k);if(l.length===0)return undefined;return h(c('performance').timing.navigationStart,l[0]);},getNavTimings:function j(){if(!c('performance').timing)return undefined;return h(0,c('performance').timing);}};f.exports=i;}),null);
__d('ResourceTimingBootloaderHelper',['Bootloader','ResourceTimingMetricsEnumJS','ImageTimingHelper','URI','forEachObject','isEmpty','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={};function j(p,q,r,s){if(!c('performance').timing||!c('performance').getEntriesByType)return;var t={};if(s)t=c('ImageTimingHelper').getImageTimings(r).sort(function(ka,la){return ka.ts-la.ts;}).reduce(function(ka,la){if(ka[la.uri])return ka;ka[la.uri]=la.pagelet;return ka;},{});var u=c('performance').getEntriesByType('resource'),v=0,w=0,x=0;for(var y=0;y<u.length;y++){var z=u[y];if(z.duration<=0||z.startTime<q)continue;var aa='',ba='',ca='',da='',ea='',fa=z.initiatorType;switch(fa){case 'css':case 'link':case 'script':var ga=n(z.name);ba=ga[0];aa=ga[1];if(!ba||!aa)continue;if(aa==='css'||aa==='js'){da=aa;var ha=i[z.name]||w++;ca=ha+'_'+ba;}else{var ia=m(z.name);ea=ia[0];da=ia[1];ca=v+++'_'+ea;}break;case 'img':ca=v+++'_'+k(z.name);da='img';break;case 'iframe':ca=x+++'_'+k(z.name)+l(z.name);da='iframe';break;default:continue;}if(p[z.name]==undefined)p[z.name]=[];var ja={};c('forEachObject')(c('ResourceTimingMetricsEnumJS'),function(ka){var la=z[ka];if(la)ja[ka]=la+c('performance').timing.navigationStart;});ja.type=da;ja.desc=ca;if(da=='img'&&t.hasOwnProperty(z.name))ja.pagelet=t[z.name];ja.transferSize=z.transferSize;ja.encodedBodySize=z.encodedBodySize;p[z.name].push(ja);}}function k(p){var q=new (c('URI'))(p).getDomain();return q;}function l(p){var q=new (c('URI'))(p).getPath();return q;}function m(p){return [k(p),'img'];}function n(p){var q=p.match(/\/rsrc\.php\/.*\/([^\?]+)/);if(!q)return [];var r=q[1],s='',t=r.match(/\.(\w+)$/);if(t)s=t[1];return [r,s];}var o={addBootloaderMetricsToResourceTimings:function p(){var q=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],r=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],s=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(c('isEmpty')(i))i=c('Bootloader').getURLToHashMap();var t={};c('forEachObject')(i,function(w,x){t[w]=x;});var u={bootload:true,js_exec:true,start_bootload:true,tag_bootload:true},v=[];c('forEachObject')(r,function(w,x){var y=x.indexOf('/');if(y===-1)return;var z=x.substring(0,y);if(!u[z])return;v.push(x);var aa=x.substring(y+1),ba=t[aa];if(!ba)return;if(ba.startsWith('data:'))ba='inlined resource: '+aa;if(q[ba]==null)q[ba]=[{}];q[ba].forEach(function(ca){ca.bootloader_hash=aa;ca[z]=w;});});if(!s)v.forEach(function(w){return delete r[w];});return q;},getLastTTIAndE2EImageResponseEnds:function p(q,r,s){var t={TTI:q,E2E:r};if(!c('performance').timing)return t;var u=s.filter(function(x){return x.ts<=q;}).map(function(x){return x.uri;}).reduce(function(x,y){x[y]=true;return x;},{}),v=s.map(function(x){return x.uri;}).reduce(function(x,y){x[y]=true;return x;},{});for(var w in h)h[w].forEach(function(x){if(x.type==='img'){if(u[w])t.TTI=Math.max(t.TTI,x.responseEnd);if(v[w])t.E2E=Math.max(t.E2E,x.responseEnd);}});return t;},getMetrics:function p(q,r,s){h={};if(c('isEmpty')(i))i=c('Bootloader').getURLToHashMap();j(h,q,r,s);return h;}};f.exports=o;}),null);
__d('TimeSliceHelper',['invariant','ArtilleryExperiments','LogBuffer','Map','ReactSpeedHelper','sourceMetaToString','forEachObject'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function k(l,m){return Math.round((l-m)*1000);},j={formatMetricsForTransport:function k(l){var m=[],n=[],o=[],p=new (c('Map'))(),q=new (c('Map'))(),r=0,s=function u(v,w,x){var y=void 0;if(w.has(v)){y=w.get(v);}else{y=x.length;w.set(v,y);x.push(v);}return y;},t=[];if(l!=null)l.forEach(function(u){var v=i(u.begin,r),w=i(u.end,u.begin);r=u.end;var x=s(u.name,p,m),y=[v,w,x],z=u.counters||{},aa=Object.keys(z).filter(function(ea){return z[ea]!==0;}).sort(),ba=void 0;if(aa.length>0){var ca=aa.join(),da=s(ca,q,o);ba=aa.map(function(ea){return z[ea];});ba.unshift(da);}else ba=[];if(u.id)y.push(u.id);if(u.parentID)y.push(u.parentID);t.push(y);n.push(ba);});return {version:'compact',items:t,names:m,counters:n,counterSchemas:o};},getMetrics:function k(l,m,n,o){var p=c('LogBuffer').read('time_slice'),q=c('LogBuffer').read('time_slice_heartbeat'),r=c('ReactSpeedHelper').getMetrics().map(function(y){return babelHelpers['extends']({},y,{desc:'React['+y.name+']'});}),s=p.concat(q,r),t,u=[],v=function y(z){var aa;if(z.guard){var ba=c('sourceMetaToString')(z),ca=z.guard.toString();aa=ba?ca+' at '+ba:ca;}else if(z.desc){aa=z.desc;}else aa='JS['+z.count+']';var da={begin:z.begin,end:z.end,name:aa,counters:z.counters};if(c('ArtilleryExperiments').artillery_timeslice_edges){da.id=z.id;da.parentID=z.parentID;}u.push(da);},w=function y(){if(t)v(t.count==1?t.first:t);t=null;},x=function y(z,aa){c('forEachObject')(aa,function(ba,ca){var da=z[ca]||0;z[ca]=da+ba;});};s.sort(function(y,z){if(y.begin!==z.begin){return y.begin-z.begin;}else if(y.end!==z.end){return y.end-z.end;}else return 0;}).forEach(function(y){if(l&&y.end<l||m&&y.begin>m)return;if(y.end-y.begin<n){if(t&&y.begin-t.end<o){t.end=y.end;t.count++;x(t.counters,y.counters);}else{w();t={begin:y.begin,end:y.end,count:1,first:y,guard:false,id:undefined,parentID:undefined,counters:{}};}}else{w();v(y);}});w();return u;}};f.exports=j;}),null);
__d('PerfXFlusher',['invariant','Banzai'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='perfx_custom_logger_endpoint',j=['perfx_page','perfx_page_type','lid'];function k(m){j.forEach(function(n){return h(n in m,'PerfXFlusher: Field "%s" missing in the PerfX payload',n);});}var l={flush:function m(n){k(n);c('Banzai').post(i,n,{signal:true});},registerToSendWithBeacon:function m(n){c('Banzai').registerToSendWithBeacon(i,n);}};f.exports=l;}),null);
__d("pageLoadedViaSWCache",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return self.__SW_CACHE__===1;}f.exports=h;}),null);
__d('PerfXLogger',['DataAttributeUtils','PerfXFlusher','NavigationMetrics','NavigationTimingHelper','Set','forEachObject','performanceAbsoluteNow','setTimeoutAcrossTransitions','pageLoadedViaSWCache'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={},j=65*1000,k=['e2e','tti','all_pagelets_displayed','all_pagelets_loaded'],l={},m={_listenersSetUp:false,_setupListeners:function n(){if(this._listenersSetUp)return;this._subscribeToNavigationMetrics();c('PerfXFlusher').registerToSendWithBeacon(function(){var o=[];c('forEachObject')(h,function(p,q){if(!h[q].sent){var r=this.getPayload(q,'unload fired');if(r!=null)o.push(r);}}.bind(this));h={};return o;}.bind(this));this._listenersSetUp=true;},_init:function n(o){var p=o.lid;if(p==null)return;var q=i[p];delete i[p];h[p]=babelHelpers['extends']({tags:new (c('Set'))(q||[]),sent:false},o);this._registerTimeoutSendback(p);this._setupListeners();},initWithNavigationMetricsLID:function n(o,p){var q=c('NavigationMetrics').getFullPageLoadLid();if(!q)return;this._init(babelHelpers['extends']({},p,{lid:q}));if(o&&o.always)for(var r=0;r<o.always.length;r++)m.addTag(q,o.always[r]);if(o&&o.swCache&&c('pageLoadedViaSWCache')())for(var s=0;s<o.swCache.length;s++)m.addTag(q,o.swCache[s]);},init:function n(o,p){if(p!=null&&o.lid!=null)l[o.lid]=p;this._init(o);},addTag:function n(o,p){var q=h[o];if(q){q.tags.add(p);return;}if(!i[o])i[o]=[];i[o].push(p);},addTagWithNavigationMetricsLID:function n(o){var p=c('NavigationMetrics').getFullPageLoadLid();if(!p)return;m.addTag(p,o);},_registerTimeoutSendback:function n(o){var p=this._getFetchStart(o),q=j;if(p!=null)q-=c('performanceAbsoluteNow')()-p;c('setTimeoutAcrossTransitions')(function(){return this._uploadPayload(o,'sendback time out');}.bind(this),q);},_subscribeToNavigationMetrics:function n(){c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.EVENT_OCCURRED,function(o,p){if(!(o in h))return;if(k.includes(p.event)&&p.hasOwnProperty('timestamp')&&p.timestamp!=null)h[o][p.event]=p.timestamp;});c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(o,p){var q=p.serverLID;if(!(q in h))return;k.forEach(function(event){if(p.hasOwnProperty(event)&&p[event]!=null)h[q][event]=p[event];});this._uploadPayload(q);}.bind(this));},_getPayloadWithOffset:function n(o,p,q){var r=h[o];if(r==null)return null;var s=Object.assign({},r),t=document.querySelector('[id^="hyperfeed_story_id"]');if(t){var u=JSON.parse(c('DataAttributeUtils').getDataFt(t));if(u)s.mf_query_id=u.qid;}s.tags=Array.from(r.tags);this._adjustValues(s,p);s.fetch_start=p;if(s.perfx_page_type==='normal'){var v=c('NavigationTimingHelper').getNavTimings();if(v!=null&&v.navigationStart!=null)s.nav_to_fetch=p-v.navigationStart;}if(q!=null)s.sendback_reason=q;delete s.sent;return s;},_uploadPayload:function n(o,p){if(h[o]!=null&&!h[o].sent){var q=this.getPayload(o,p);if(q!=null){c('PerfXFlusher').flush(q);h[o].sent=true;}}},getPayload:function n(o,p){return this._getPayloadWithOffset(o,this._getFetchStart(o),p);},_getFetchStart:function n(o){if(!(o in h))return null;var p=void 0,q=h[o].perfx_page_type;if(q=='quickling'){if(!(o in l)){return null;}else p=c('NavigationTimingHelper').getAsyncRequestTimings(l[o]);}else p=c('NavigationTimingHelper').getNavTimings();if(!p||!p.fetchStart)return null;return p.fetchStart;},_adjustValues:function n(o,p){k.forEach(function(q){if(o.hasOwnProperty(q))o[q]-=p;});}};f.exports=m;}),null);