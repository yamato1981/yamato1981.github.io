if (self.CavalryLogger) { CavalryLogger.start_js(["e7M9+"]); }

__d("VideoChannelLoggerEvents",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SESSION_START:"session_start",SESSION_PAUSE:"session_pause",SESSION_RESUME:"session_resume",SESSION_END:"session_end",IMPRESSION:"impression",VPV:"vpv",CLICK:"click",WATCH_SUMMARY:"watch_summary",FOLLOW:"follow",UNFOLLOW:"unfollow",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",PIN_TOPIC:"pin_topic",UNPIN_TOPIC:"unpin_topic",MARK_VISIT:"mark_visit",AUTO_ADVANCE:"auto_advance",STORY_FETCH_RESULTS:"story_fetch_results",FETCH_FIRST_STORY:"fetch_first_story_success",FETCH_STORIES_FROM_ENTQUERY:"fetch_stories_from_entquery",FETCH_STORIES_FORWARD:"fetch_stories_forward",FETCH_STORIES_BACKWARD:"fetch_stories_backward",FETCH_FIRST_STORY_SUCCESS:"fetch_first_story_success",FETCH_FIRST_STORY_ERROR:"fetch_first_story_error",FETCH_STORIES_FROM_ENTQUERY_SUCCESS:"fetch_stories_from_entquery_success",FETCH_STORIES_FROM_ENTQUERY_ERROR:"fetch_stories_from_entquery_error",FETCH_STORIES_FORWARD_SUCCESS:"fetch_stories_forward_success",FETCH_STORIES_FORWARD_ERROR:"fetch_stories_forward_error",FETCH_STORIES_BACKWARD_SUCCESS:"fetch_stories_backward_success",FETCH_STORIES_BACKWARD_ERROR:"fetch_stories_backward_error"};}),null);
__d("VideoChannelLoggerFields",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DEPTH_LEVEL:"depth_level",EVENT_TARGET:"event_target",EVENT_TARGET_INFO:"event_target_info",ENTRY_POINT:"entry_point",ENTRY_POINT_TYPE:"entry_point_type",ENTRY_POINT_VALUE:"entry_point_value",EXIT_POINT_TYPE:"exit_point_type",EXIT_POINT_VALUE:"exit_point_value",FOLLOW_SURFACE:"follow_surface",EVENT:"event",HAS_STORY_FETCH_CURSOR:"has_story_fetch_cursor",IS_AD:"is_ad",IS_EMPLOYEE:"is_employee",IS_TEST_USER:"is_test_user",PERF_TIME_MS:"perf_time_ms",REQUEST_STATUS:"request_status",POSITION_IN_CHANNEL:"position_in_channel",SESSION_ID:"session_id",SUBSCRIPTION_SURFACE:"subscription_surface",STORY_ID:"story_id",STORY_FETCH_COUNT:"story_fetch_count",STORY_FETCH_CURSOR:"story_fetch_cursor",STORY_FETCH_LIMIT:"story_fetch_limit",TIME_SINCE_START:"time_since_start",TRACKING_DATA:"tracking_data",VIDEO_ID:"video",VIDEO_ID_OVERRIDE:"video_id_override",VIDEO_CHAINING_CALLER:"video_chaining_caller",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_CHANNEL_TITLE:"video_channel_title",VIDEO_HOME_SESSION_ID:"video_home_session_id",WATCH_TIME_S:"watch_time_s"};}),null);
__d("VideoHomeEvents",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SESSION_PREFETCH:"session_prefetch",SESSION_START:"session_start",SESSION_PAUSE:"session_pause",SESSION_RESUME:"session_resume",SESSION_END:"session_end",FOLLOW:"follow",UNFOLLOW:"unfollow",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",PIN_TOPIC:"pin_topic",UNPIN_TOPIC:"unpin_topic",MARK_VISIT:"mark_visit",VIDEO_DELETED:"video_deleted",VIDEO_STATUS_CHANGED:"video_status_changed",NAVIGATION:"navigation",OPEN_DIVEBAR:"open_divebar",CONTENT:"content",PULL_TO_REFRESH:"pull_to_refresh",HANDLING_APNS:"handling_apns",AUDIO_STATE:"audio_state",BADGE_FETCHED:"badge_fetched",METADATA_FETCHED:"metadata_fetched",DATA_PREFETCH:"data_prefetch",UNIT_PREFETCH:"unit_prefetch",BADGE_COUNT_FETCH:"badge_count_fetch",GRAPHQL_BADGE_UPDATE_SUBSCRIPTION:"graphql_badge_update_subscription",BADGE_COUNT_FETCH_ON_BADGE_PUSH:"badge_count_fetch_on_badge_push",EMPTY_UNIT:"empty_unit",INVALID_UNIT:"invalid_unit",NO_ITEMS_WITH_HAS_NEXT_PAGE:"no_items_with_has_next_page",SKIPPED_NOT_LIVE_IMPRESSION:"skipped_not_live_impression",COLLAPSED_IMPRESSION:"collapsed_impression",COLLAPSED_NO_VIDEO:"collapsed_no_video",SKIPPED_MF_LIVE_MISMATCH_IMPRESSION:"skipped_mf_live_mismatch_impression",COLLAPSED_WAS_LIVE_LIMIT_IMPRESSION:"collapsed_was_live_limit_impression",IMPRESSION:"impression",VPV:"vpv",VPVD:"vpvd",VPV_DURATION:"vpv_duration",CLICK:"click",SWIPE:"swipe",SESSION_SUMMARY:"session_summary",WATCH_SUMMARY:"watch_summary",DUPLICATE:"duplicate",BACKGROUNDED:"backgrounded",FOREGROUNDED:"foregrounded",END_SCREEN_DISPLAYED:"end_screen_displayed",END_OF_DATA:"end_of_data",MARK_DATA_DIRTY:"mark_data_dirty",LOAD_LOADING_CARD_VIEW:"load_loading_card_view",LOAD_ITEMS_LOADING_CARD_VIEW:"load_items_loading_card_view",TTI:"tti",TTI_REALDATA:"tti_realdata",E2E:"e2e",LOAD_SECTION:"load_section",LOAD_ITEMS:"load_items",REACTION_FETCH_UNITS:"reaction_fetch_units",REACTION_UNIT_ID_MEMCACHE_HIT:"reaction_unit_id_memcache_hit",REACTION_UNIT_ID_MEMCACHE_MISS:"reaction_unit_id_memcache_miss",VIDEO_JEWEL_IMPRESSION:"video_jewel_impression",SCROLL_PERF:"scroll_perf",SCROLL_PERF_HSCROLL:"scroll_perf_hscroll",APPENDED_HSCROLL_STORIES:"appended_hscroll_stories",LOAD_UNIT_ATTEMPT:"load_unit_attempt",UNIT_STORY_EXCEPTION:"unit_story_exception"};}),null);
__d("VideoHomeEventTargets",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BOOKMARK:"bookmark",CHANNEL:"channel",STORY:"story",VIDEO:"video",BUTTON:"button",SPINNER:"spinner",NONE:"none"};}),null);
__d("VideoHomeExitPointTypes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BACK:"back",URL:"url",BACKGROUND:"background",CHANNEL:"channel",TAB:"tab",DIVEBAR:"divebar",MESSENGER:"messenger",FACECAST:"facecast",LIVE_FULLSCREEN:"live_fullscreen",FULLSCREEN:"fullscreen",SEARCH:"search",UNKNOWN:"unknown"};}),null);
__d("VideoHomeLoggerFields",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BROADCAST_STATUS:"broadcast_status",BROADCAST_STATUS_EXPLICIT:"broadcast_status_explicit",CHANNEL_ID:"channel_id",REACTION_CHANNEL_ID:"reaction_channel_id",CHANNEL_POSITION:"channel_position",CLICK_TARGET:"click_target",CONNECTION_TYPE:"connection_type",CREATOR_STATUS:"creator_status",DATA_SOURCE:"data_source",DEVICE_YEAR_CLASS:"device_year_class",EVENT:"event",EVENT_TARGET:"event_target",EVENT_TARGET_ID:"event_target_id",ENTRY_POINT_TYPE:"entry_point_type",ENTRY_POINT_VALUE:"entry_point_value",EXIT_POINT_TYPE:"exit_point_type",EXIT_POINT_VALUE:"exit_point_value",FETCH_COUNT:"fetch_count",FETCH_CURSOR:"fetch_cursor",WITH_FETCH_CURSOR:"with_fetch_cursor",IS_EMPLOYEE:"is_employee",IS_TEST_USER:"is_test_user",IS_LIVE_STREAMING:"is_live_streaming",IS_BROADCAST:"is_broadcast",INITIAL_REQUEST:"initial_request",LOADING_DATA_TYPE:"loading_data_type",REQUEST_STATUS:"request_status",PERF_TIME_MS:"perf_time_ms",POSITION_IN_CHANNEL:"position_in_channel",SESSION_DURATION:"session_duration",UNIT_POSITION:"unit_position",POSITION_IN_UNIT:"position_in_unit",SESSION_ID:"session_id",VIDEO_ID:"video",VIDEO_CHANNEL_TYPE:"video_channel_type",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",VIDEO_CHANNEL_TITLE:"video_channel_title",TRACKING_DATA:"tracking_data",TAB_OPTION:"tab_option",REACTION_REQUEST_TYPE:"reaction_request_type",REACTION_UNIT_TYPE:"reaction_unit_type",REACTION_UNIT_NAME:"reaction_unit_name",TTI_TYPE:"tti_type",TIME_SINCE_START:"time_since_start",TIME_SINCE_PREFETCH:"time_since_prefetch",DURATION:"duration",LIVE_NOW_COUNT:"live_now_count",CLIENT_EVENT_TIME:"client_event_time",LAST_VISIT_TIME:"last_visit_time",EVENT_TARGET_INFO:"event_target_info",DUPLICATE_STORY_ID:"duplicate_story_id",DATA_PREFETCH_STATUS:"data_prefetch_status",APNS_PAYLOAD:"apns_payload",AUDIO_MUTED:"audio_muted",AUDIO_EXTERNAL:"audio_external",LAUNCHED_BY_USER:"launched_by_user",VIDEO_WATCHED_COUNT:"video_watched_count",VIDEO_SEARCH_EXPERIENCE:"video_search_experience",INITIAL_VPV_TIMESTAMP_MS:"initial_vpv_timestamp_ms",CURRENT_TIMESTAMP_MS:"current_timestamp_ms",WATCH_TIME_S:"watch_time_s",WATCH_TIME_WITH_SOUND_ON_S:"watch_time_with_sound_on_s",WATCH_TIME_ON_FULL_SCREEN_S:"watch_time_on_full_screen_s",WATCH_TIME_ON_TV_S:"watch_time_on_tv_s",WATCH_TIME_IN_CHANNELS_S:"watch_time_in_channels_s",WATCH_TIME_IN_WATCH_AND_SCROLL_S:"watch_time_in_watch_and_scroll_s",WATCH_TIME_INLINE_S:"watch_time_inline_s",WILL_TRIGGER_RELOAD:"will_trigger_reload",SHOULD_SHOW_PILL:"should_show_pill",CAN_SHOW_PILL:"can_show_pill",CURRENT_SCROLL_OFFSET:"current_scroll_offset",TIME_INTERVAL_SINCE_LAST_DOWNLOAD:"time_interval_since_last_download",DATA_DIRTY_REASON:"data_dirty_reason",TIME_SINCE_APP_OPEN:"time_since_app_open",IS_COLD_START:"is_cold_start",IS_FIRST_SESSION_START:"is_first_session_start",IS_FIRST_TTI:"is_first_tti",ERROR_USER_INFO:"error_user_info",PERF_LOGGER_DOWNLOAD_BANDWIDTH:"perf_logger_download_bandwidth",PERF_LOGGER_STATUS:"perf_logger_status",SCROLL_PERF_DURATION:"scroll_perf_duration",SCROLL_PERF_SMALL_DROP:"scroll_perf_small_drop",SCROLL_PERF_LARGE_DROP:"scroll_perf_large_drop",BADGE_COUNT:"badge_count",OLD_BADGE_COUNT:"old_badge_count",NEW_BADGE_COUNT:"new_badge_count",FETCH_REASON:"fetch_reason",BADGE_CHECK_INTERVAL:"badge_check_interval",DATA_STALE_INTERVAL:"data_stale_interval",PREFETCH_UNIT_COUNT:"prefetch_unit_count",CLICK_POINT:"click_point",DEST_MODULE:"dest_module",DEST_MODULE_CLASS:"dest_module_class",MODULE_CLASS:"module_class",SOURCE_MODULE:"source_module",NUMBER_OF_SECTION:"number_of_section",NUMBER_OF_COMPONENTS:"number_of_components",ELIGIBLE_FOR_HSCROLL_COUNT:"eligible_for_hscroll_count",RENDERED_IN_HSCROLL_COUNT:"rendered_in_hscroll_count",ASYNCHRONOUSLY_LOADED_HSCROLL_CONTENT:"asynchronously_loaded_hscroll_content",FIRST_N:"first_n",EXCEPTION:"exception",EXCEPTION_TRACE:"exception_trace",REQUESTED_UNIT_IDS:"requested_unit_ids",GENERATED_UNIT_IDS:"generated_unit_ids"};}),null);
__d("VideoPlayerInitializationEvent",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={PLAYER_INITIALIZATION:"player_initialization",PLAYER_ALLOCATED:"player_allocated",REQUESTED_PLAYING:"requested_playing",STARTED_PLAYING:"started_playing",PLAYER_SENT_REQUEST:"player_sent",PLAYER_RECEIVED_FIRST_BYTE:"player_received_first_byte",BUFFER_READY:"buffer_ready",METADATA_READY:"metadata_ready"};}),null);
__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={BANDWIDTH:"bandwidth",FORCED:"forced",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"};}),null);
__d("VideoQualityClassInternal",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={orderedValues:["sd","hd","uhd"]};}),null);
__d('VideoPlayerShakaPerformanceTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig',this.$VideoPlayerShakaPerformanceTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers['extends']({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this;};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this;};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this;};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this;};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this;};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this;};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this;};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this;};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this;};h.prototype.setPushed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=j;return this;};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this;};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this;};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this;};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this;};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this;};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this;};var i={access_token:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,is_live:true,length:true,pushed:true,resource:true,result:true,session:true,state:true,vc:true,video_id:true};f.exports=h;}),null);
__d('TaggedTimeRanges',['sprintf'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k;};}h.prototype.add=function(i,j,k){'use strict';if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return;}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break;}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l);};h.prototype.$TaggedTimeRanges5=function(i){'use strict';var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--;}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag});}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag});}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag});}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag});};h.prototype.get=function(i){'use strict';var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break;}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag;};h.prototype.getLength=function(){'use strict';return this.$TaggedTimeRanges1.length;};f.exports=h;}),null);
__d('dispatchCustomEvent',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=void 0;if(typeof b.CustomEvent==='function'){l=new b.CustomEvent(j,{detail:k});}else{l=b.document.createEvent('CustomEvent');l.initCustomEvent(j,true,true,k);}i.dispatchEvent(l);}f.exports=h;}),null);
__d('dispatchEvent',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k;if(typeof b.Event==='function'){k=new b.Event(j);}else{k=b.document.createEvent('Event');k.initEvent(j,true,true);}i.dispatchEvent(k);}f.exports=h;}),null);
__d('VideoPlayerShakaPerformanceLogger',['VideoPlayerShakaPerformanceTypedLogger','VideoPlayerShakaPerformanceLoggerConfig','guid'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('VideoPlayerShakaPerformanceTypedLogger'));i=h&&h.prototype;j.prototype.setState=function(l){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=l;return i.setState.call(this,l);};j.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1;};function j(){h.apply(this,arguments);}k.isEnabled=function(){return c('VideoPlayerShakaPerformanceLoggerConfig').isSampled;};function k(l,m,n){this.$VideoPlayerShakaPerformanceLogger2=l;this.$VideoPlayerShakaPerformanceLogger1=c('guid')();this.$VideoPlayerShakaPerformanceLogger4=m;this.$VideoPlayerShakaPerformanceLogger5=n;}k.prototype.getEventLogger=function(event){var l=Date.now(),m=new j();m.setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setIsLive(this.$VideoPlayerShakaPerformanceLogger4).setSession(this.$VideoPlayerShakaPerformanceLogger1).setState(this.$VideoPlayerShakaPerformanceLogger3).setPushed(0).setResult('success').setAccessToken(this.$VideoPlayerShakaPerformanceLogger5).setClientTimeBegin(l).setClientTimeEnd(l);var n=m.setState;m.setState=function(p){this.$VideoPlayerShakaPerformanceLogger3=p;return n.call(m,p);}.bind(this);m.updateState=function(p){if(m.getState()==this.$VideoPlayerShakaPerformanceLogger3)return m.setState(p);return m;}.bind(this);var o=m.setError;m.setError=function(p){if(typeof p==='object'){if(p.type==='aborted'||p.type==='delay'){this.setResult('aborted');}else{this.setResult('failed');o.call(this,p.type);}this.setCode(p.status);}else o.call(this,p);return this;};return m;};k.prototype.getOperationLogger=function(l){var m=this.getEventLogger(l),n=m.log;m.log=function(){this.setClientTimeEnd(Date.now());return n.call(this);};return m;};f.exports=k;}),null);
/**
 * @providesModule Shaka
 * @preserve-whitespace
 * @generated
 */
__d("Shaka",["Promise","VideoPlayerShakaPerformanceLogger","setTimeout","clearTimeout","clearImmediate","setImmediate","TimeSlice"],(function $module_Shaka(global,require,requireDynamic,requireLazy,module,exports){require.__markCompiled && require.__markCompiled();

var Promise = require('Promise');
var VideoPlayerShakaPerformanceLogger = require('VideoPlayerShakaPerformanceLogger');
var setTimeout = require('setTimeout');
var clearTimeout = require('clearTimeout');
var clearImmediate = require('clearImmediate');
var setImmediate = require('setImmediate');
var TimeSlice = require('TimeSlice');

function setEventProperty(obj, name, handler) {
  obj[name] = TimeSlice.guard(handler, 'shaka ' + name);
};

var g = {};

(function(window){var n,aa=this;function p(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)c.length||void 0===b?d[f]?d=d[f]:d=d[f]={}:d[f]=b}function q(a,b){function c(){}c.prototype=b.prototype;a.$b=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Yb=function(a,c,e){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2015 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ba(){};function ca(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}ca("error");ca("warn");ca("info");ca("log");ca("debug");function da(a){fa[a]={ta:ga(),end:NaN}}function ha(a){if(a=fa[a])a.end=ga()}var ga=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now,fa={};function ia(a,b,c,d){this.id=a;this.bandwidth=b||0;this.lang=c||"unknown";this.streamInfoID=d;this.active=!1}p("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0});function ja(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}ja.prototype.clone=function(){var a=new ja;a.maxHeight=this.maxHeight;a.minHeight=this.minHeight;a.maxWidth=this.maxWidth;a.maxBandwidth=this.maxBandwidth;a.minBandwidth=this.minBandwidth;return a};function ka(){this.fontSize="100%";this.fontColor=la;this.fontOpacity=ma;this.backgroundColor=na;this.backgroundOpacity=ma;this.fontEdge=oa}p("shaka.player.TextStyle",ka);
function pa(a){var b=[];b.push("font-size: "+a.fontSize);b.push("color: "+qa(a.fontColor,a.fontOpacity));b.push("background-color: "+qa(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var f=a.fontEdge[d].slice(3,6);c.push(qa(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+f.join("px ")+"px")}b.push("text-shadow: "+c.join(","));return b.join("; ")}function qa(a,b){return"rgba("+a.concat(b).join(",")+")"}var la=[255,255,255],na=[0,0,0];
ka.StandardColors={WHITE:la,BLACK:na,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ma=1;ka.StandardOpacities={OPAQUE:ma,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var oa=[];
ka.EdgeStyles={NONE:oa,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ra(a,b){this.id=a;this.lang=b||"unknown";this.enabled=this.active=!1}p("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0});function sa(a,b,c,d,f,e,g){this.id=a;this.bandwidth=b||0;this.width=c||0;this.height=d||0;this.streamInfoID=f;this.fbQualityLabel=e;this.fbQualityClass=g;this.active=!1}function ta(a,b){var c=a.width*a.height,d=b.width*b.height;return c<d?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}p("shaka.player.VideoTrack.compare",ta);function ua(a){for(var b=va,c=[],d=0;d<a.length;++d){for(var f=!1,e=0;e<c.length&&!(f=b?b(a[d],c[e]):a[d]===c[e]);++e);f||c.push(a[d])}return c};function wa(){return Date.now()+xa}var xa=0;function ya(a){this.b=a;this.c=0==za;this.a=0}var za=1;function Aa(a){return a.a<a.b.byteLength}function Ca(a){var b=a.b.getUint8(a.a);a.a+=1;return b}function r(a){var b=a.b.getUint32(a.a,a.c);a.a+=4;return b}function Da(a){var b,c;a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1));if(2097151<c)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");a.a+=8;return c*Math.pow(2,32)+b}
function Ea(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);a.a+=16;return b}function u(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b};function Fa(a){this.b=a;this.a=new ya(a);Ga||(Ga=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var Ga;
function v(a){var b;b=Ha(a);if(7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c;c=Ha(a);a:{for(d=0;d<Ga.length;d++)if(Ia(c,Ga[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&c[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,f=1;f<c.length;f++)d=256*d+c[f];c=d}c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a;d=new DataView(a.b.buffer,
a.b.byteOffset+a.a.a,c);u(a.a,c);return new Ja(b,d)}function Ha(a){var b=Ca(a.a),c;for(c=1;8>=c&&!(b&1<<8-c);c++);if(8<c)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(c);d[0]=b;for(b=1;b<c;b++)d[b]=Ca(a.a);return d}function Ja(a,b){this.id=a;this.a=b}
function Ka(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b};function La(a){this.c=Math.exp(Math.log(.5)/a);this.a=this.b=0}La.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b;this.a+=a};function Ma(a){return a.b/(1-Math.pow(a.c,a.a))};function x(a){var b=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles}),c;for(c in a)c in b||(b[c]=a[c]);return b}function y(a){return new CustomEvent("error",{detail:a,bubbles:!0})};function Na(a,b,c){Oa(b);Oa(c);return c==b||a>=Pa&&c==b.split("-")[0]||a>=Qa&&c.split("-")[0]==b.split("-")[0]?!0:!1}var Pa=1,Qa=2;function Oa(a){a=a.toLowerCase().split("-");var b=Ra[a[0]];b&&(a[0]=b);return a.join("-")}
var Ra={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",
fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",
lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",
srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Ta(a){return Object.keys(a).map(function(b){return a[b]})}function z(a,b){return Ua(a,b,"boolean")}function A(a,b,c){a=Ua(a,b,"number");if(null==a)return null;if(isNaN(a)||a==Number.NEGATIVE_INFINITY||a==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(null!=c&&a<c)throw new RangeError("'"+b+"' must be >= "+c);return a}function Va(a,b){return Ua(a,b,"string")}
function Ua(a,b,c){a=a[b];if(null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}function Wa(a,b,c){a=a[b];if(null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a};function B(){this.a={}}B.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};B.prototype.set=function(a,b){this.a[a]=b};B.prototype.get=function(a){return(a=this.a[a])?a.slice():null};function Xa(a){var b=[],c;for(c in a.a)b.push.apply(b,a.a[c]);return b}function Ya(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function Za(a){var b=[],c;for(c in a.a)b.push(c);return b};function $a(){this.a=new B}$a.prototype.destroy=function(){ab(this);this.a=null};function C(a,b,c,d){b=new bb(b,c,d);a.a.push(c,b)}$a.prototype.va=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var f=c[d];f.target==a&&(f.va(),Ya(this.a,b,f))}};function ab(a){for(var b=Xa(a.a),c=0;c<b.length;++c)b[c].va();a.a.a={}}function bb(a,b,c){this.target=a;this.type=b;this.a=c;this.target.addEventListener(b,c,!1)}
bb.prototype.va=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)};function D(a){this.Ba=new B;this.aa=a}p("shaka.util.FakeEventTarget",D);n=D.prototype;n.addEventListener=function(a,b,c){c||this.Ba.push(a,b)};n.removeEventListener=function(a,b,c){c||Ya(this.Ba,a,b)};
n.dispatchEvent=function(a){a.hasOwnProperty("srcElement")||(delete a.srcElement,Object.defineProperty(a,"srcElement",{get:function(){return null}}));if(a.hasOwnProperty("target"))a.target=this;else{delete a.target;var b=this;Object.defineProperty(a,"target",{get:function(){return b},set:function(a){b=a}})}if(a.hasOwnProperty("currentTarget"))a.currentTarget=null;else{delete a.currentTarget;var c=null;Object.defineProperty(a,"currentTarget",{get:function(){return c},set:function(a){c=a}})}return cb(this,
a)};n.Pa=!1;n.ia=function(a,b){return this.dispatchEvent(x({type:"debug/shakaEvent",bubbles:!0,detail:{type:a,event:b}}))};function cb(a,b){b.currentTarget=a;for(var c=a.Ba.get(b.type)||[],d=0;d<c.length;++d){var f=c[d];try{f.handleEvent?f.handleEvent(b):f.call(a,b)}catch(e){}}a.aa&&b.bubbles&&cb(a.aa,b);return b.defaultPrevented};function E(a,b){D.call(this,null);this.a=a;this.b=null;this.g=new $a;this.h=null;this.B=0;this.v=null;this.i=!1;this.I=!0;this.F=!1;this.G=!0;this.l=!1;this.c={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new ja};this.f=b;this.j=null;this.s=1;this.D=null;this.u=!1}q(E,D);p("shaka.player.Player",E);E.version="v1.6.4-fb";
E.isBrowserSupported=function(){return!!window.MediaSource&&!!window.Uint8Array};
E.prototype.ca=function(){var a={},b=this.b;if(b){var c=b.$a();a.BandwidthEstimator=c.BandwidthEstimator;var d=c.VideoSourceStream;d&&(a.VideoSourceStream=d,(d=a.VideoBufferManager=d.ca().SourceBufferManager)&&(a.VideoSourceBuffer=d.ca().SourceBuffer));(d=a.AudioSourceStream=c.AudioSourceStream)&&(d=a.AudioBufferManager=d.ca().SourceBufferManager)&&(a.AudioSourceBuffer=d.ca().SourceBuffer);a.TextSourceStream=c.TextSourceStream;a.getManifest=b.Ya.bind(b)}else a.getManifest=function(){};a.Zb=!0;return a};
E.prototype.getDebug=E.prototype.ca;E.prototype.V=function(a){this.I=a};E.prototype.setResumeAfterBuffering=E.prototype.V;function db(a){return"text/vtt"==a?!!window.VTTCue:MediaSource.isTypeSupported(a)}E.isTypeSupported=db;E.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b));for(b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+pa(a)+" }",0)};
E.prototype.destroy=function(){return this.C().then(F(this,function(){this.g.destroy();this.a=this.g=null})).catch(function(){})};E.prototype.destroy=E.prototype.destroy;E.prototype.C=function(){this.l=!0;return eb(this)};E.prototype.unload=E.prototype.C;
function eb(a){var b;a.f&&(b=a.f.getOperationLogger("unload"));if(!a.b)return b&&b.log(),Promise.resolve();a.i&&fb(a);a.a.pause();ab(a.g);gb(a);hb(a);a.a.src="";var c=a.a.setMediaKeys(null).then(function(){b&&b.log()});a.b&&(a.b.destroy(),a.b=null);a.i=!1;return c}E.prototype.pa=function(a){return ib(this,a)};E.prototype.load=E.prototype.pa;
function ib(a,b){var c;a.f&&(c=a.f.getOperationLogger("load").setState("loading"));jb(b,a.a);var d=null;a.l=!1;if(a.b||!a.F)d=eb(a).then(F(a,function(){return b.ya()}));a.a.autoplay&&(da("load"),C(a.g,a.a,"timeupdate",a.Ab.bind(a)));b.mb(a.c);b.T=a.D;a.D=null;d||(d=b.ya());d.catch(F(a,function(a){b.destroy();return Promise.reject(a)}));return d.then(F(a,function(){if(!this.a||this.l)return kb();this.b=b;C(this.g,this.b,"seekrangechanged",this.Fb.bind(this));var a=new B,c;c=this.b;if(c.D){c=c.a.a[0];
for(var d=[],h=0;h<c.a.length;++h)d.push.apply(d,lb(c.a[h]));c=d}else c=[];for(d=0;d<c.length;d++)a.push(c[d].contentType,c[d]);c=this.b;if(c.D){for(var d={},k=c.a.a[0],h=0;h<k.a.length;++h){var l=k.a[h];d[l.H]=l}c.f.a={};k=Za(a);for(h=0;h<k.length;++h){var l=k[h],m=a.get(l);if("video"==l){var t=m[0].id;c.f.push(l,d[t])}else if("audio"==l)for(var t=m[0].a.split(";")[0],w=0;w<m.length;++w){var I=m[w];I.a.split(";")[0]==t&&c.f.push(l,d[I.id])}else for(w=0;w<m.length;++w)t=m[w].id,c.f.push(l,d[t])}c.Y=
!0;if(a=c.f.get("audio"))mb(c,a),c.f.set("audio",a),a=a[0].lang||c.B,Na(2,c.B,a)&&(c.Y=!1);if(a=c.f.get("text"))mb(c,a),c.f.set("text",a),a=a[0].lang||c.B,Na(2,c.B,a)||(c.Y=!1)}C(this.g,this.a,"error",this.Ob.bind(this));C(this.g,this.a,"playing",this.Eb.bind(this));C(this.g,this.a,"pause",this.Db.bind(this));return nb(this.b,this,this.a)})).then(F(a,function(){if(!this.a||this.l)return kb();qb(this);c&&c.updateState("ready").log()})).catch(F(a,function(a){c&&c.setError(JSON.stringify(a)).log();if(!this.a||
this.l)return kb();if("destroy"!=a.type){var b=y(a);this.dispatchEvent(b)}return this.C().then(function(){return Promise.reject(a)})}))}function kb(){var a=Error("Player destroyed");a.type="destroy";return Promise.reject(a)}n=E.prototype;n.Ab=function(){ha("load");this.g.va(this.a,"timeupdate")};n.Ob=function(){if(this.a.error){var a=this.a.error.code;a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(rb[a]||"Unknown playback error."),a.type="playback",a=y(a),this.dispatchEvent(a))}};
n.Eb=function(){da("playing");this.f&&this.f.getEventLogger("playing").setState("playing").log();!this.h&&0>this.s&&(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),this.s));this.i&&!this.G&&fb(this)};n.Db=function(){this.f&&this.f.getEventLogger("pause").setState("paused").log();ha("playing");hb(this)};n.Fb=function(a){this.B=a.start};n.Nb=function(){return this.b?this.b.P():[]};E.prototype.getVideoTracks=E.prototype.Nb;E.prototype.Y=function(){return this.b?this.b.Ga():[]};
E.prototype.getAudioTracks=E.prototype.Y;E.prototype.oa=function(){return this.b?this.b.nb():[]};E.prototype.getTextTracks=E.prototype.oa;E.prototype.selectVideoTrack=function(a,b){return this.b?this.b.selectVideoTrack(a,void 0==b?!0:b):!1};E.prototype.selectVideoTrack=E.prototype.selectVideoTrack;E.prototype.qa=function(a,b,c){return this.b?sb(this.b,"audio",a,void 0==b?!0:b,c):!1};E.prototype.selectAudioTrack=E.prototype.qa;E.prototype.ra=function(a){return this.b?sb(this.b,"text",a,!1):!1};
E.prototype.selectTextTrack=E.prototype.ra;E.prototype.X=function(a){this.b&&tb(this.b,a)};E.prototype.enableTextTrack=E.prototype.X;E.prototype.U=function(a){hb(this);0<=a?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.A(this.a.currentTime,Date.now(),a));this.s=a};E.prototype.setPlaybackRate=E.prototype.U;E.prototype.P=function(){return this.s};E.prototype.getPlaybackRate=E.prototype.P;E.prototype.sa=function(a){this.D=a};E.prototype.setPlaybackStartTime=E.prototype.sa;
E.prototype.M=function(){return this.b?!!this.b.pb():!1};E.prototype.isLive=E.prototype.M;
E.prototype.W=function(a){if(a){var b=z(a,"enableAdaptation");null!=b&&(this.c.enableAdaptation=b);b=z(a,"allowSkipUnloading");null!=b&&(this.F=b);b=z(a,"endBufferingOnPlaying");null!=b&&(this.G=b);b=z(a,"usePlaybackRateForBuffering");null!=b&&(this.u=b);b=A(a,"streamBufferSize",0);null!=b&&(this.c.streamBufferSize=b);b=A(a,"dynamicStreamBufferSize",0);null!=b&&(this.c.dynamicStreamBufferSize=b);b=z(a,"addCdnDebugQueryParameters");null!=b&&(this.c.addCdnDebugQueryParameters=b);b=A(a,"initialStreamBufferSize",
0);null!=b&&(this.c.initialStreamBufferSize=b);b=z(a,"includeStreamBufferSizeInStartOffset");null!=b&&(this.c.includeStreamBufferSizeInStartOffset=b);b=A(a,"liveStreamEndTimeout",0);null!=b&&(this.c.liveStreamEndTimeout=b);b=A(a,"licenseRequestTimeout",0);null!=b&&(this.c.licenseRequestTimeout=b);b=A(a,"mpdRequestTimeout",0);null!=b&&(this.c.mpdRequestTimeout=b);b=A(a,"minMpdRefreshInterval",0);null!=b&&(this.c.minMpdRefreshInterval=b);b=z(a,"enableLiveInterruptionDetection");null!=b&&(this.c.enableLiveInterruptionDetection=
b);b=z(a,"enableManifestDebug");null!=b&&(this.c.enableManifestDebug=b,D.prototype.Pa=b,b||(D.prototype.ia=function(){}));b=z(a,"resolveVideoTimeUpdateOnFragmentedTimeRanges");null!=b&&(this.c.resolveVideoTimeUpdateOnFragmentedTimeRanges=b);b=A(a,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=b&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=b);b=A(a,"liveInterruptionConsecutiveUpdatesWithChange");null!=b&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=b);b=z(a,"reappendInitSegmentAfterAbort");
null!=b&&(this.c.reappendInitSegmentAfterAbort=b);b=z(a,"liveSendPushHeaders");null!=b&&(this.c.liveSendPushHeaders=b);b=A(a,"liveMaxManifestFetchesWithPush");null!=b&&(this.c.liveMaxManifestFetchesWithPush=b);b=A(a,"liveMaxSegmentsToPush");null!=b&&(this.c.liveMaxSegmentsToPush=b);b=A(a,"segmentRequestTimeout",0);null!=b&&(this.c.segmentRequestTimeout=b);b=Va(a,"preferredLanguage");null!=b&&(this.c.preferredLanguage=b);b=Wa(a,"restrictions",ja);null!=b&&(this.c.restrictions=b.clone());this.c.performanceLogger=
this.f;b=a.liveInitialPushRepresentation;null!=b&&(this.c.liveInitialPushRepresentation=b);b=a.liveAudioPushRepresentation;null!=b&&(this.c.liveAudioPushRepresentation=b);b=a.useInlineInitSegment;null!=b&&(this.c.useInlineInitSegment=b);b=z(a,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=b&&(ub=!b);a=z(a,"currentTimeDuringReadyStateZeroThrows");null!=a&&(this.c.currentTimeDuringReadyStateZeroThrows=a);this.b&&this.b.mb(this.c)}};E.prototype.configure=E.prototype.W;
E.prototype.da=function(){return this.c};E.prototype.getConfiguration=E.prototype.da;function hb(a){a.h&&(clearTimeout(a.h),a.h=null)}function qb(a){gb(a);a.v=setTimeout(a.T.bind(a),100)}function gb(a){a.v&&(clearTimeout(a.v),a.v=null)}E.prototype.A=function(a,b,c){this.h=null;var d=(Date.now()-b)/1E3*c;this.a.currentTime<this.B+(this.M()?1:.05)?this.a.pause():(d=Math.max(this.B,a+d),this.a.currentTime=d,this.h=setTimeout(this.A.bind(this,a,b,c),250))};
function fb(a){ha("buffering");a.j&&(a.j.log(),a.j=null);a.u&&(a.a.playbackRate=a.s);a.i=!1;a.dispatchEvent(x({type:"bufferingEnd"}))}
E.prototype.T=function(){qb(this);if(!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=Math.max(b-this.a.currentTime,0),c=this.a.currentTime,d=this.a.duration,d=isNaN(d)?0:Math.max(d-.05,0),b=b>=d||c>=d;if(!this.i)!this.a.paused&&!b&&.5>a&&(this.i=!0,this.u?this.a.playbackRate=0:this.a.pause(),this.f&&!this.j&&(a=this.a.buffered,a=a.length?a.end(a.length-1):0,a=Math.max(a-this.a.currentTime,0),this.j=this.f.getOperationLogger("buffering").setLength(vb(this.b)-
a)),da("buffering"),this.dispatchEvent(x({type:"bufferingStart"}))),wb(this.b)&&fb(this);else if(a>vb(this.b)||wb(this.b))fb(this),this.I&&!this.u&&this.a.play()}};var rb={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function G(a){D.call(this,null);this.a=new La(3);this.h=new La(10);this.f=a||5E5;this.g=0}q(G,D);p("shaka.util.EWMABandwidthEstimator",G);G.prototype.sample=function(a,b){if(!(65536>b)){a=Math.max(a,50);var c=8E3*b/a,d=a/1E3;this.a.sample(d,c);this.h.sample(d,c);this.dispatchEvent(x({type:"bandwidth"}));this.g=Date.now()}};G.prototype.getBandwidth=function(){return.5>this.a.a?this.f:Math.min(Ma(this.a),Ma(this.h))};G.prototype.getFastMovingBandwidth=function(){return.5>this.a.a?this.f:Ma(this.a)};
G.prototype.getDataAge=function(){return(Date.now()-this.g)/1E3};G.prototype.supportsCaching=function(){return!1};/*

 Copyright 2015 Facebook Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function xb(a,b,c){G.call(this,c);this.c=a||0;this.b=void 0===b?Infinity:b}q(xb,G);p("shaka.util.EWMACacheBandwidthEstimator",xb);xb.prototype.sample=function(a,b){a<=this.c&&8E3*b/a>this.b||G.prototype.sample.call(this,a,b)};xb.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c};function yb(){G.call(this)}q(yb,G);p("shaka.util.EWMASignedURLBandwidthEstimator",yb);yb.prototype.supportsCaching=function(){return!0};function J(){var a,b,c=new Promise(function(c,f){a=c;b=f});c.resolve=a;c.reject=b;c.destroy=J.prototype.destroy;return c}J.prototype.destroy=function(){this.catch(function(){});var a=Error("Destroyed!");a.type="destroy";this.reject(a)};function zb(){this.za=new J;this.c=!1;this.ba=null;this.a=[];this.b=null}function Ab(a,b){if(a.c)throw Error("Cannot append to a running task!");a.a.push(b)}zb.prototype.start=function(){if(this.c)throw Error("Task already started!");this.c=!0;this.a.unshift(function(){});Bb(this,void 0)};zb.prototype.end=function(){this.a.splice(1)};
function Bb(a,b){var c=a.a[0](b),d;c?(d=c[0],a.b=c[1]):(d=Promise.resolve(),a.b=null);d.then(F(a,function(a){this.ba?(this.a=[],this.b=null,Cb(this)):(this.a.shift(),this.a.length?Bb(this,a):(this.za.resolve(a),this.b=null))})).catch(F(a,function(a){this.a=[];this.b=null;this.ba?Cb(this):this.za.reject(a)}))}
function Cb(a){function b(){var a=Error("Task aborted.");a.type="aborted";this.za.reject(a);setTimeout(function(){this.ba.resolve();this.ba=null}.bind(this),5)}a.f?a.f.then(function(){this.f=null;b.call(this)}.bind(a)):b.call(a)};function F(a,b){return b.bind(a)};function Db(a,b,c,d,f){MediaSource.isTypeSupported(b);D.call(this,d);d=a.addSourceBuffer(b);this.l=a;this.c=d;this.B=c;this.v=new $a;this.g=this.F=null;this.A=!1;this.u=null;this.s=!1;this.I=f;this.b=[];this.C=0;this.j=this.f=this.a=null;this.D=0;this.h=b&&b.charAt(0);C(this.v,this.c,"updateend",this.G.bind(this))}q(Db,D);Db.prototype.ca=function(){return{SourceBuffer:this.c}};function Eb(a,b,c){a.Pa&&a.ia(b,{type:a.h.charAt(0),segment:c,sourceBuffer:a.c})}var Fb=1/60;
Db.prototype.destroy=function(){Gb(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.v.destroy();this.l=this.c=this.v=null};function Hb(a,b){for(var c=a.c.buffered,d=0;d<c.length;++d){var f=c.start(d)-Fb,e=c.end(d)+Fb;if(b>=f&&b<=e)return c.end(d)-b}return 0}function Ib(a,b,c){b=b.endTime?b.endTime-b.startTime:1;var d=new Jb;d.b=3;d.i=1E3*b;d.f=1E3*a.D;d.l=a.F;d.j=c;d.N=a.I;return d}
function Kb(a,b,c,d,f){var e;a.g&&(e=a.g.getOperationLogger("fetch").setResource(b.url.toString()).setLength(Math.round(1E3*(b.endTime-b.startTime))));if(a.a)return a=Error("Cannot fetch ("+a.h+"): previous operation not complete."),a.type="stream",e&&e.setError(a).log(),Promise.reject(a);a.a=new zb;c!=a.c.timestampOffset&&(a.c.timestampOffset=c);c=Ib(a,b,f);var g=Lb(b.url,c,a.B,a.g);Eb(a,"SegmentFetching",b);var h=K.prototype.g.bind(b.url);a.u&&a.s&&(d=a.u);var k=0;d&&(a.u=d,a.s=!1,Ab(a.a,function(){return[d.then(function(a){a.la>
k&&(k=a.la);return Mb(this,a,null)}.bind(this)),this.i.bind(this)]}.bind(a)));Ab(a.a,F(a,function(){return[g.then(function(a){Eb(this,"SegmentFetched",b);a.la>k&&(k=a.la);this.B.getBandwidth();return Mb(this,a,b)}.bind(this)),function(){Eb(this,"SegmentFailed",b);h();return this.i()}.bind(this)]}));var l=0==a.c.buffered.length&&0==a.b.length,m=null;Ab(a.a,function(){if(0==this.c.buffered.length){var a=Error("Failed to buffer segment ("+this.h+").");a.type="stream";return[Promise.reject(a)]}l&&(a=
b.startTime,m=this.c.buffered.start(0)-a);a=Nb(this.b,b.startTime);0<=a?this.b.splice(a+1,0,b):this.b.push(b)}.bind(a));return Ob(a).then(function(){e&&e.log();return Promise.resolve({$:m,wb:k})}.bind(a),function(a){e&&e.setError(a).log();return Promise.reject(a)})}
function Pb(a){if(a.a)return a=Error("Cannot clear ("+a.h+"): previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new zb;Ab(a.a,function(){var a;a:if(0==this.c.buffered.length)a=Promise.resolve();else{try{this.c.remove(0,this.l.duration)}catch(c){a=Promise.reject(c);break a}this.b=[];a=this.f=new J}return[a,this.i.bind(this)]}.bind(a));return Ob(a)}
function Qb(a,b){if(a.a){var c=Error("Cannot clearAfter ("+a.h+"): previous operation not complete.");c.type="stream";return Promise.reject(c)}a.a=new zb;Ab(a.a,function(){return[Rb(this,b),this.i.bind(this)]}.bind(a));return Ob(a)}function Gb(a){a.a?(a=a.a,a.ba?a=a.ba:a.c?(a.b&&(a.f=a.b()),a.ba=new J,a=a.ba):(a.c=!0,a=Promise.resolve())):a=Promise.resolve();return a}
function Sb(a){for(var b=a.currentTime,c=b,d=0;d<a.buffered.length;d++)if(b<=a.buffered.start(d)){c=a.buffered.start(d);break}return c}function Tb(a){for(var b=a.currentTime,c=0;c<a.buffered.length;c++)if(b>=a.buffered.start(c)&&b<=a.buffered.end(c)-.05)return!1;return!0}function Ob(a){a.a.start();return a.a.za.then(F(a,function(){this.a=null})).catch(F(a,function(a){this.a=null;return Promise.reject(a)}))}
function Mb(a,b,c){var d;if(a.g){var f=c?c.url.toString():"init";d=a.g.getOperationLogger("append").setResource(f).setLength(b.byteLength)}try{a.c.appendBuffer(b)}catch(e){return d&&d.setError(e).log(),Promise.reject(e)}a.f=new J;a.j=c;return a.f.then(function(){d&&d.log()},function(a){d&&d.setError(a).log();return Promise.reject(a)})}
function Rb(a,b){if(0==a.c.buffered.length)return Promise.resolve();var c=Nb(a.b,b);if(-1==c||c==a.b.length-1)return Promise.resolve();try{a.c.remove(a.b[c+1].startTime,a.l.duration)}catch(d){return Promise.reject(d)}a.b=a.b.slice(0,c+1);a.f=new J;return a.f}Db.prototype.i=function(){if(this.f){if("open"==this.l.readyState){var a=Error("Previous operation aborted.");a.type="abort";this.f.reject(a);this.c.abort();this.A&&(this.s=!0);this.f=new J}return this.f}return Promise.resolve()};
Db.prototype.G=function(){this.f&&(this.j&&(Eb(this,"SegmentAppended",this.j),this.j=null),this.f.resolve(),this.f=null)};function Ub(a){return String.fromCharCode.apply(null,a)}p("shaka.util.Uint8ArrayUtils.toString",Ub);function Vb(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}p("shaka.util.Uint8ArrayUtils.fromString",Vb);p("shaka.util.Uint8ArrayUtils.toBase64",function(a,b){var c=void 0==b?!0:b,d=window.btoa(Ub(a)).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")});function Wb(a){return Vb(window.atob(a.replace(/-/g,"+").replace(/_/g,"/")))}
p("shaka.util.Uint8ArrayUtils.fromBase64",Wb);p("shaka.util.Uint8ArrayUtils.fromHex",function(a){for(var b=new Uint8Array(a.length/2),c=0;c<a.length;c+=2)b[c/2]=window.parseInt(a.substr(c,2),16);return b});function Xb(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d);b+=d}return b}p("shaka.util.Uint8ArrayUtils.toHex",Xb);function Ia(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};function Yb(){this.g=this.b="";this.l=!1;this.u=this.s=null;this.h=this.f=!1;this.j=this.c="";this.i=null;this.a=[]}function Zb(a,b){var c=a.a.concat(b.map(function(a){return{initData:new Uint8Array(a.initData.buffer),initDataType:a.initDataType}}));a.a=ua(c)}function va(a,b){return a.initDataType==b.initDataType&&Ia(a.initData,b.initData)};function $b(a,b,c,d){this.a=[];d&&this.a.push(d)}p("shaka.player.DrmSchemeInfo",$b);$b.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};$b.PersistentState={OPTIONAL:0,REQUIRED:1};$b.createUnencrypted=function(){return new $b(0,0,0,null)};function ac(a){this.systemIds=[];this.cencKeyIds=[];this.a=[];a=new ya(new DataView(a.buffer));try{for(;Aa(a);){var b=a.a,c=r(a),d=r(a);1==c?c=Da(a):0==c&&(c=a.b.byteLength-b);if(1886614376!=d)u(a,c-(a.a-b));else{var f=Ca(a);if(1<f)u(a,c-(a.a-b));else{u(a,3);var e=Xb(Ea(a)),g=[];if(0<f)for(var h=r(a),k=0;k<h;++k){var l=Xb(Ea(a));g.push(l)}var m=r(a);u(a,m);this.cencKeyIds.push.apply(this.cencKeyIds,g);this.systemIds.push(e);this.a.push({start:b,end:a.a-1});a.a!=b+c&&u(a,c-(a.a-b))}}}}catch(t){}};var bc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function L(a){var b;a instanceof L?(cc(this,a.Z),this.ha=a.ha,this.R=a.R,dc(this,a.ka),this.S=a.S,ec(this,a.a.clone()),this.fa=a.fa):a&&(b=String(a).match(bc))?(cc(this,b[1]||"",!0),this.ha=fc(b[2]||""),this.R=fc(b[3]||"",!0),dc(this,b[4]),this.S=fc(b[5]||"",!0),ec(this,b[6]||"",!0),this.fa=fc(b[7]||"")):this.a=new gc(null)}n=L.prototype;n.Z="";n.ha="";n.R="";n.ka=null;n.S="";n.fa="";
n.toString=function(){var a=[],b=this.Z;b&&a.push(hc(b,ic,!0),":");if(b=this.R){a.push("//");var c=this.ha;c&&a.push(hc(c,ic,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.ka;null!=b&&a.push(":",String(b))}if(b=this.S)this.R&&"/"!=b.charAt(0)&&a.push("/"),a.push(hc(b,"/"==b.charAt(0)?jc:kc,!0));(b=this.a.toString())&&a.push("?",b);(b=this.fa)&&a.push("#",hc(b,mc));return a.join("")};
n.resolve=function(a){var b=this.clone();"data"===b.Z&&(b=new L);var c=!!a.Z;c?cc(b,a.Z):c=!!a.ha;c?b.ha=a.ha:c=!!a.R;c?b.R=a.R:c=null!=a.ka;var d=a.S;if(c)dc(b,a.ka);else if(c=!!a.S){if("/"!=d.charAt(0))if(this.R&&!this.S)d="/"+d;else{var f=b.S.lastIndexOf("/");-1!=f&&(d=b.S.substr(0,f+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var f=0==d.lastIndexOf("/",0),d=d.split("/"),e=[],g=0;g<d.length;){var h=d[g++];"."==h?f&&g==d.length&&e.push(""):".."==h?((1<e.length||
1==e.length&&""!=e[0])&&e.pop(),f&&g==d.length&&e.push("")):(e.push(h),f=!0)}d=e.join("/")}}c?b.S=d:c=""!==a.a.toString();c?ec(b,a.a.clone()):c=!!a.fa;c&&(b.fa=a.fa);return b};n.clone=function(){return new L(this)};function cc(a,b,c){a.Z=c?fc(b,!0):b;a.Z&&(a.Z=a.Z.replace(/:$/,""))}function dc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.ka=b}else a.ka=null}function ec(a,b,c){b instanceof gc?a.a=b:(c||(b=hc(b,nc)),a.a=new gc(b))}
function fc(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function hc(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,oc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ic=/[#\/\?@]/g,kc=/[\#\?:]/g,jc=/[\#\?]/g,nc=/[\#\?@]/g,mc=/#/g;function gc(a){this.b=a||null}gc.prototype.a=null;gc.prototype.c=null;
function M(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),f=0;f<d.length;f++){var e=d[f].indexOf("="),g=null,h=null;0<=e?(g=d[f].substring(0,e),h=d[f].substring(e+1)):g=d[f];g=decodeURIComponent(g.replace(/\+/g," "));h=h||"";M(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null;(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]);d.push(c);a.c++}
gc.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a=[],b;for(b in this.a)for(var c=encodeURIComponent(b),d=this.a[b],f=0;f<d.length;f++){var e=c;""!==d[f]&&(e+="="+encodeURIComponent(d[f]));a.push(e)}return this.b=a.join("&")};gc.prototype.clone=function(){var a=new gc;a.b=this.b;if(this.a){var b={},c;for(c in this.a)b[c]=this.a[c].concat();a.a=b;a.c=this.c}return a};function pc(a,b,c){var d=a.indexOf("<?xml");0<=d&&(a=a.substr(d));a=(new DOMParser).parseFromString(a,"text/xml");if(!a)return null;"string"===typeof b&&(b=[new L(b)]);b=b||[new L("")];c=c||[new L("")];return N({kb:b,o:c},a,qc)}p("shaka.dash.mpd.parseMpd",pc);function qc(){this.id=this.url=null;this.type="static";this.b=this.j=this.o=this.kb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[]}function rc(){this.g=this.f=this.c=this.o=this.a=this.start=this.id=null;this.b=[]}
function sc(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=!1;this.h=this.g=this.f=this.o=null;this.j=[];this.a=[]}function tc(){this.value=null}function uc(){this.contentType=this.lang=this.id=null}function vc(){this.a=this.b=this.g=this.o=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[]}function wc(){this.b=this.a=this.c=this.f=null}
function xc(){this.parsedPssh=this.psshBox=null}function yc(){this.url=null}function zc(){this.url=null}function Ac(){this.o=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null}Ac.prototype.clone=function(){var a=new Ac;a.o=Bc(this.o);a.h=this.h;a.g=this.g;a.a=O(this.a);a.f=O(this.f);a.b=O(this.b);a.c=O(this.c);return a};function Cc(){this.a=this.url=null}Cc.prototype.clone=function(){var a=new Cc;a.url=Bc(this.url);a.a=O(this.a);return a};function Dc(){this.a=this.url=null}
Dc.prototype.clone=function(){var a=new Dc;a.url=Bc(this.url);a.a=O(this.a);return a};function Ec(){this.o=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null}Ec.prototype.clone=function(){var a=new Ec;a.o=Bc(this.o);a.a=this.a;a.g=this.g;a.c=this.c;a.i=this.i;a.h=O(this.h);a.b=Bc(this.b)||[];a.f=O(this.f);return a};function Fc(){this.a=this.b=null}Fc.prototype.clone=function(){var a=new Fc;a.b=Bc(this.b);a.a=O(this.a);return a};
function Gc(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null}Gc.prototype.clone=function(){var a=new Gc;a.a=this.a;a.i=this.i;a.b=this.b;a.j=this.j;a.h=this.h;a.f=this.f;a.g=this.g;a.c=O(this.c);return a};function Hc(){this.a=[]}Hc.prototype.clone=function(){var a=new Hc;a.a=Bc(this.a)||[];return a};function Ic(){this.b=this.a=this.startTime=null}Ic.prototype.clone=function(){var a=new Ic;a.startTime=this.startTime;a.a=this.a;a.b=this.b;return a};
function Jc(a,b){this.ta=a;this.end=b}Jc.prototype.clone=function(){return new Jc(this.ta,this.end)};qc.TAG_NAME="MPD";rc.TAG_NAME="Period";sc.TAG_NAME="AdaptationSet";tc.TAG_NAME="Role";uc.TAG_NAME="ContentComponent";vc.TAG_NAME="Representation";wc.TAG_NAME="ContentProtection";xc.TAG_NAME="cenc:pssh";yc.TAG_NAME="BaseURL";zc.TAG_NAME="Location";Ac.TAG_NAME="SegmentBase";Cc.TAG_NAME="RepresentationIndex";Dc.TAG_NAME="Initialization";Ec.TAG_NAME="SegmentList";Fc.TAG_NAME="SegmentURL";Gc.TAG_NAME="SegmentTemplate";
Hc.TAG_NAME="SegmentTimeline";Ic.TAG_NAME="S";
qc.prototype.parse=function(a,b){this.url=a.kb;this.id=P(b,"id",Q);this.type=P(b,"type",Q)||"static";this.b=P(b,"mediaPresentationDuration",Kc);this.h=P(b,"minBufferTime",Kc,this.h);this.g=P(b,"minimumUpdatePeriod",Kc,this.g);this.c=P(b,"availabilityStartTime",Lc,this.c);this.f=P(b,"timeShiftBufferDepth",Kc,this.f);this.f=null;this.i=P(b,"suggestedPresentationDelay",Kc,this.i);var c=a.o,d=R(this,b,yc);this.o=Mc(c,d);if(d=N(this,b,zc))this.j=Nc(c,d.url);this.a=R(this,b,rc)};
function Oc(a,b,c,d){if(0!==a.a.length){var f=new sc;f.contentType="text";f.lang=c||"en";f.c=!0;c=new vc;c.bandwidth=0;c.f=d||"text/vtt";c.o=[new L(b)];f.a.push(c);a.a[0].b.push(f);Pc(a.a[0])}}rc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.start=P(b,"start",Kc);this.a=P(b,"duration",Kc);var c=R(this,b,yc);this.o=Mc(a.o,c);this.c=N(this,b,Ac);this.f=N(this,b,Ec);this.g=N(this,b,Gc);this.b=R(this,b,sc);Pc(this)};
function Pc(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.group&&(b[d.group]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.group){for(var f=1;1==b[f];)++f;b[f]=!0;d.group=f}}
sc.prototype.parse=function(a,b){var c=N(this,b,uc)||{},d=N(this,b,tc);this.id=P(b,"id",Q);this.group=P(b,"group",S);this.lang=P(b,"lang",Q,c.lang);this.contentType=P(b,"contentType",Q,c.contentType);this.width=P(b,"width",T);this.height=P(b,"height",T);this.b=P(b,"mimeType",Q);this.i=P(b,"codecs",Q);this.c=d&&"main"==d.value;this.lang&&(this.lang=Oa(this.lang));c=R(this,b,yc);this.o=Mc(a.o,c);this.j=R(this,b,wc);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=a.c?Qc(this,
b,a.c):N(this,b,Ac);this.g=a.f?Qc(this,b,a.f):N(this,b,Ec);this.h=a.g?Qc(this,b,a.g):N(this,b,Gc);this.a=R(this,b,vc);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))};tc.prototype.parse=function(a,b){this.value=P(b,"value",Q)};uc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.lang=P(b,"lang",Q);this.contentType=P(b,"contentType",Q);this.lang&&(this.lang=Oa(this.lang))};
vc.prototype.parse=function(a,b){this.id=P(b,"id",Q);this.bandwidth=P(b,"bandwidth",T);this.width=P(b,"width",T,a.width);this.height=P(b,"height",T,a.height);this.f=P(b,"mimeType",Q,a.b);this.h=P(b,"codecs",Q,a.i);this.fbQualityLabel=P(b,"FBQualityLabel",Q);this.fbQualityClass=P(b,"FBQualityClass",Q);this.lang=a.lang;var c=R(this,b,yc);this.o=Mc(a.o,c);this.c=R(this,b,wc);this.g=a.f?Qc(this,b,a.f):N(this,b,Ac);this.b=a.g?Qc(this,b,a.g):N(this,b,Ec);this.a=a.h?Qc(this,b,a.h):N(this,b,Gc);this.c=this.c.concat(a.j)};
wc.prototype.parse=function(a,b){this.f=b;this.c=P(b,"schemeIdUri",Q);var c=P(b,"cenc:default_KID",Q);c&&(this.b=c.replace(/[-]/g,""));this.a=N(this,b,xc)};xc.prototype.parse=function(a,b){var c=Rc(b);if(c){this.psshBox=Wb(c);try{this.parsedPssh=new ac(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d;}}};yc.prototype.parse=function(a,b){this.url=Rc(b)};zc.prototype.parse=function(a,b){this.url=Rc(b)};
Ac.prototype.parse=function(a,b){this.o=a.o||this.o;this.h=P(b,"timescale",T,this.h);this.g=P(b,"presentationTimeOffset",S,this.g);this.a=P(b,"indexRange",Sc,this.a);this.f=P(b,"FBFirstSegmentRange",Sc,this.f);this.b=N(this,b,Cc)||this.b;this.c=N(this,b,Dc)||this.c};Cc.prototype.parse=function(a,b){var c=P(b,"sourceURL",Q);this.url=Nc(a.o,c);this.a=P(b,"range",Sc,O(a.a))};Dc.prototype.parse=function(a,b){var c=P(b,"sourceURL",Q);this.url=Nc(a.o,c);this.a=P(b,"range",Sc)};
Ec.prototype.parse=function(a,b){this.o=a.o||this.o;this.a=P(b,"timescale",T,this.a);this.g=P(b,"presentationTimeOffset",S,this.g);this.c=P(b,"duration",T,this.c);var c=P(b,"startNumber",T);null!=c&&(this.i=c);this.h=N(this,b,Dc)||this.h;this.b=(c=R(this,b,Fc))&&0<c.length?c:this.b;this.f=N(this,b,Hc)||this.f};Fc.prototype.parse=function(a,b){var c=P(b,"media",Q);this.b=Nc(a.o,c);this.a=P(b,"mediaRange",Sc)};
Gc.prototype.parse=function(a,b){this.a=P(b,"timescale",T,this.a);this.i=P(b,"presentationTimeOffset",S,this.i);this.b=P(b,"duration",T,this.b);var c=P(b,"startNumber",S);null!=c&&(this.j=c);this.h=P(b,"media",Q,this.h);this.f=P(b,"index",Q,this.f);this.g=P(b,"initialization",Q,this.g);this.c=N(this,b,Hc)||this.c};Hc.prototype.parse=function(a,b){this.a=R(this,b,Ic)};Ic.prototype.parse=function(a,b){this.startTime=P(b,"t",S);this.a=P(b,"d",S);this.b=P(b,"r",Tc)};
function Mc(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++){var f=b[d].url;null==a||0===a.length?c.push(new L(f)):(f=Nc(a.slice(0,1),f),c.push(f[0]))}return c}function Nc(a,b){if(!b)return a;var c=new L(b);return a?a.map(function(a){return a.resolve(c)}):[c]}function Qc(a,b,c){var d=O(c);(b=Uc(b,c.constructor.TAG_NAME))&&d.parse(a,b);return d}function N(a,b,c){var d=null;if(b=Uc(b,c.TAG_NAME))d=new c,d.parse(a,b);return d}
function Uc(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function R(a,b,c){for(var d=[],f=0;f<b.childNodes.length;f++)if(b.childNodes[f].tagName==c.TAG_NAME){var e=new c;e.parse.call(e,a,b.childNodes[f]);d.push(e)}return d}function Rc(a){a=a.firstChild;return a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function Bc(a){return a?a.map(function(a){return a.clone()}):null}function O(a){return a?a.clone():null}
function P(a,b,c,d){a=c(a.getAttribute(b));return null!=a?a:void 0!==d?d:null}function Lc(a){if(!a)return null;a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function Kc(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return null;a=0;var c=S(b[1]);c&&(a+=31536E3*c);(c=S(b[2]))&&(a+=2592E3*c);(c=S(b[3]))&&(a+=86400*c);(c=S(b[4]))&&(a+=3600*c);(c=S(b[5]))&&(a+=60*c);b=window.parseFloat(b[6]);(b=isNaN(b)?null:b)&&(a+=b);return a}
function Sc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=S(b[1]);if(null==a)return null;b=S(b[2]);return null==b?null:new Jc(a,b)}function Tc(a){a=window.parseInt(a,10);return isNaN(a)?null:a}function T(a){a=window.parseInt(a,10);return 0<a?a:null}function S(a){a=window.parseInt(a,10);return 0<=a?a:null}function Q(a){return a};function Vc(a,b){this.url=a;this.b=b||new Jb;this.g=this.j=this.h=0;this.a=null;this.c=new J;this.f=null}p("shaka.util.AjaxRequest",Vc);function Jb(){this.body=null;this.b=1;this.i=1E3;this.f=0;this.method="GET";this.g="arraybuffer";this.c={};this.h=!1;this.N=this.a=this.l=null;this.j=!1}var ub=!0;function Wc(a){Xc(a);a.b.body=null;a.c.destroy();a.c=null;a.f=null}function Xc(a){a.a&&(a.a.onload=null,a.a.onreadystatechange=null,a.a.onerror=null,a.a.ontimeout=null);a.a=null}
var Yc=/(.*)\.(xx|fna)\.fbcdn\.net/,Zc=/livestream-lookaside\.facebook\.com$/;
Vc.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var a=this.url.split(":")[1].split(";").pop().split(","),b=a.pop(),b="base64"==a.pop()?window.atob(b.replace(/-/g,"+").replace(/_/g,"/")):window.decodeURIComponent(b);"arraybuffer"==this.b.g&&(b=Vb(b).buffer);a=JSON.parse(JSON.stringify(new XMLHttpRequest));a.response=b;a.responseText=b.toString();b=this.c;b.resolve(a);Wc(this);return b}if(0==this.url.lastIndexOf("idb:",0))return this.A();this.h++;this.j=Date.now();
this.g||(this.g=this.b.i);this.a=new XMLHttpRequest;var c=this.url,a=new L(c);ub&&(this.f&&!this.f.supportsCaching()||this.b.h)&&M(a.a,"_",Date.now());c=Yc.test(c);if(null!=this.b.a&&c){var d=this.b.a,f=a.a;M(f,"_nc_p_n",d.h);null!=d.f?M(f,"_nc_p_ts",d.f):null!=d.c&&M(f,"_nc_p_o",d.c);null!=d.b&&null!=d.a&&(M(f,"_nc_p_rid",d.b),M(f,"_nc_p_arid",d.a));d.g&&M(f,"_nc_p_dbg","1")}1==this.b.j&&c&&M(a.a,"_nc_playing",1);c=a.toString();a=Zc.test(a.R);this.a.open(this.b.method,c,!0);this.a.responseType=this.b.g;
this.a.timeout=this.b.f;this.a.withCredentials=a;setEventProperty(this.a,"onload",this.l.bind(this));setEventProperty(this.a,"onreadystatechange",this.s.bind(this));setEventProperty(this.a,"onerror",this.v.bind(this));setEventProperty(this.a,"ontimeout",this.u.bind(this));for(b in this.b.c)this.a.setRequestHeader(b,this.b.c[b]);this.a.send(this.b.body);return this.c};Vc.prototype.send=Vc.prototype.i;
function $c(a,b,c){b=Error(b);b.type=c;b.status=a.a.status;b.url=a.url;b.method=a.b.method;b.body=a.b.body;b.Wb=a.a;return b}Vc.prototype.l=function(a){this.f&&this.f.sample(Date.now()-this.j,a.loaded);a=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),Wc(this)):this.h<this.b.b&&-1===a.indexOf(this.a.status)?ad(this):(a=$c(this,"HTTP error.","net"),this.c.reject(a),Wc(this))};
Vc.prototype.s=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.la=Date.now()-this.j,this.b.a&&this.b.N&&bd(this.b.N,this.a),this.b.h)){var a=Date.parse(this.a.getResponseHeader("Date"));a&&(xa=a-Date.now())}};Vc.prototype.v=function(){var a=$c(this,"Network failure.","net");this.c.reject(a);Wc(this)};Vc.prototype.u=function(){if(this.h<this.b.b)ad(this);else{var a=$c(this,"Request timed out.","net");this.c.reject(a);Wc(this)}};
function ad(a){Xc(a);setTimeout(a.i.bind(a),a.g*(1+.5*(2*Math.random()-1)));a.g*=2}function cd(){this.a=new Map;this.b=!1}function bd(a,b){var c=b.getResponseHeader("X-FB-Debug-Num-Pushed"),d=b.getResponseHeader("X-FB-Debug-List-Pushed");null!=d&&null!=c&&(c=parseInt(c,10),d=d.split(","),c!=d.length&&console.warn("Inconsistent push debug headers.",c,d),c&&(-1<d[0].indexOf("/")&&(a.b=!0),d.forEach(function(a){this.a.set(a,(this.a.get(a)||0)+1)}.bind(a))))}var dd=/\/([^\/]+)$/,ed=/\/([^\/]+\/[^\/]+)$/;
function fd(a,b){var c;c=(new L(b)).S;c=(a.b?ed:dd).exec(c);if(!c)return 0;c=c[1];return a.a.get(c)||0};function K(a,b,c,d){this.b=b;this.h=c||0;this.f=null!=d?d:null;this.c=this.a=null;this.j=a;this.i=null}var gd;p("shaka.util.FailoverUri",K);function hd(a,b){return a&&0!==a.length?a.map(function(a){return a.resolve(b)}):[b]}K.setPrefetchCacheValueGetter=function(a){gd=a};function Lb(a,b,c,d){if(a.a)return a.a;a.a=id(a,0,b||new Jb,c,d);return a.a}
K.prototype.g=function(){if(this.c){this.a=null;var a=this.c;if(a.a&&a.a.readyState!=XMLHttpRequest.DONE){a.a.abort();var b=$c(a,"Request aborted.","aborted");a.c.reject(b);Wc(a)}this.i=this.c=null}};
function id(a,b,c,d,f){var e=a.b[b].toString(),g;if(f){c.a&&(c.a.g=!0);var h=0;c.N&&(h=fd(c.N,e));g=f.getOperationLogger("request").setResource(e).setPushed(h)}if(a.h||a.f)f=a.b[b].R,!f.endsWith("fbcdn.net")||f.startsWith("interncache")||f.endsWith("ak.fbcdn.net")?c.c.Range="bytes="+(a.h+"-"+(null!=a.f?a.f:"")):(e+="&bytestart="+a.h,e+=null!==a.f?"&byteend="+a.f:"");a.j&&(e=a.j(e,c.c)||e);f=null;gd&&(f=gd(e));f||(a.c=new Vc(e,c),d&&(a.c.f=d),f=a.c.i());e=f.then(F(a,function(a){this.i=this.c=this.a=
null;this.i=a.a?new L(a.a):this.b[b];a.response.la=a.la;g&&g.setLength(a.response.byteLength||a.response.length).log();return Promise.resolve(a.response)}));return e=e.catch(F(a,function(a){if(this.a&&b+1<this.b.length)return this.a=id(this,b+1,c,d);this.a=this.c=null;g&&g.setError(a).log();return Promise.reject(a)}))}K.prototype.clone=function(){return new K(this.j,this.b.map(function(a){return a.clone()}),this.h,this.f)};K.prototype.toString=function(){return this.b[0].toString()};function jd(a,b,c,d){this.a=new Jb;this.a.g="text";this.a.b=3;this.a.f=1E3*(null!=b?b:0);c&&(this.a.a=c);d&&(this.a.N=d);this.a.h=!0;this.b=a}function kd(a,b){var c=a.b;return Lb(c,a.a,null,b).then(function(a){a instanceof ArrayBuffer&&(a=String.fromCharCode.apply(null,new Uint8Array(a)));if(a=pc(a,c.b,[c.i]))return Promise.resolve(a);a=Error("MPD parse failure.");a.type="dash";return Promise.reject(a)})}function ld(a){this.h=a;this.b=this.c=this.f=null;this.g=!1;this.a=null};function md(a,b,c,d){for(var f=b.a,e=[],g=0;g<d;++g){var h=g+c,k=(h-1)*f.b,l=k/f.a,m=(k+f.b)/f.a,h=nd(a,b,f.j+h-1,k);if(!h)return null;e.push(new od(l,m,h,k))}return e}function nd(a,b,c,d){if(!b.a)return null;var f=b.a.h;if(!f)return b.o?new K(a,b.o,0,null):null;c=pd(f,b.id,c,b.bandwidth,d);if(!c)return null;b=hd(b.o,c);return new K(a,b,0,null)}
function pd(a,b,c,d,f){var e={RepresentationID:b,Number:c,Bandwidth:d,Time:f};a=a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(a,b,c){if("$$"==a)return"$";var d=e[b];if(null==d)return a;"RepresentationID"==b&&c&&(c=void 0);a=d.toString();c=window.parseInt(c,10)||1;c=Math.max(0,c-a.length);return Array(c+1).join("0")+a});try{return new L(a)}catch(g){if(g instanceof URIError)return null;throw g;}}
function qd(a,b,c){var d=0;c*=b;a=a.a;for(var f=[],e=0;e<a.length&&a[e].a;++e){var g=a[e].startTime,g=null!=g?g:d,h=a[e].b||0;if(0>h)if(h=a[e].a,e+1===a.length)var k=a[0].startTime+c-g,h=Math.ceil(k/h)-1;else h=Math.ceil((a[e+1].startTime-g)/h)-1;if(0<f.length&&g!=d){var k=g-d,l=f[f.length-1];l.debugInfo={endTime:d/b,delta:k/b};l.end=g}for(k=0;k<=h;++k)d=g+a[e].a,f.push({start:g,end:d}),g=d}return f};function rd(a,b){this.a=a;this.b=b||null}rd.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null);this.b=null};rd.prototype.create=function(a,b){var c=null;b&&(c=new Jb,c.N=b);return this.a?Lb(this.a,c,null,a):Promise.resolve(this.b)};function od(a,b,c,d,f){this.startTime=a;this.endTime=b;this.url=c;this.a=null!=d?d:null;this.debugInfo=f||null}function Ad(a,b,c){return new od(b,c,a.url,null!=a.a?a.a:void 0)}function Nb(a,b){for(var c=a.length-1;0<=c;--c){var d=a[c];if(b>=d.startTime&&(null==d.endTime||b<d.endTime))return c}return-1}function Bd(a,b){return a.map(function(a){return Ad(a,a.startTime+b,null!=a.endTime?a.endTime+b:null)})};function Cd(){}
Cd.prototype.parse=function(a,b,c,d,f){var e=null;try{a:{var g=[],h=new ya(a),k=r(h);if(1936286840!=r(h))e=null;else{1==k&&(k=Da(h));var l=Ca(h);u(h,3);u(h,4);var m=r(h);if(0==m)e=null;else{var t,w;0==l?(t=r(h),w=r(h)):(t=Da(h),w=Da(h));u(h,2);var I=h.b.getUint16(h.a,h.c);h.a+=2;a=t;b=b+k+w;for(w=k=0;w<I;w++){var H=r(h);t=(H&2147483648)>>>31;var l=H&2147483647,ea=r(h);r(h);if(1==t){e=null;break a}var ob;ob=0==w&&f?f:new K(d,c,b,b+l-1);t=a/m;var pb=(a+ea)/m;0===w&&(k=t);g.push(new od(t-k,pb-k,ob));
a+=ea;b+=l}e=g}}}}catch(Sa){if(!(Sa instanceof RangeError))throw Sa;}return e};function U(a){this.a=a;this.$=0;this.g=[];this.Oa=!1}U.prototype.aa=function(){return!!this.g[this.g.length-1]};U.prototype.lastPollHadChanges=U.prototype.aa;U.prototype.F=function(){var a=this.g,b=a.lastIndexOf(!0);if(1>b)return 0;a=a.lastIndexOf(!0,b-1);return 0>a?0:b-a-1};U.prototype.getFetchesBetweenRecentChanges=U.prototype.F;U.prototype.C=function(){return Math.floor((this.g.length-1-this.g.lastIndexOf(!0))/2)};U.prototype.getConsecutiveUpdatesWithoutChanges=U.prototype.C;
U.prototype.D=function(){return this.g.length-1-this.g.lastIndexOf(!1)};U.prototype.getConsecutiveUpdatesWithChanges=U.prototype.D;U.prototype.destroy=function(){this.a=null};U.prototype.length=function(){return this.a.length};U.prototype.G=function(){return(this.a||[]).slice()};U.prototype.getSegments=U.prototype.G;function V(a){if(0==a.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.a[0]}
U.prototype.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1]};U.prototype.last=U.prototype.w;n=U.prototype;n.get=function(a){if(0>a||a>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[a]};n.na=function(a){a=Nb(this.a,a);return 0<=a?this.a[a]:null};n.Na=function(a){Dd(this,a);return!0};
function Dd(a,b){a.$!=b.$&&(b=new U(Bd(b.a,a.$-b.$)));if(0==a.length())a.a=b.a.slice(0);else if(0!=b.length()&&null!=a.w().endTime)if(null!=b.w().endTime&&b.w().endTime<a.w().endTime)a.Oa=!0;else{a.Oa=!1;if(a.w().endTime<=V(b).startTime)var c=Ad(a.w(),a.w().startTime,V(b).startTime),c=a.a.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.a.length&&!(a.a[d].endTime>=V(b).startTime);++d);a.a[d].startTime<V(b).startTime?(c=Ad(a.a[d],a.a[d].startTime,V(b).startTime),c=a.a.slice(0,d).concat([c])):(V(a).startTime>
V(b).startTime||V(b),c=a.a.slice(0,d))}a.a=c.concat(b.a)}}n.ma=function(a){var b=a-this.$;if(0==b)return 0;this.a=Bd(this.a,b);this.$=a;return b};n.Ka=function(){return 0<this.length()?{start:V(this).startTime,end:this.w().endTime}:{start:0,end:0}};function W(a,b,c,d){U.call(this,a);this.i=b;this.A=c;this.h=d;this.j=this.i.b||this.i.a.reduce(function(a,b){return null==b.a?NaN:a+b.a},0)||0;this.b=this.u=this.f=null;Ed(this)}q(W,U);W.prototype.destroy=function(){this.A=this.i=null;U.prototype.destroy.call(this)};W.prototype.na=function(a){Fd(this,wa()/1E3);return U.prototype.na.call(this,a)};W.prototype.Na=function(a){if(!(a instanceof W))return!1;Dd(this,a);this.j=Math.max(this.j,a.j);null==this.f?(this.h=a.h,Ed(this)):Gd(this);return!0};
function Ed(a){Gd(a);if(0!=a.length()){a.length();var b=null!=a.w().endTime?a.w().endTime:a.w().startTime;if(a.i.c>a.h)a.f=b;else{var c=a.h-(a.i.c+a.A.start);0>c?a.f=b:c<Math.max(a.w().startTime,a.w().endTime||0)?(a.w(),a.f=b):a.f=c}a.u=a.w().startTime;a.b=V(a).startTime}}W.prototype.ma=function(a){a=U.prototype.ma.call(this,a);Math.min.apply(null,this.a.filter(function(a){return null!=a.endTime}).map(function(a){return a.endTime-a.startTime}));null!=this.f&&(this.u+=a,this.b+=a,this.f+=a);return a};
W.prototype.Ka=function(){return Hd(this,wa()/1E3)};function Hd(a,b){Fd(a,b);if(null==a.f||null==a.u||null==a.b)return{start:0,end:0};var c=Number.POSITIVE_INFINITY;a.j&&(c=a.j);var d=b-a.h,f=a.f+d;null!=a.i.f&&(f=f-a.b-a.i.f,0<f&&(a.b+=f));a.b=Math.min(a.b,c);d=a.u+d;if(d<a.b)return{start:a.b,end:a.b};d=0<a.length()?null!=a.w().endTime?Math.min(d,a.w().endTime):d:a.b;d=Math.max(d,a.b);d=Math.min(d,c);return{start:a.b,end:d}}
function Fd(a,b){Gd(a);if(null!=a.i.f)if(null==a.f)a.length();else{for(var c=a.f+(b-a.h),d=0,f=0;f<a.a.length;++f){var e=null;f<a.a.length-1?e=a.a[f+1].endTime:(e=a.a[f],e=null!=e.endTime?e.endTime+(e.endTime-e.startTime):null);if(null!=e&&e<c-a.i.f)++d;else break}0<d&&a.a.splice(0,d)}}function Gd(a){if(a.j){for(var b=0,c=a.a.length-1;0<=c;--c)if(a.a[c].startTime>a.j)++b;else break;0<b&&a.a.splice(-b)}};function Id(a,b,c,d,f){var e=1,g=0,h;if(a.c>d)h=null;else{var k=a.i||0,l=a.f||0;h=c.a;h=h.b/h.a;var m=d-(a.c+b.start);0>m?h=null:(l=m-2*h-l,0>l&&(l=0),l=Math.ceil(l/h)*h,m-=h,0>m?h=null:(k=Math.floor(m/h)*h-k,0>k&&(k=0),k=Math.floor(k/h)*h,h={Va:l/h+1,current:(k>=l?k:l)/h+1}))}h&&(e=h.Va,g=h.current-h.Va+1);e=md(f,c,e,g);if(null==e)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;W.call(this,e,a,b,d);this.v=c;this.s=this.c=0<this.length()?a.c+b.start+this.w().endTime:null;
this.l=h?h.current+1:null;this.B=f}q(Id,W);Id.prototype.destroy=function(){this.B=this.v=null;W.prototype.destroy.call(this)};Id.prototype.na=function(a){var b=wa()/1E3;Jd(this,b);Fd(this,b);return U.prototype.na.call(this,a)};Id.prototype.Na=function(a){if(null!=this.c||!(a instanceof Id)||null==a.c)return!1;this.c=a.c;this.s=a.s;this.l=a.l;this.h=a.h;this.j=a.j;Dd(this,a);Jd(this,wa()/1E3);Ed(this);return!0};
Id.prototype.ma=function(a){a=W.prototype.ma.call(this,a);null!=this.c&&(this.c+=a,this.s+=a);return a};Id.prototype.Ka=function(){var a=wa()/1E3;Jd(this,a);return Hd(this,a)};function Jd(a,b){if(null!=a.c&&null!=a.s&&null!=a.l){var c=a.v.a,c=c.b/c.a,d=Math.floor((a.s+(b-a.h)-a.c)/c);if(0!=d){var f=md(a.B,a.v,a.l,d);Array.prototype.push.apply(a.a,Bd(f,a.$));a.c+=d*c;a.l+=d}}};function Kd(a,b,c,d,f){this.f=a;this.b=b;this.c=c;this.h=d;this.a=null;this.g=f}Kd.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null)};
Kd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new Id(this.f,this.b,this.c,this.h,this.g)}catch(a){return Promise.reject(a)}else{var b;b=this.c.a;if(b=md(this.g,this.c,1,Math.ceil(this.b.a/(b.b/b.a)))){if(0<b.length){var c=b[b.length-1];b[b.length-1]=Ad(c,c.startTime,this.b.a)}b=new U(b)}else b=null;this.a=b;if(!this.a)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b)}return Promise.resolve(this.a)};function Ld(a,b,c,d,f){this.c=a;this.b=b;this.g=c;this.a=null;this.h=d;this.f=f}Ld.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null)};
Ld.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.g.b,b=[];a.f&&(b=qd(a.f,a.a||1,this.b.a||0));var c=0;a.c&&a.i?c=(a.i-1)*a.c:0<b.length&&(c=b[0].start-(a.g||0));var d=c,f=a.b.length;0<b.length&&b.length!=a.b.length&&(f=Math.min(b.length,a.b.length));for(var e=[],g=0;g<f;++g){var h=a.b[g],k=c/a.a,l=null,m=null,t;a.c?(l=c+a.c,m=l/a.a):0<b.length?(t=b[g].debugInfo,l=b[g].end-(a.g||0),m=l/a.a):(m=k+this.b.a,l=m*a.a);var c=l,l=0,w=null;h.a&&(l=h.a.ta,w=h.a.end);m=Math.min(this.b.a+
d/a.a,m);e.push(new od(k,m,new K(this.f,h.b,l,w),null,t||null))}"dynamic"==this.c.type?this.a=new W(e,this.c,this.b,this.h):this.a=new U(e);return Promise.resolve(this.a)};function Md(a,b,c,d,f){this.b=a;this.c=b;this.f=c;this.h=d;this.a=null;this.g=f}Md.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null)};
Md.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.f.a,b=qd(a.c,a.a||1,this.c.a||0),c=[],d=0;d<b.length;++d){var f=b[d].start,e=b[d].debugInfo,g=f/a.a,h=b[d].end/a.a,k=nd(this.g,this.f,d+a.j,f);if(!k)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);var l=(a.i||0)/a.a;c.push(new od(g-l,h-l,k,f,e||null))}"dynamic"==this.b.type?this.a=new W(c,this.b,this.c,this.h):this.a=new U(c);return Promise.resolve(this.a)};function Nd(){this.H=Od++;this.id=this.O=this.L=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.switchReason=this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.ea=!1;this.K=!0}var Od=0;Nd.prototype.destroy=function(){this.L&&(this.L.destroy(),this.L=null);this.O&&(this.O.destroy(),this.O=null)};function Pd(a){var b=a.a||"";a.c&&(b+='; codecs="'+a.c+'"');return b}
function Qd(){this.H=Rd++;this.id=null;this.contentType=this.lang="";this.b=!1;this.m=[];this.a=[]}var Rd=0;Qd.prototype.destroy=function(){for(var a=0;a<this.m.length;++a)this.m[a].destroy();this.a=this.m=null};function lb(a){for(var b=[],c=0;c<a.a.length;++c){var d=new Sd;d.id=a.H;d.b=a.a[c];d.contentType=a.contentType;d.a=a.m.length?Pd(a.m[0]):"";b.push(d)}return b}function Td(){this.id=null;this.start=0;this.b=null;this.a=[]}
Td.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Ud(){this.b=!1;this.h=this.g=this.f=null;this.c=0;this.a=[];this.i=!1}Ud.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null};function Sd(){this.id=0;this.b=null;this.a=this.contentType=""};function Vd(a,b,c,d,f,e,g){D.call(this,a);this.b=b;this.a=new Db(c,d,f,this,g);this.da=g;this.I={};this.V=0;this.F=this.v=this.c=null;this.P=!1;this.g=this.A=null;this.s=!1;this.D=0;this.C=!1;this.j=null;this.i=!1;this.h=new J;this.l=this.f=!1;this.u=0;this.B=15;this.Y=this.T=!1;this.X=e;this.U=!1;this.W=null;this.G=!1}q(Vd,D);Vd.prototype.ca=function(){return{SourceBufferManager:this.a}};Vd.prototype.getDebug=Vd.prototype.ca;
Vd.prototype.M=function(a){null!=a.initialStreamBufferSize&&(this.u=Number(a.initialStreamBufferSize));null!=a.dynamicStreamBufferSize&&(this.D=Number(a.dynamicStreamBufferSize));null!=a.streamBufferSize&&(this.B=Number(a.streamBufferSize));null!=a.addCdnDebugQueryParameters&&(this.T=Boolean(a.addCdnDebugQueryParameters));null!=a.useInitialBufferSizeWhenPaused&&(this.Y=Boolean(a.useInitialBufferSizeWhenPaused));null!=a.segmentRequestTimeout&&(this.a.D=Number(a.segmentRequestTimeout));null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&
(this.U=Boolean(a.resolveVideoTimeUpdateOnFragmentedTimeRanges));null!=a.performanceLogger&&(this.W=this.I.performanceLogger=a.performanceLogger);null!=a.reappendInitSegmentAfterAbort&&(this.I.reappendInitSegmentAfterAbort=Boolean(a.reappendInitSegmentAfterAbort));a=this.a;var b=this.I;null!=b.reappendInitSegmentAfterAbort&&(a.A=Boolean(b.reappendInitSegmentAfterAbort));null!=b.performanceLogger&&(a.g=b.performanceLogger)};
Vd.prototype.destroy=function(){Wd(this);this.h.destroy();this.c=this.h=null;this.a.destroy();this.aa=this.b=this.a=null};n=Vd.prototype;n.ja=function(){return this.c};n.La=function(){return this.v};n.sb=function(a){this.f||a.then(function(){this.f=!0;this.g||Xd(this,0)}.bind(this)).catch(function(){});return this.h};n.Ma=function(){return this.l};
n.ua=function(a,b,c,d){a!=this.c&&(this.F=a.O.create(this.W,this.da),a.L.create().then(F(this,function(f){if(this.b){var e=this.c;this.c=a;this.v=f;this.P=!0;this.A=d?d:null;this.s||(e?b&&Yd(this,!0,c):Xd(this,0))}})).catch(F(this,function(a){"aborted"!=a.type&&(this.f?(a=y(a),this.dispatchEvent(a)):this.h.reject(a))})))};n.ob=function(){return Yd(this,!1)};n.qb=function(){this.C=!0};
function Yd(a,b,c){a.c&&!a.s&&(a.s=!0,Wd(a),Gb(a.a).then(F(a,function(){var a=this.b.currentTime;if(!b&&0<Hb(this.a,a)&&0<=Nb(this.a.b,a))return Promise.resolve();if(c)return Qb(this.a,this.b.currentTime+c);this.G=!0;return Pb(this.a)})).then(F(a,function(){this.s=!1;Xd(this,0)})).catch(F(a,function(a){this.s=!1;this.f?(a=y(a),this.dispatchEvent(a)):this.h.reject(a)})))}n.rb=function(a){return 0<Hb(this.a,a)&&0<=Nb(this.a.b,a)};n.xa=function(){};n.Ia=function(){return!0};
function Zd(a){var b=a.Y&&a.b.paused?a.u:a.B;a.D&&!a.b.paused&&(b=Math.max(Math.min(a.v.w().endTime-a.b.currentTime,a.D),a.B));return a.i?Math.max(a.u,b):a.u}
n.Jb=function(){if(this.i&&!this.f)this.g=null;else{var a;if(a=this.f&&!this.l)a=1<this.a.c.buffered.length?!0:!1;if(a&&(this.C||Tb(this.b)))this.U&&(this.b.currentTime=Sb(this.b)),this.C=!1,Yd(this,!0);else{this.g=null;a=this.c;var b=this.v,c=this.b.currentTime;if(Hb(this.a,this.i?c:c+(this.j||0))>=Zd(this))$d(this),Xd(this,1E3/(5*(Math.abs(this.b.playbackRate)||1)));else{var d=ae(this,c,b);d?(b=Kb(this.a,d,a.b,this.F,this.T&&!this.b.paused),this.X&&"video"===a.a.split("/")[0]&&this.X(d.startTime,
d.endTime,{id:a.id,reason:this.A}),this.F=null,this.P&&(this.P=!1,d=this.A,this.A=null,be(this,a,d)),this.l=!1,b.then(F(this,function(a){var b=a.$;a=a.wb;this.i||(this.V=a);null==this.j&&(this.j=b);this.G&&0<Hb(this.a,c)&&(this.G=!1,this.b.currentTime+=.001);Xd(this,0)})).catch(F(this,function(a){if("aborted"!=a.type){var b=[0,404,410,502,503,504];"net"==a.type&&-1!=b.indexOf(a.Wb.status)&&this.c&&Xd(this,1E3);a=y(a);this.dispatchEvent(a)}}))):($d(this),this.f&&!this.l&&(this.l=!0,ce(this)),Xd(this,
200))}}}};function ae(a,b,c){a=a.a;var d=a.b.length;a=0<d?a.b[d-1]:null;return null!=a?null!=a.endTime?c.na(a.endTime):null:c.na(b)||(c.length()?c.w():null)}function $d(a){if(!a.i&&null!=a.j){a.i=!0;var b=a.a,c=a.j,d=c-b.C;0!=d&&(b.b=Bd(b.b,d),b.C=c);a.h.resolve(a.j)}}function be(a,b,c){var d=b.a.split("/")[0];b=x({type:"adaptation",bubbles:!0,contentType:d,size:"video"!=d?null:{width:b.width,height:b.height},bandwidth:b.bandwidth,reason:c});a.dispatchEvent(b)}
function ce(a){var b=x({type:"ended"});a.dispatchEvent(b)}function Xd(a,b){a.g=setTimeout(a.Jb.bind(a),b)}function Wd(a){null!=a.g&&(clearTimeout(a.g),a.g=null)}n.Ja=function(){return this.V};function de(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var f=c.a[d],e=f,g=0;g<e.m.length;++g)db(Pd(e.m[g]))||(e.m.splice(g,1),--g);0==f.m.length&&(c.a.splice(d,1),--d)}for(b=0;b<a.length;++b)for(c=a[b],d=0;d<c.a.length;++d)c.a[d].m.sort(ee)}function ee(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return c<d?-1:c>d?1:0};function fe(a){this.a=a}fe.prototype.destroy=function(){this.a.destroy();this.a=null};fe.prototype.update=function(a){var b=ge(a),c=ge(this.a);return Promise.all([b,c]).then(F(this,function(b){var c=b[0];b=b[1];de(this.a.a);a.b&&!this.a.b&&(a.i=!0);a.f=this.a.f;a.g=this.a.g?this.a.g.clone():null;a.c=this.a.c;var e=[];he(a,this.a,c,b,e);de(a.a);return Promise.resolve(e)}))};
function ge(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.m}).reduce(b,[]);a=c.map(function(a){return a.L.create()});return Promise.all(a).then(function(a){for(var b={},e=0;e<c.length;++e)b[c[e].H]=a[e];return Promise.resolve(b)})}
function he(a,b,c,d,f){var e=new B;a.a.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=Za(e);for(b=0;b<a.length;++b){var h=a[b],k=e.get(h);1<k.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(ie(k[0],h[0],c,d,f),k[0].b=h[0].b)}}
function ie(a,b,c,d,f){var e=new B;a.a.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.a.forEach(function(a,b){g.push(a.id||""+b,a)});a=Za(e);for(b=0;b<a.length;++b){var h=a[b],k=e.get(h);1<k.length||(h=g.get(h))&&0!=h.length&&1==h.length&&je(k[0],h[0],c,d,f)}}
function je(a,b,c,d,f){var e=new B;a.m.forEach(function(a,b){e.push(a.id||""+b,a)});var g=new B;b.m.forEach(function(a,b){g.push(a.id||""+b,a)});b={};for(var h=Za(e),k=0;k<h.length;++k){var l=h[k];b[l]=l;var m=e.get(l);1<m.length||((l=g.get(l))&&0!=l.length?1==l.length&&(ke(m[0],l[0],c,d),m[0].O=l[0].O,l[0].O=null,m[0].b=l[0].b):(f.push(m[0]),a.m.splice(a.m.indexOf(m[0]),1)))}h=Za(g);for(k=0;k<h.length;++k)l=h[k],b[l]||(b[l]=l,l=g.get(l),a.m.push(l[0]))}
function ke(a,b,c,d){a=c[a.H];d=d[b.H];b=a.length();a.Na(d)&&(d=a.length(),a.g.push(b!==d),50<a.g.length&&a.g.shift())};function le(a){this.b=a;this.a=null}le.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)};le.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new od(0,null,this.b);this.a=new U([a]);return Promise.resolve(this.a)};function me(a,b){D.call(this,a);this.b=b;this.g=!0;this.h=this.f=null;this.c=new J;this.a=null}q(me,D);me.prototype.M=function(){};me.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.aa=this.b=this.f=this.h=this.a=this.c=null};n=me.prototype;n.ja=function(){return this.f};n.La=function(){return this.h};n.sb=function(){return this.c};n.Ma=function(){return!0};
n.ua=function(a){a.L.create().then(F(this,function(b){if(this.b){if(0==b.length())return Promise.reject(Error("No subtitles URL available."));var c=this.f;this.f=a;this.h=b;b=V(b).url.b[0].toString();var d=this.Ia();this.a&&(this.xa(!1),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=b;this.xa(d);b=x({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:a.bandwidth});this.dispatchEvent(b);c||this.c.resolve(0)}}))};n.ob=function(){};
n.qb=function(){};n.rb=function(){return!0};n.xa=function(a){this.g=a;this.a&&(this.a.track.mode=a?"showing":"disabled")};n.Ia=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g};function ne(){}
ne.prototype.parse=function(a,b,c,d){var f=null;try{var e;var g=new Fa(b);if(440786851!=v(g).id)e=null;else{var h=v(g);if(408125543!=h.id)e=null;else{var k=h.a.byteOffset,l;var m=new Fa(h.a);for(b=null;Aa(m.a);){var t=v(m);if(357149030==t.id){b=t;break}}if(b){for(var w=new Fa(b.a),m=1E6;Aa(w.a);){var I=v(w);if(2807729==I.id){m=Ka(I);break}}l=m/1E9}else l=null;e=l?{Lb:k,Qb:l}:null}}if(e){var H=v(new Fa(a));if(475249515!=H.id)f=null;else{var ea=e.Lb,ob=e.Qb;a=[];var pb=new Fa(H.a);for(e=H=-1;Aa(pb.a);){var Sa=
v(pb);if(187==Sa.id){var Ba;var sd=new Fa(Sa.a),td=v(sd);if(179!=td.id)Ba=null;else{var He=Ka(td),ud=v(sd);if(183!=ud.id)Ba=null;else{for(var vd=new Fa(ud.a),k=0;Aa(vd.a);){var wd=v(vd);if(241==wd.id){k=Ka(wd);break}}Ba={Sb:He,Kb:k}}}if(Ba){var xd=ob*Ba.Sb,yd=ea+Ba.Kb;if(0<=H){var lc=new K(d,c,e,yd-1);a.push(new od(H,xd,lc))}H=xd;e=yd}}}0<=H&&(lc=new K(d,c,e,null),a.push(new od(H,null,lc)));f=a}}else f=null}catch(zd){if(!(zd instanceof RangeError))throw zd;}return f};function oe(a,b,c,d,f,e,g,h){this.g=a;this.i=b;this.f=c;this.a=d;this.c=f;this.b=e;this.j=g;this.ga=null;this.h=h}oe.prototype.destroy=function(){this.h=this.i=this.g=null;this.a.g();this.a=null;this.b&&(this.b.g(),this.b=null);this.c&&(this.c.g(),this.c=null);this.ga=null};oe.prototype.vb=function(){return this.ga};
oe.prototype.create=function(){if(this.ga)return this.ga;var a=[Lb(this.a)];"webm"==this.f&&a.push(Lb(this.c));this.b&&Lb(this.b);return this.ga=Promise.all(a).then(F(this,function(a){var c=a[0];a=a[1]||null;var d=null;"mp4"==this.f?(d=new Cd,d=d.parse(new DataView(c),this.a.h,this.a.b,this.h,this.b)):"webm"==this.f&&(d=new ne,d=d.parse(new DataView(c),new DataView(a),this.a.b,this.h));if(!d)return c=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),
c.type="stream",Promise.reject(c);var f;"dynamic"==this.g.type?f=new W(d,this.g,this.i,this.j):f=new U(d);return Promise.resolve(f)}))};function pe(a){this.a=a}
function qe(a,b,c){for(var d=wa()/1E3,f=0;f<b.a.length;++f)for(var e=b.a[f],g=0;g<e.b.length;++g){var h=e.b[g];if("text"!=h.contentType)for(var k=0;k<h.a.length;++k){var l=h.a[k],m=0,m=m+(l.g?1:0),m=m+(l.b?1:0),m=m+(l.a?1:0);0==m?(h.a.splice(k,1),--k):1!=m&&(l.g?(l.b=null,l.a=null):l.b&&(l.a=null))}}re(b);for(f=0;f<b.a.length;++f)for(e=b.a[f],g=0;g<e.b.length;++g){k=h=e.b[g];l=null;for(m=0;m<k.a.length;++m){var t=k.a[m].f||"";l?t!=l&&(k.a.splice(m,1),--m):l=t}0==h.a.length&&(e.b.splice(g,1),--g)}"dynamic"==
b.type&&null==b.c&&(b.c=d);f=new Ud;"dynamic"==b.type&&(f.b=!0,f.f=b.g,f.g=new K(c,b.j||b.url),f.h=b.c);f.c=b.h||5;for(e=0;e<b.a.length;++e){g=b.a[e];if(null==g.start)break;g=se(a,b,g,d,c);f.a.push(g)}return f}
function re(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.b=null);b(a.b)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.b);for(var c=0,d=!0,f=0;f<a.a.length;++f){var e=a.a[f-1],g=a.a[f],h=a.a[f+1]||{start:a.b};!b(g.start)&&e&&b(e.start)&&b(e.a)&&(g.start=e.start+e.a);!b(g.a)&&b(h.start)&&(g.a=h.start-g.start);null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.b)||(f=a.a[a.a.length-1],d?a.b=c:b(f.start)&&b(f.a)?a.b=f.start+f.a:"dynamic"!=a.type&&
(a.b=c))}}function se(a,b,c,d,f){var e=new Td;e.id=c.id;e.start=c.start;e.b=c.a;var g=new B;c.b.forEach(function(a){g.push(a.contentType||"",a)});for(var h=Za(g),k=0;k<h.length;++k){var l=new B;g.get(h[k]).forEach(function(a){l.push(a.group,a)});for(var m=Za(l),t=0;t<m.length;++t){var w=new B;l.get(m[t]).forEach(function(a){w.push(a.lang,a)});for(var I=Za(w),H=0;H<I.length;++H){var ea=w.get(I[H]),ea=te(a,b,c,ea,d,f);e.a.push(ea)}}}return e}
function te(a,b,c,d,f,e){ba(d.every(function(a){return a.group==d[0].group&&(a.lang||"")==(d[0].lang||"")&&(a.contentType||"")==(d[0].contentType||"")}));var g=new Qd,h=d.filter(function(a){return null!=a.id});h.length==d.length&&(g.id=h.map(function(a){return a.id}).sort().reduce(function(a,b){return a+","+b}));g.lang=d[0].lang||"";g.contentType=d[0].contentType||"";g.b=d.some(function(a){return a.c});for(var h={},k=0;k<d.length;++k)for(var l=d[k],m=0;m<l.a.length;++m){var t=l.a[m],w=ue(a,t),I=g.a.slice(0);
ve(w,I);0==I.length&&0<g.a.length||!(t=we(b,c,t,f,e))||(g.m.push(t),g.a=I,h[t.H]=l)}if(g.a.some(function(a){return""==a.b}))return g.m.forEach(function(a){a.ea=!0}),g;a=xe(d);for(k=0;k<g.m.length;++k)t=g.m[k],l=h[t.H],l==a&&(t.ea=!0);return g}function xe(a){for(var b=null,c=null,d=0;d<a.length;++d)for(var f=a[d],e=0;e<f.a.length;++e){var g=f.a[e],g=(g.width||1)*(g.height||1)*(g.bandwidth||1);if(null==b||g<b)b=g,c=f}return c}
function ve(a,b){if(0==b.length)Array.prototype.push.apply(b,a);else for(var c=0;c<b.length;++c){for(var d=!1,f=0;f<a.length;++f){var e=b[c],g=a[f];if(e.b==g.b&&e.g==g.g&&e.l==g.l&&e.f==g.f&&e.h==g.h&&e.c==g.c&&e.j==g.j&&Ia(e.i,g.i)){d=!0;Zb(b[c],a[f].a);break}}d||(b.splice(c,1),--c)}}function ue(a,b){var c=[];if(0==b.c.length)c.push(new Yb);else if(a.a)for(var d=0;d<b.c.length;++d)c.push.apply(c,ye(a,b.c[d]));return c}
function ye(a,b){var c=[];if(2!=a.a.length)return[];var d=a.a(b.c||"",b.f);if(!(d&&d instanceof Array))return[];for(var f=0;f<d.length;++f){var e;var g=d[f];e=new Yb;if(g){var h=Va(g,"keySystem");if(null!=h)e.b=h;else throw Error("'keySystem' cannot be null.");var k=Va(g,"licenseServerUrl");if(null!=k)e.g=k;else if(h)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");h=z(g,"withCredentials");null!=h&&(e.l=h);h=Wa(g,"licensePostProcessor",Function);null!=h&&
(e.s=h);h=Wa(g,"licensePreProcessor",Function);null!=h&&(e.u=h);h=z(g,"distinctiveIdentifierRequired");null!=h&&(e.f=h);h=z(g,"persistentStateRequired");null!=h&&(e.h=h);h=Va(g,"audioRobustness");null!=h&&(e.c=h);h=Va(g,"videoRobustness");null!=h&&(e.j=h);h=Wa(g,"serverCertificate",Uint8Array);null!=h&&(e.i=h);if(h=Wa(g,"initData",Object)){g=Wa(h,"initData",Uint8Array);if(null==g)throw Error("'initData.initData' cannot be null.");h=Va(h,"initDataType");if(null==h)throw Error("'initData.initDataType' cannot be null.");
e.a.push({initData:new Uint8Array(g.buffer),initDataType:h})}}0==e.a.length&&b.a&&b.a.psshBox&&Zb(e,[{initData:b.a.psshBox,initDataType:"cenc"}]);c.push(e)}return c}
function we(a,b,c,d,f){if(!c.o||0===c.o.length)return null;var e=null,g=1,h=0;if(c.g){e=c.f.split("/")[1];if("mp4"!=e&&"webm"!=e)e=null;else{var k=c.g;"webm"!=e||k.c?k.a||k.b&&k.b.a?(g=k.b,g||(g=new Cc,g.url=c.o,g.a=k.a?k.a.clone():null),h=ze(g,f),g=k.c?ze(k.c,f):null,k.f?(k=k.f,k=new K(f,c.o,k.ta,k.end)):k=null,a=new oe(a,b,e,h,g,k,d,f),b=new rd(g),d=new Nd,d.L=a,d.O=b,e=d):e=null:e=null}g=c.g.h;h=c.g.g}else if(c.b)e=c.b,!e.c&&!e.f&&1<e.b.length?e=null:e.c||b.a||e.f||1!=e.b.length?e.f&&0===e.f.a.length?
e=null:(e=e.h?ze(e.h,f):null,a=new Ld(a,b,c,d,f),b=new rd(e),d=new Nd,d.L=a,d.O=b,e=d):e=null,g=c.b.a,h=c.b.g;else if(c.a){a:if(e=c.a,g=0+(e.f?1:0),g+=e.c?1:0,g+=e.b?1:0,0==g?g=!1:(1!=g&&(e.f?(e.c=null,e.b=null):e.c&&(e.b=null)),g=!0),g){g=null;if(e.g&&(g=(e=c.a.g)?Ae(c,e,Dc):null,!g)){e=null;break a}e=g?ze(g,f):null;g=c.a;g.f?(g=c.f.split("/")[1],"mp4"!=g&&"webm"!=g?a=null:"webm"!=g||e?nd(f,c,1,0)?(h=(h=c.a.f)?Ae(c,h,Cc):null)?(h=ze(h,f),a=new oe(a,b,g,h,e,null,d,f)):a=null:a=null:a=null):a=g.h?
g.c?new Md(a,b,c,d,f):g.b?"dynamic"!=a.type&&null==b.a?null:new Kd(a,b,c,d,f):null:null;a?(b=new rd(e),d=new Nd,d.L=a,d.O=b,e=d):e=null}else e=null;g=c.a.a;h=c.a.i}else"text"==c.f.split("/")[0]&&(e=new Nd,e.L=new le(new K(f,c.o)));if(!e)return null;e.id=c.id;h&&(e.b=-1*h/g);e.bandwidth=c.bandwidth;e.width=c.width;e.height=c.height;e.a=c.f||"";e.c=c.h||"";e.fbQualityLabel=c.fbQualityLabel||null;e.fbQualityClass=c.fbQualityClass||null;for(a=0;a<c.c.length;++a)b=c.c[a],b.b&&e.f.push(b.b);return e}
function Ae(a,b,c){b=pd(b,a.id,null,a.bandwidth,null);if(!b)return null;c=new c;c.url=hd(a.o,b);return c}function ze(a,b){var c=a.url,d=0,f=null;a.a&&(d=a.a.ta,f=a.a.end);return new K(b,c,d,f)};function X(){this.a=this.b=null;this.f=new $a;this.c=Number.POSITIVE_INFINITY;this.i=!0;this.g=!1}p("shaka.media.SimpleAbrManager",X);X.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null};X.prototype.initialize=function(a,b){this.b||this.a||(this.b=a,this.a=b)};
X.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4E3,C(this.f,this.b,"bandwidth",this.l.bind(this)),C(this.f,this.a,"adaptation",this.j.bind(this)),C(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)};X.prototype.enable=function(a){this.i=a};X.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var a=Be(this);return a?a.id:null};X.prototype.getInitialSwitchReason=function(){return null};X.prototype.getInitialAudioTrackId=function(){return null};
X.prototype.selectVideoTrack=function(a,b,c){this.g&&this.a.selectVideoTrack(a.id,b,c)};X.prototype.l=function(){Date.now()<this.c||this.h()};X.prototype.h=function(){if(this.i){var a=Be(this);if(a){if(a.active){this.c=Date.now()+3E3;return}this.selectVideoTrack(a,!1)}this.c=Number.POSITIVE_INFINITY}};X.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3E4)};
function Be(a){var b=a.a.P();if(0==b.length)return null;b.sort(ta);var c;a:{c=a.a.Ga();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0;a=a.b.getBandwidth();for(var d=b[0],f=0;f<b.length;++f){var e=b[f],g=f+1<b.length?b[f+1]:{bandwidth:Number.POSITIVE_INFINITY};if(e.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(e.bandwidth+c)/.95&&a<=g&&(d=e,d.active)))break}return d};function Y(a,b,c){D.call(this,null);this.a=a;this.X=b;this.j=new $a;this.h=new MediaSource;this.C=this.c=null;this.Ha=0;this.ab=!1;this.Fa=0;this.J=null;this.Ea=3;this.Ca=this.bb=!1;this.ra=0;this.N=new cd;this.gb=1;this.sa=Infinity;this.Za=this.Wa=!1;this.pa=this.eb=null;this.f=new B;this.l=c;this.l.initialize(b,this);this.D=!1;this.B="en";this.Y=!1;this.v=new J;this.Da=new J;this.i=new ja;this.A=null;this.lb=1;this.b={};this.U=new J;this.qa=0;this.fb=15;this.u=null;this.Qa=this.cb=!1;this.s={};
this.T=this.M=this.G=null;this.g={};this.W=!1;this.ub=null}q(Y,D);p("shaka.player.StreamVideoSource",Y);Y.prototype.$a=function(){return{VideoSourceStream:this.b.video,AudioSourceStream:this.b.audio,TextSourceStream:this.b.text,BandwidthEstimator:this.X}};Y.prototype.getStreamDebug=Y.prototype.$a;
Y.prototype.mb=function(a){null!=a.streamBufferSize&&(this.g.streamBufferSize=a.streamBufferSize);null!=a.initialStreamBufferSize&&(this.g.initialStreamBufferSize=a.initialStreamBufferSize);null!=a.dynamicStreamBufferSize&&(this.g.dynamicStreamBufferSize=a.dynamicStreamBufferSize);null!=a.addCdnDebugQueryParameters&&(this.g.addCdnDebugQueryParameters=a.addCdnDebugQueryParameters);null!=a.segmentRequestTimeout&&(this.g.segmentRequestTimeout=a.segmentRequestTimeout);null!=a.resolveVideoTimeUpdateOnFragmentedTimeRanges&&
(this.g.resolveVideoTimeUpdateOnFragmentedTimeRanges=a.resolveVideoTimeUpdateOnFragmentedTimeRanges);null!=a.reappendInitSegmentAfterAbort&&(this.g.reappendInitSegmentAfterAbort=a.reappendInitSegmentAfterAbort);Ce(this);null!=a.includeStreamBufferSizeInStartOffset&&(this.ab=Boolean(a.includeStreamBufferSizeInStartOffset));null!=a.liveAudioPushRepresentation&&(this.pa=String(a.liveAudioPushRepresentation));null!=a.liveInitialPushRepresentation&&(this.eb=String(a.liveInitialPushRepresentation));null!=
a.enableAdaptation&&this.l.enable(Boolean(a.enableAdaptation));null!=a.mpdRequestTimeout&&(this.Fa=Number(a.mpdRequestTimeout));null!=a.minMpdRefreshInterval&&(this.Ea=Number(a.minMpdRefreshInterval)/1E3);null!=a.enableManifestDebug&&(this.Za=!!a.enableManifestDebug);null!=a.liveStreamEndTimeout&&(this.fb=Number(a.liveStreamEndTimeout));null!=a.preferredLanguage&&(this.B=Oa(String(a.preferredLanguage)));null!=a.liveSendPushHeaders&&(this.Ca=Boolean(a.liveSendPushHeaders));null!=a.performanceLogger&&
(this.J=this.g.performanceLogger=a.performanceLogger);null!=a.liveMaxManifestFetchesWithPush&&(this.ra=Number(a.liveMaxManifestFetchesWithPush));null!=a.currentTimeDuringReadyStateZeroThrows&&(this.Wa=Boolean(a.currentTimeDuringReadyStateZeroThrows));null!=a.liveMaxSegmentsToPush&&(this.sa=Number(a.liveMaxSegmentsToPush));null!=a.restrictions&&(this.i=a.restrictions,this.D&&De(this))};
Y.prototype.destroy=function(){this.v.destroy();this.U.destroy();this.U=this.v=null;this.M&&(clearTimeout(this.M),this.M=null);this.G&&(clearTimeout(this.G),this.G=null);this.s=null;this.j.destroy();this.j=null;Ta(this.b).forEach(function(a){a.destroy()});this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);this.l.destroy();this.aa=this.i=this.c=this.h=this.X=this.l=null};
function jb(a,b){if(a.J){var c=a.J.logOperation("media_source_open");a.Da.then(function(){c.log()})}C(a.j,a.h,"sourceopen",a.Cb.bind(a));b.src=window.URL.createObjectURL(a.h)}n=Y.prototype;n.Xa=function(){};
function nb(a,b,c){var d;a.J&&(d=a.J.getOperationLogger("source_attach"));if(!a.D)return a=Error("Cannot call attach() right now."),a.type="app",d&&d.setError(a).log(),Promise.reject(a);a.aa=b;a.c=c;a.C=null;C(a.j,a.c,"loadedmetadata",a.Bb.bind(a));C(a.j,a.X,"bandwidth",a.Pb.bind(a));a.a.b&&(C(a.j,b,"bufferingStart",a.zb.bind(a)),C(a.j,b,"bufferingEnd",a.yb.bind(a)));Ee(a).then(F(a,function(){this.v&&this.v.resolve();this.Xa()})).catch(F(a,function(a){this.v&&this.v.reject(a)}));return a.v.then(function(){d&&
d.log()})}
n.ya=function(){if(this.D){var a=Error("Cannot call load() right now.");a.type="app";return Promise.reject(a)}if(!this.a||0==this.a.a.length)return a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a);de(this.a.a);if(0==this.a.a.length||0==this.a.a[0].a.length||!this.a.a[0].a.some(function(a){return"video"===a.contentType}))return a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a);this.D=
!0;this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);Ce(this);De(this);return Promise.resolve()};function Fe(a){var b=x({type:"manifestwrapped",bubbles:!0});a.dispatchEvent(b)}
n.jb=function(a){var b;this.J&&(b=this.J.getOperationLogger("update_manifest"));var c=Date.now(),d=this.G=null,f,e;if(this.Ca&&(!this.ra||this.ra>this.gb)){f=Math.floor(Ge(this))+1;f=Math.min(f,this.sa);var g=this.b.video;if(g=g?g.La():null)g=g.w(),null!=g.a&&(e=g.a);if(this.c.paused||this.W)f=0}f&&this.gb++;g=this.a.g;b&&b.setResource(g.toString());(a?this.hb():this.ib(g,f,e)).then(F(this,function(a){d=new fe(a);return d.update(this.a)})).then(F(this,function(a){d.destroy();d=null;var e=Ie(this);
this.ia("SegmentIndexesUpdated",e);e.some(function(a){return a.Oa})&&Fe(this);(e=Je(this,e))&&this.c.paused&&e.end>this.c.currentTime+10&&(this.c.currentTime=e.end);if(wb(this))return b&&b.log(),this.wa();for(e=0;e<a.length;++e)Ke(this,a[e]);this.g.initialStreamBufferSize=Math.max(this.g.initialStreamBufferSize||0,this.a.c);this.g.useInitialBufferSizeWhenPaused=this.a.b;Ce(this);De(this);0==Object.keys(this.b).length?Ee(this):Le(this,(Date.now()-c)/1E3);b&&b.log()})).catch(F(this,function(a){b&&b.setError(a).log();
d&&(d.destroy(),d=null);if("delay"==a.type)return Le(this,0);"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a),this.a&&Le(this,0))}))};n.ib=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};n.hb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")};function Le(a,b){if(null!=a.a.f){var c=Math.max(a.a.f,a.Ea),c=Math.max(c-b,0);a.G=setTimeout(a.jb.bind(a,!1),1E3*c)}}
function Ke(a,b){var c=b.a.split("/")[0],d=a.b[c];if(d&&d.ja()==b){var f=a.f.get(b.a.split("/")[0]).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.ea&&a.K});if(0==f.length){c=Error("All usable streams have been removed from the manifest.");c.type="app";c=y(c);a.dispatchEvent(c);return}a.s[c].tb==b&&delete a.s[c];d.ua(f[0],!0);b.destroy()}b.destroy()}n.Mb=function(a){this.ub=a};Y.prototype.setTaggedTimeRangesEntryAdder=Y.prototype.Mb;
Y.prototype.P=function(){if(!this.f||!this.f.a.hasOwnProperty("video"))return[];for(var a=this.b.video,a=(a=a?a.ja():null)?a.H:0,b=[],c=this.f.get("video"),d=0;d<c.length;++d)for(var f=c[d],e=0;e<f.m.length;++e){var g=f.m[e];if(g.ea&&g.K){var h=g.H,g=new sa(h,g.bandwidth,g.width,g.height,g.id,g.fbQualityLabel,g.fbQualityClass);h==a&&(g.active=!0);b.push(g)}}return b};Y.prototype.getVideoTracks=Y.prototype.P;function Me(a){a=a.P();for(var b=0;b<a.length;b++)if(a[b].active)return a[b]}
Y.prototype.Ga=function(){if(!this.f||!this.f.a.hasOwnProperty("audio"))return[];for(var a=this.b.audio,a=(a=a?a.ja():null)?a.H:0,b=[],c=this.f.get("audio"),d=0;d<c.length;++d)for(var f=c[d],e=f.lang,g=0;g<f.m.length;++g){var h=f.m[g];if(h.ea&&h.K){var k=h.H,h=new ia(k,h.bandwidth,e,h.id);k==a&&(h.active=!0);b.push(h)}}return b};Y.prototype.getAudioTracks=Y.prototype.Ga;
Y.prototype.nb=function(){if(!this.f||!this.f.a.hasOwnProperty("text"))return[];for(var a=this.b.text,b=a?a.ja():null,b=b?b.H:0,c=[],d=this.f.get("text"),f=0;f<d.length;++f)for(var e=d[f],g=e.lang,h=0;h<e.m.length;++h){var k=e.m[h].H,l=new ra(k,g);k==b&&(l.active=!0,l.enabled=a.Ia());c.push(l)}return c};Y.prototype.getTextTracks=Y.prototype.nb;function vb(a){return a.bb?Number(a.g.streamBufferSize):Number(a.g.initialStreamBufferSize)}
Y.prototype.selectVideoTrack=function(a,b,c,d){return sb(this,"video",a,b,c,d)};function tb(a,b){var c=a.b.text;c&&c.xa(b)}
function De(a){if(a.i){for(var b=!1,c=0;c<a.a.a.length;++c)for(var d=a.a.a[c],f=0;f<d.a.length;++f){var e=d.a[f];if("video"==e.contentType)for(var g=0;g<e.m.length;++g){var h=e.m[g],k=h.K;h.K=!0;a.i.maxWidth&&h.width>a.i.maxWidth&&(h.K=!1);a.i.maxHeight&&h.height>a.i.maxHeight&&(h.K=!1);a.i.minHeight&&h.height<a.i.minHeight&&(h.K=!1);a.i.maxBandwidth&&h.bandwidth>a.i.maxBandwidth&&(h.K=!1);a.i.minBandwidth&&h.bandwidth<a.i.minBandwidth&&(h.K=!1);k!=h.K&&(b=!0)}}0!=Xa(a.f).length&&b&&(b=x({type:"trackschanged",
bubbles:!0}),a.dispatchEvent(b),0<a.P().length||(b=Error("The application has restricted all video tracks!"),b.type="app",b=y(b),a.dispatchEvent(b)))}}Y.prototype.pb=function(){return this.a?this.a.b:null};Y.prototype.isLive=Y.prototype.pb;Y.prototype.Tb=function(a){this.bb=a};Y.prototype.setIsLiveInterrupted=Y.prototype.Tb;Y.prototype.Xb=function(){for(var a in this.b)this.b[a].qb()};Y.prototype.forceResyncVideoBuffer=Y.prototype.Xb;
function sb(a,b,c,d,f,e){if(!a.f.a.hasOwnProperty(b)||!a.b[b])return!1;for(var g=a.f.get(b),h=0;h<g.length;++h)for(var k=g[h],l=0;l<k.m.length;++l){var m=k.m[l];if(m.H==c){if(!m.ea||!m.K)return!1;if("text"!=b&&!a.Qa)return c=a.s[b],a.s[b]={tb:m,Ra:null!=c&&c.Ra||d,Sa:null!=c&&c.Sa||f,switchReason:e},!0;a.b[b].ua(m,d,f,e);return!0}}return!1}
function mb(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var f=b[d];if(Na(c,a.B,f.lang)){b.splice(d,1);b.splice(0,0,f);return}}for(d=0;d<b.length;++d)if(f=b[d],f.b){b.splice(d,1);b.splice(0,0,f);break}}n=Y.prototype;n.Cb=function(){this.j.va(this.h,"sourceopen");this.Da.resolve()};
function Ee(a){var b;a.J&&(b=a.J.getOperationLogger("start_streams"));for(var c=[],d=["audio","video","text"],f=0;f<d.length;++f){var e=d[f];a.f.a.hasOwnProperty(e)&&c.push(a.f.get(e)[0])}for(var g=Ne(a,c),f=0;f<d.length;++f)if(e=d[f],a.f.a.hasOwnProperty(e)&&!g[e])return a=Error("Unable to select an initial "+e+" stream: all "+e+" streams have been restricted (by the application or by the key system)."),a.type="stream",b&&b.setError(a).log(),Promise.reject(a);c=Ta(g).map(function(a){return a.L.create()});
c.push(a.Da);return Promise.all(c).then(F(a,function(a){a.pop();if(!a.every(function(a){return a.length()}))return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);a=Je(this,a);if(!a)return a=Error("Some streams are not available."),a.type="stream",Promise.reject(a);if(!Oe(this,g))return a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a);this.l.start();Pe(this,g,a);return Promise.resolve()})).then(function(){b&&b.log()}).catch(F(a,function(a){if("aborted"==
a.type)b&&b.setError(a).log();else{Object.keys(this.b);if(this.a.b)return wa()<this.a.h?(a=Math.max(this.a.h-Date.now()/1E3,this.Ea),this.G=setTimeout(this.jb.bind(this,!0),1E3*a)):Le(this,0),b&&b.log(),Promise.resolve();b&&b.setError(a).log();return Promise.reject(a)}}))}
function Ne(a,b){for(var c={},d=0;d<b.length;++d){var f=b[d],e=null;if("video"==f.contentType){var g=a.l.getInitialVideoTrackId();if(null==g)continue;e=f.m.filter(function(a){return a.H==g});if(0==e.length)continue;e=e[0]}else if("audio"==f.contentType)if(g=a.l.getInitialAudioTrackId(),e=f.m.filter(function(a){return a.H==g}),0==e.length){e=f.m.filter(function(a){return a.ea&&a.K});if(0==e.length)continue;e=f.m[Math.floor(e.length/2)]}else e=e[0];else 0<f.m.length&&(e=f.m[0]);c[f.contentType]=e}return c}
function Oe(a,b){var c={},d;for(d in b){var f=b[d],f="text"==d?new me(a,a.c):Qe(a,f);if(!f)return Ta(c).forEach(function(a){a.destroy()}),!1;c[d]=f}a.b=c;return!0}function Qe(a,b){var c=new Vd(a,a.c,a.h,Pd(b),a.X,a.ub,a.N);c.M(a.g);return c}function Re(a,b){a.c.currentTime=b;a.A=b}
function Pe(a,b,c){a.lb=a.c.playbackRate;a.c.playbackRate=0;Se(a,c);var d;a.T&&a.T<=c.end&&a.T>=c.start?d=a.T:a.a.b?(d=c.end,a.cb=!0):d=c.start;C(a.j,a.c,"seeking",a.Gb.bind(a));if(a.c.currentTime!=d)if(a.Wa)0!==a.c.readyState?Re(a,d):a.C=d;else try{Re(a,d)}catch(f){a.C=d}Te(a,c.start,c.end);var e=[],g;for(g in a.b){c=a.b[g];F(a,function(a){e.push(a.sb(this.U).then(F(this,function(b){var c=a.Ja();c>this.Ha&&(this.Ha=c);return b})))})(c);C(a.j,c,"ended",a.Hb.bind(a));d=b[g];var h=a.l.getInitialSwitchReason()||
void 0;c.ua(d,!1,void 0,h)}Promise.all(e).then(a.xb.bind(a)).catch(F(a,function(a){"destroy"!=a.type&&(a=y(a),this.dispatchEvent(a))}));tb(a,a.Y)}
n.xb=function(a){ba(a&&a.length==Object.keys(this.b).length);for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=0;d<a.length;++d)var f=a[d],b=Math.min(b,f),c=Math.max(c,f);a=Ie(this);for(d=0;d<a.length;++d)a[d].ma(c);Ue(this,a,c);var e=Ta(this.b).map(function(a){return a.ja().id}),d=Xa(this.f).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return!~e.indexOf(a.id)}).map(function(a){var b=[a.L.create()];a.O&&b.push(a.O.create(this.J,this.N));
return Promise.all(b)});Promise.all(d).then(F(this,function(a){for(var b=0;b<a.length;++b)a[b][0].ma(c);this.Qa=!0;for(var d in this.s)a=this.s[d],this.b[d].ua(a.tb,a.Ra,a.Sa,a.switchReason);this.s={}})).catch(F(this,function(a){"aborted"!=a.type&&(a=y(a),this.dispatchEvent(a))}))};function Ue(a,b,c){if(b=Je(a,b))Se(a,b),Te(a,b.start,b.end);0!=c?(c=a.c.currentTime+c,a.c.currentTime=c,a.A=c):a.cb&&b&&(a.c.currentTime=b.end);a.c.playbackRate=a.lb;a.a.b&&null!=a.a.f&&Le(a,0);Ve(a);a.U.resolve()}
function Se(a,b){if(a.a.b)isNaN(a.h.duration)&&(a.h.duration=b.end+2592E3);else if(isNaN(a.h.duration)||b.end>a.h.duration){a.h.duration=b.end;for(var c=0;c<a.h.sourceBuffers.length;++c)a.h.sourceBuffers[c].appendWindowEnd=b.end}}n.Ib=function(){this.M=null;Ve(this);var a=Je(this,Ie(this));a&&(this.a.b&&this.qa!=a.w&&(this.qa=a.w,null!=this.u&&(clearTimeout(this.u),this.u=null)),Te(this,a.start,a.end),this.c.paused||We(this,this.c.currentTime,a.start,a.end))};
function Te(a,b,c){b=x({type:"seekrangechanged",bubbles:!0,start:b,end:c});a.dispatchEvent(b)}n.Gb=function(){var a=this.c.currentTime;if(null!=this.A){if(a>=this.A-.01&&a<=this.A+.01){this.A=null;return}this.A=null}var b=Je(this,Ie(this));if(b){var c=b.end;(b=We(this,a,b.start,c))||(a<=c+.01||this.a.b&&!Xe(this,c)?b=!1:(this.c.currentTime=c,b=!0));if(!b)for(var d in this.b)this.b[d].ob()}};
function We(a,b,c,d){if(b>=c-.01)return!1;b=0;a.a.b&&(b=.5,Xe(a,c+b)||(b=a.a.c));a.c.currentTime=Math.min(c+b,d);return!0}function Xe(a,b){for(var c in a.b)if(!a.b[c].rb(b))return!1;return!0}n.Hb=function(){if(!this.a.b){for(var a in this.b)if(!this.b[a].Ma())return;this.wa()}};function wb(a){return a.a.i&&a.c.currentTime+.5>a.qa?!0:!1}n.zb=function(){this.W=!0;if(wb(this))return this.wa();Ta(this.b).every(function(a){return a.Ma()})&&(this.u=setTimeout(this.wa.bind(this),1E3*this.fb))};
n.yb=function(){this.W=!1;null!=this.u&&(clearTimeout(this.u),this.u=null)};n.Bb=function(){null!==this.C&&(Re(this,this.C),this.C=null)};n.Pb=function(){};n.wa=function(){this.W=!1;this.u=null;this.h.endOfStream()};function Ie(a){return Ta(a.b).map(function(a){return a.La()}).filter(function(a){return null!=a})}function Ge(a){return Math.max(a.a?a.a.c:1,a.ab?a.g.streamBufferSize||0:0)}
function Je(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,e=0;e<b.length;++e){var g=b[e].Ka(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end));b[e].length()&&(f=Math.min(f,b[e].w().endTime))}if(d==Number.POSITIVE_INFINITY)if(d=a.a.a[0],d.b)d=(d.start||0)+d.b;else return null;a.a.b&&(e=Ge(a),d=Math.max(d-e,c));if(c>d)return null;d=Math.floor(1E5*d)/1E5;return{start:c,end:d,w:f}}function Ve(a){a.a.b&&(a.M=setTimeout(a.Ib.bind(a),1E3))}
function Ce(a){for(var b in a.b)a.b[b].M(a.g)}n.Ja=function(){return this.Ha};Y.prototype.getLongestInitResponseTime=Y.prototype.Ja;function Z(a,b,c,d){c||(c=new G);d||(d=new X);Y.call(this,null,c,d);"string"===typeof a?this.Rb=a:this.Aa=a;this.I=null;this.V=b;this.da=[];this.Ta=[];this.Ua=[];this.oa=0;this.F=null}q(Z,Y);p("shaka.player.DashVideoSource",Z);Z.prototype.Ya=function(){return this.Aa||this.I};Z.prototype.debugGetManifest=Z.prototype.Ya;Z.prototype.Ub=function(a,b,c){this.da.push(a);this.Ta.push(b||"");this.Ua.push(c||"")};Z.prototype.addExternalCaptions=Z.prototype.Ub;Z.prototype.Vb=function(a){this.F=a};
Z.prototype.setNetworkCallback=Z.prototype.Vb;Z.prototype.destroy=function(){this.I=this.F=this.V=null;Y.prototype.destroy.call(this)};
Z.prototype.ya=function(){var a;this.J&&(a=this.J.getOperationLogger("source_load"));var b,c=F(this,function(c){this.ia("MPDFetchDuration",(Date.now()-b)/1E3);this.I=c;for(var d=0;d<this.da.length;d++)Oc(c,this.da[d],this.Ta[d],this.Ua[d]);this.a=qe(new pe(this.V),c,this.F);return Y.prototype.ya.call(this).then(function(){a&&a.log()})});if(this.Aa)return b=Date.now(),c(this.Aa);var d=[new L(this.Rb)],f;this.Ca&&(f=Math.floor(Ge(this))+1,f=Math.min(f,this.sa),f=new ld(f),f.c=Math.floor(Ge(this)+1),
f.b=this.eb,f.a=this.pa);d=new K(this.F,d);d=new jd(d,this.Fa,f,this.N);b=Date.now();return kd(d,this.J).then(c)};Z.prototype.Xa=function(){if(this.Za){var a=this.a;if(a=(a=a&&a.a)&&a[0])a=a.a.reduce(function(a,c){return a.concat(c.m)},[]),Promise.all(a.map(function(a){a=a.L;return a.vb?a.ga:a.create()})).then(function(a){a=a.filter(function(a){return null!=a});this.ia("InitialSegmentIndexes",a)}.bind(this))}};
Z.prototype.ib=function(a,b,c){if(this.c.paused&&this.oa+1E4>Date.now()&&this.a)return Promise.reject({type:"delay"});var d;b&&void 0!=c&&(d=new ld(b),d.f=c,b=Me(this),null!=b&&(d.b=b.streamInfoID,d.a=this.pa));a=new jd(a,this.Fa,d,this.N);var f=Date.now();return kd(a,this.J).then(F(this,function(a){this.oa=Date.now();this.ia("MPDFetchDuration",(this.oa-f)/1E3);this.I=a;a=qe(new pe(this.V),a,this.F);return Promise.resolve(a)}))};Z.prototype.hb=function(){var a=qe(new pe(this.V),this.I,this.F);return Promise.resolve(a)};}.bind(g, global))();

module.exports = g.shaka;


/* XTL2_rYgokY */}),null);
__d('VideoChannelViewChainLengthManager',['guid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(k){'use strict';this.$VideoChannelViewChainSession1=c('guid')();this.$VideoChannelViewChainSession2=0;this.$VideoChannelViewChainSession3=k;this.$VideoChannelViewChainSession4={};this.$VideoChannelViewChainSession4[k]=0;this.$VideoChannelViewChainSession5=k;}h.prototype.registerVideoID=function(k){'use strict';if(this.$VideoChannelViewChainSession4[k]===undefined){this.$VideoChannelViewChainSession2++;this.$VideoChannelViewChainSession4[k]=this.$VideoChannelViewChainSession2;}this.$VideoChannelViewChainSession5=k;};h.prototype.getSessionID=function(){'use strict';return this.$VideoChannelViewChainSession1;};h.prototype.getCurrentChainLength=function(){'use strict';return this.$VideoChannelViewChainSession4[this.$VideoChannelViewChainSession5]!==undefined?this.$VideoChannelViewChainSession4[this.$VideoChannelViewChainSession5]:null;};var i={},j={_ensureSessionID:function k(l){l=l.toString();if(!i[l])i[l]=new h(l);},getLoggingData:function k(l){if(l)l=l.toString();var m=i&&i[l];if(!m)return {video_chaining_depth_level:null,video_chaining_session_id:null};return {video_chaining_depth_level:m.getCurrentChainLength(),video_chaining_session_id:m.getSessionID()};},registerChainingInfos:function k(l,m){var n=l;if(m){var o=m.decode();if(o.root_id)n=o.root_id;}if(n)n=n.toString();this.registerVideoID(n,l);},registerVideoID:function k(l,m){l=l.toString();this._ensureSessionID(l);i[l].registerVideoID(m);}};f.exports=j;}),null);
__d('VideoChannelLogger',['Arbiter','Banzai','BanzaiLogger','Run','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelViewChainLengthManager'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0,i=null,j=null,k=null,l=0,m=null,n={startSession:function o(p,q,r){i=q;k=r;j=p;c('Arbiter').inform('LogEnterChannel',q);c('VideoChannelViewChainLengthManager').registerVideoID(p,p);var s={};s[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').SESSION_START;n.log(s);h=Date.now();c('Run').onLeave(n.endSession);c('Banzai').subscribe(c('Banzai').SHUTDOWN,n.endSession);},endSession:function o(){if(i){c('Arbiter').inform('LogExitChannel',i);var p={};p[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').SESSION_END;n.log(p);i=null;j=null;k=null;m=null;h=0;}},setOffset:function o(p){l=p;},setPosition:function o(p){m=p;},getPlayerLoggingData:function o(){if(!i)return {};return {video_channel_id:i,position_in_channel:m+l};},log:function o(p){var q=c('VideoChannelViewChainLengthManager').getLoggingData(j);p[c('VideoChannelLoggerFields').SESSION_ID]=q.video_chaining_session_id;p[c('VideoChannelLoggerFields').VIDEO_CHANNEL_ID]=i;p[c('VideoChannelLoggerFields').VIDEO_CHAINING_CALLER]=k;if(!(c('VideoChannelLoggerFields').POSITION_IN_CHANNEL in p))p[c('VideoChannelLoggerFields').POSITION_IN_CHANNEL]=m+l;if(h){var r=Date.now()-h;p[c('VideoChannelLoggerFields').TIME_SINCE_START]=r+.001;}c('BanzaiLogger').log('VideoChannelLoggerConfig',p);}};f.exports=n;}),null);
__d('VideoQualityClasses',['VideoQualityClassInternal'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('VideoQualityClassInternal').orderedValues;}),null);
__d("VideoConfig",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){Object.assign(this,i);}f.exports=h;}),null);
__d("HTMLMediaElementReadyStates",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};f.exports=h;}),null);
__d('getHTMLMediaElementMutedState',['HTMLMediaElementReadyStates'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){if(i.readyState>=c('HTMLMediaElementReadyStates').HAVE_METADATA){return i.muted;}else return i.hasAttribute('muted')||i.muted;}f.exports=h;}),null);
__d('HVideoPlayerMixin',['EventListener','UserAgent','VideoPlayerLoggerEvent','VideoPlayerHTML5Experiments','getHTMLMediaElementMutedState'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=-1;function i(k,event){var l=event.timeStamp;if(l){var m=l.toString().length-Date.now().toString().length;if(m!==0)l=Math.round(l/Math.pow(10,m));k.time_ms=l;}else k.time_ms=Date.now();return k;}var j={initLogger:function k(l,m){this._loggedEvents={};this._logFunction=l;this._useEventTime=m;var n=this.getVideoElement();this._lastStartTimePosition=h;this._muted=c('getHTMLMediaElementMutedState')(n);this._pausedPosition=h;this._seeking=false;this._seekSourceTimePosition=h;this._volume=n.volume;this._lastPlayedTime=h;var o=false;if(n.readyState>=n.HAVE_FUTURE_DATA){this._logReadyToPlay();}else o=true;if(this.skipSubscriptions())return;var p=this.getSubscriptions();if(o)p.addSubscriptions(c('EventListener').listen(n,'canplay',this._logReadyToPlay.bind(this)));p.addSubscriptions(c('EventListener').listen(n,'ended',this.onEnded.bind(this)),c('EventListener').listen(n,'pause',this.onPause.bind(this)),c('EventListener').listen(n,'playing',this.onPlaying.bind(this)),c('EventListener').listen(n,'seeked',this.onSeeked.bind(this)),c('EventListener').listen(n,'seeking',this.onSeeking.bind(this)),c('EventListener').listen(n,'play',this.onPlay.bind(this)),c('EventListener').listen(n,'loadedmetadata',this.onLoadedMetadata.bind(this)),c('EventListener').listen(n,'timeupdate',this.onTimeUpdate.bind(this)),c('EventListener').listen(n,'volumechange',this.onVolumeChange.bind(this)),c('EventListener').listen(n,'representationended',this.onRepresentationEnded.bind(this)));},skipSubscriptions:function k(){return false;},onCanPlay:function k(l){this._logReadyToPlay(l);},onPlay:function k(l){this._ignoreNextPlaying=false;this._pendingPlayRequest=true;},_logOnce:function k(event,l){if(this._loggedEvents[event])return;this._logEvent(event,l);},_logEvent:function k(event,l){this._loggedEvents[event]=true;var m=l?l:{};m.video_id=this.getVideoID();if(!m.hasOwnProperty('video_time_position'))m.video_time_position=this._getVideoCurrentTime();if(!m.time_ms)m.time_ms=Date.now();m.time=Math.round(m.time_ms/1000);if(this.getAdClientToken){var n=this.getAdClientToken();if(n)m.ad_client_token=n;}if(this.getPlayerFormat)m.player_format=this.getPlayerFormat();if(this.getPlayerOrigin)m.player_origin=this.getPlayerOrigin();if(this.getPlayerSuborigin)m.player_suborigin=this.getPlayerSuborigin();this._logFunction(event,m);},_logReadyToPlay:function k(){this._logOnce(c('VideoPlayerLoggerEvent').READY_TO_PLAY);},onPause:function k(l){var m=this.getVideoElement();if(this._pendingPlayRequest){var n={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=false;this._logEvent(c('VideoPlayerLoggerEvent').CANCELLED_REQUESTED_PLAYING,n);return;}var event=m.ended?c('VideoPlayerLoggerEvent').FINISHED_PLAYING:c('VideoPlayerLoggerEvent').PAUSED,o=this._getVideoCurrentTime();if(o)this._lastPlayedTime=o;var p=this._lastPlayedTime,q=l.lastPauseReason;if(event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING){p=Math.max(p,m.duration);}else if(this.preventPauseLoggingInMixin===true){return;}else if(this.preventPauseLoggingInMixin===false)q=q||'unloaded';this._logEvent(event,this._amendEventTime({video_last_start_time_position:this._lastStartTimePosition===h?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:p,debug_reason:q},l));this._lastStartTimePosition=h;},onEnded:function k(){if(this._lastStartTimePosition!==h&&c('UserAgent').isBrowser('IE'))this.onPause({});},onRepresentationEnded:function k(l){var m=l.detail;if(m){var n={representation_id:m.representationID,next_representation_id:m.nextRepresentationID,stream_switch_reason:m.streamSwitchReason};if(c('VideoPlayerHTML5Experiments').newStateChangeCalculation){var o=this.getVideoElement();this._lastPlayedTime=this._getVideoCurrentTime();var p=this._lastPlayedTime;n=this._amendEventTime(babelHelpers['extends']({video_last_start_time_position:this._lastStartTimePosition===h?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:p},n),l);}this._logEvent(c('VideoPlayerLoggerEvent').REPRESENTATION_ENDED,n);if(c('VideoPlayerHTML5Experiments').newStateChangeCalculation){var q=this._getVideoCurrentTime();this._lastStartTimePosition=q;this._lastPlayedTime=q;}}},addWatchTimeData:function k(l){if(this._lastStartTimePosition!=h&&this._lastPlayedTime!=h){l.video_last_start_time_position=this._lastStartTimePosition;l.video_time_position=this._lastPlayedTime;this._lastStartTimePosition=h;}return l;},getLastPlayReason:function k(){return null;},getVideoPlayReason:function k(){return null;},onPlaying:function k(l){if(this._ignoreNextPlaying){this._ignoreNextPlaying=false;return;}var m=this.getLastPlayReason();this._pendingPlayRequest=false;var event=this._loggedEvents[c('VideoPlayerLoggerEvent').STARTED_PLAYING]?c('VideoPlayerLoggerEvent').UNPAUSED:c('VideoPlayerLoggerEvent').STARTED_PLAYING,n=this._amendEventTime({debug_reason:m,video_play_reason:this.getVideoPlayReason()},l),o=this._getVideoCurrentTime();if(c('VideoPlayerHTML5Experiments').useCurrentTimeAdjustment){var p=this.getVideoElement().currentTime,q=p-o;n.time_ms-=Math.round(q*1000);}this._logEvent(event,n);this._lastStartTimePosition=o;this._lastPlayedTime=o;this._currentTimeAtLoadedMetadataCache=null;},allowNextSeekInMixin:function k(){this._allowNextSeek=true;},onSeeked:function k(l){this._seeking=false;var m=this._seekSourceTimePosition;this._seekSourceTimePosition=h;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){if(!this._pendingPlayRequest)this._ignoreNextPlaying=true;return;}this._allowNextSeek=false;this._ignoreNextPlaying=false;var n={video_seek_source_time_position:m};if(this._lastStartTimePosition!==h){n.video_last_start_time_position=this._lastStartTimePosition;}else n.video_last_start_time_position=m;this._logEvent(c('VideoPlayerLoggerEvent').SCRUBBED,this._amendEventTime(n,l));var o=this.getVideoElement();if(o.paused){this._lastStartTimePosition=h;}else this._lastStartTimePosition=this._getVideoCurrentTime();},onSeeking:function k(l){this._currentTimeAtLoadedMetadataCache=null;if(!this._seeking){this._seekSourceTimePosition=this._getVideoCurrentTime();this._seeking=true;}},onTimeUpdate:function k(l){this._currentTimeAtLoadedMetadataCache=null;var m=this.getVideoElement();if(!m.paused)this._lastPlayedTime=this._getVideoCurrentTime();},onVolumeChange:function k(l){var m=this.getVideoElement(),n={},event=null;if(c('VideoPlayerHTML5Experiments').useFixedVolumeLogging){var o=m.muted,p=this._muted,q=m.volume,r=this._volume;n.current_volume=Math.round(q*100);this._volume=q;this._muted=o;var s=o||q==0,t=p||r==0;if(t&&s)return;if(t!=s){if(s){event=c('VideoPlayerLoggerEvent').MUTED;}else event=c('VideoPlayerLoggerEvent').UNMUTED;}else{if(r==q)return;if(q<r){event=c('VideoPlayerLoggerEvent').VOLUME_DECREASE;}else event=c('VideoPlayerLoggerEvent').VOLUME_INCREASE;}}else{if(m.muted!==this._muted&&m.volume===this._volume&&m.volume>0){event=m.muted?c('VideoPlayerLoggerEvent').MUTED:c('VideoPlayerLoggerEvent').UNMUTED;}else{event=m.volume>this._volume?c('VideoPlayerLoggerEvent').VOLUME_INCREASE:c('VideoPlayerLoggerEvent').VOLUME_DECREASE;n.current_volume=Math.round(m.volume*100);}this._muted=m.muted;this._volume=m.volume;}this._logEvent(event,this._amendEventTime(n,l));},_amendEventTime:function k(l,event){if(this._useEventTime){return i(l,event);}else l.time_ms=Date.now();return l;},_getVideoCurrentTime:function k(){var l=this.getVideoElement().currentTime.toFixed(2);if(c('VideoPlayerHTML5Experiments').useCurrentTimeAdjustment)if(this._currentTimeAtLoadedMetadataCache!=null)l=this._currentTimeAtLoadedMetadataCache.toFixed(2);if(c('VideoPlayerHTML5Experiments').fixCurrentTimeType)return +l;return l;},onLoadedMetadata:function k(l){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime;}};f.exports=j;}),null);
__d('MediaBufferingDetector',['Event','EventEmitter','SubscriptionsHandler','setInterval','clearInterval','performanceNow'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this);this.$MediaBufferingDetector1=k;this.$MediaBufferingDetector2=new (c('SubscriptionsHandler'))();if(!this.$MediaBufferingDetector1.paused)this.$MediaBufferingDetector7();this.$MediaBufferingDetector2.addSubscriptions(c('Event').listen(this.$MediaBufferingDetector1,'playing',function(){return this.$MediaBufferingDetector8();}.bind(this)),c('Event').listen(this.$MediaBufferingDetector1,'pause',function(){return this.$MediaBufferingDetector9();}.bind(this)),c('Event').listen(this.$MediaBufferingDetector1,'ended',function(){return this.$MediaBufferingDetector10();}.bind(this)),c('Event').listen(this.$MediaBufferingDetector1,'timeupdate',function(){return this.$MediaBufferingDetector11();}.bind(this)));}j.prototype.$MediaBufferingDetector12=function(){'use strict';var k=c('performanceNow')(),l=this.$MediaBufferingDetector1.currentTime,m=k-this.$MediaBufferingDetector5,n=l-this.$MediaBufferingDetector6,o=n*1000,p=m-o;if(m*.2<Math.abs(p)){this.$MediaBufferingDetector13();}else this.$MediaBufferingDetector14();this.$MediaBufferingDetector15();};j.prototype.$MediaBufferingDetector15=function(){'use strict';this.$MediaBufferingDetector5=c('performanceNow')();this.$MediaBufferingDetector6=this.$MediaBufferingDetector1.currentTime;};j.prototype.$MediaBufferingDetector7=function(){'use strict';if(this.$MediaBufferingDetector4)return;this.$MediaBufferingDetector15();this.$MediaBufferingDetector4=c('setInterval')(function(){return this.$MediaBufferingDetector12();}.bind(this),500);};j.prototype.$MediaBufferingDetector16=function(){'use strict';c('clearInterval')(this.$MediaBufferingDetector4);this.$MediaBufferingDetector4=null;};j.prototype.$MediaBufferingDetector13=function(){'use strict';if(this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=true;this.emit('bufferingStart');};j.prototype.$MediaBufferingDetector14=function(){'use strict';if(!this.$MediaBufferingDetector3)return;this.$MediaBufferingDetector3=false;this.emit('bufferingEnd');};j.prototype.$MediaBufferingDetector8=function(){'use strict';this.$MediaBufferingDetector14();this.$MediaBufferingDetector7();};j.prototype.$MediaBufferingDetector9=function(){'use strict';this.$MediaBufferingDetector14();this.$MediaBufferingDetector16();};j.prototype.$MediaBufferingDetector10=function(){'use strict';this.$MediaBufferingDetector14();this.$MediaBufferingDetector16();};j.prototype.$MediaBufferingDetector11=function(){'use strict';if(!this.$MediaBufferingDetector1.paused){this.$MediaBufferingDetector14();this.$MediaBufferingDetector16();this.$MediaBufferingDetector7();}};j.prototype.destroy=function(){'use strict';this.$MediaBufferingDetector16();this.$MediaBufferingDetector2.release();};f.exports=j;}),null);
__d('VideoMimeTypes',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(o,p,q){return o+'; codecs="'+p+', '+q+'"';}var i='mp4a.40.2';function j(o){return 'avc1.42E0'+o.toString(16).toUpperCase();}function k(o){return 'avc1.4D40'+o.toString(16).toUpperCase();}function l(o){return 'avc1.6400'+o.toString(16).toUpperCase();}var m='video/mp4',n={h264baseline:h(m,j(30),i),h264main30avc:h(m,k(30),i),h264main31avc:h(m,k(31),i),h264high50avc:h(m,l(50),i),h264high51avc:h(m,l(51),i)};f.exports=n;}),null);
__d("XLiveBroadcastCaptionsURIFetchAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/live\/broadcast\/captions\/uri\/",{video_id:{type:"String"}});}),null);
__d('canVideoPlayType',['DOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(j){h=h||c('DOM').create('video');if(!('canPlayType' in h))return '';return h.canPlayType(j);}f.exports=i;}),null);
__d('forwardEvent',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,event){return i.addListener(event,function(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];return j.emit.apply(j,[event].concat(l));});}f.exports=h;}),null);
__d('onCanPlayHTMLMediaElement',['invariant','EventListener','HTMLMediaElementReadyStates','setImmediate'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){return k>=c('HTMLMediaElementReadyStates').HAVE_FUTURE_DATA;}function j(k,l){!(k instanceof window.HTMLMediaElement)?h(0):void 0;if(i(k.readyState))c('setImmediate')(l);return c('EventListener').listen(k,'canplay',l);}j.once=function(k,l){var m=j(k,function(){if(!m)return;m.remove();m=null;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];l.apply(this,o);}.bind(this));};f.exports=j;}),null);
__d('onLoadedMetadataHTMLMediaElement',['EventListener','HTMLMediaElementReadyStates','setImmediate'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return j>=c('HTMLMediaElementReadyStates').HAVE_METADATA;}function i(j,k){if(h(j.readyState))c('setImmediate')(k);return c('EventListener').listen(j,'loadedmetadata',k);}i.once=function(j,k){var l=i(j,function(){l.remove();for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];k.apply(this,n);}.bind(this));};f.exports=i;}),null);
__d('seekHTMLMediaElementTo',['EventListener','onLoadedMetadataHTMLMediaElement','setImmediate'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){if(i.currentTime==j)return k&&c('setImmediate')(k);try{i.currentTime=j;}catch(l){}if(i.currentTime){var m=c('EventListener').listen(i,'seeked',function(){m.remove();k&&k();});}else c('onLoadedMetadataHTMLMediaElement')(i,function(){i.currentTime=j;var n=c('EventListener').listen(i,'seeked',function(){n.remove();k&&k();});});}f.exports=h;}),null);
__d('supportsHTML5Video',['DOM','memoize'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('memoize')(function(){return !!c('DOM').create('video').canPlayType;});}),null);
__d('VideoPlayerHTML5Api',['cx','AsyncRequest','AbstractVideoPlayerApi','Arbiter','Bootloader','CSS','DOM','DOMDimensions','Event','EventListener','HVideoPlayerMixin','MediaBufferingDetector','RTISubscriptionManager','Run','SubscriptionsHandler','VideoData','VideoMimeTypes','VideoFrameBuffer','VideoPlayerHTML5Experiments','VideoPlayerLoggerEvent','VideoPlayerReason','VideoPlayerVersions','VideoPlayerShakaExperiments','VideoQualityClasses','XLiveBroadcastCaptionsURIFetchAsyncController','canVideoPlayType','dispatchCustomEvent','dispatchEvent','classWithMixins','forwardEvent','getHTMLMediaElementMutedState','mixin','onCanPlayHTMLMediaElement','seekHTMLMediaElementTo','setImmediate','supportsHTML5Video'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();function k(o){switch(o){case 1:return 'The fetching process for the media resource was aborted by the '+'user agent at the users request.';case 2:return 'A network error of some description caused the user agent to '+'stop fetching the media resource, after the resource was '+'established to be usable.';case 3:return 'An error of some description occurred while decoding the '+'media resource, after the resource was established to be usable.';case 4:return 'The media resource indicated by the src attribute was not '+'suitable.';}return null;}function l(o){switch(o){case 1:return 'MEDIA_ERR_ABORTED';case 2:return 'MEDIA_ERR_NETWORK';case 3:return 'MEDIA_ERR_DECODE';case 4:return 'MEDIA_ERR_SRC_NOT_SUPPORTED';default:return 'Error code '+o+' is unknown';}}var m=-1;i=babelHelpers.inherits(n,c('classWithMixins')(c('AbstractVideoPlayerApi'),c('mixin')(c('HVideoPlayerMixin'))));j=i&&i.prototype;function n(o,p){'use strict';j.constructor.call(this);this.getDebug=function(){return {VideoPlayerHTML5Shaka:this.$VideoPlayerHTML5Api29};}.bind(this);this.$VideoPlayerHTML5Api28=o;this.$VideoPlayerHTML5Api12=this.$VideoPlayerHTML5Api28.id;var q=c('DOMDimensions').getElementDimensions(this.$VideoPlayerHTML5Api28);this.preventSeekLoggingInMixin=c('VideoPlayerShakaExperiments').improveRebufferLogging;this.$VideoPlayerHTML5Api42=q.width;this.$VideoPlayerHTML5Api11=q.height;if(p){this.$VideoPlayerHTML5Api6=p;}else this.$VideoPlayerHTML5Api6=JSON.parse(this.$VideoPlayerHTML5Api28.getAttribute('data-config'));this.$VideoPlayerHTML5Api5=new (c('MediaBufferingDetector'))(this.$VideoPlayerHTML5Api28);this.$VideoPlayerHTML5Api5.addListener('bufferingStart',function(){return this.$VideoPlayerHTML5Api44();}.bind(this));this.$VideoPlayerHTML5Api5.addListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Api45();}.bind(this));this.$VideoPlayerHTML5Api19=m;this.$VideoPlayerHTML5Api21=c('getHTMLMediaElementMutedState')(this.$VideoPlayerHTML5Api28);this.$VideoPlayerHTML5Api40=this.$VideoPlayerHTML5Api28.volume;this.$VideoPlayerHTML5Api20=false;this.$VideoPlayerHTML5Api17=null;this.$VideoPlayerHTML5Api25=false;this.$VideoPlayerHTML5Api3=false;this.$VideoPlayerHTML5Api27=this.$VideoPlayerHTML5Api28.getAttribute('preload')=='auto';this.$VideoPlayerHTML5Api39=false;this.$VideoPlayerHTML5Api9=false;this.$VideoPlayerHTML5Api33=false;if(this.$VideoPlayerHTML5Api6.lazyPreload)if(this.$VideoPlayerHTML5Api6.onafterloadRegister){c('Run').onAfterLoad(function(){return this.$VideoPlayerHTML5Api28.setAttribute('preload',this.$VideoPlayerHTML5Api6.lazyPreload);}.bind(this));}else this.$VideoPlayerHTML5Api28.setAttribute('preload',this.$VideoPlayerHTML5Api6.lazyPreload);this.$VideoPlayerHTML5Api8=this.$VideoPlayerHTML5Api6.disableNativeControls;this.$VideoPlayerHTML5Api36=this.$VideoPlayerHTML5Api6.subtitlesActive;this.$VideoPlayerHTML5Api46();this.preventPauseLoggingInMixin=false;this.$VideoPlayerHTML5Api34=new (c('SubscriptionsHandler'))();this.$VideoPlayerHTML5Api47();this.$VideoPlayerHTML5Api15=this.$VideoPlayerHTML5Api6.useRateLimited;var r=c('VideoQualityClasses').indexOf('hd');this.$VideoPlayerHTML5Api14=this.$VideoPlayerHTML5Api6.minQuality!==null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Api6.minQuality)>=r;this.$VideoPlayerHTML5Api22=this.$VideoPlayerHTML5Api6.minQuality;this.$VideoPlayerHTML5Api23=this.$VideoPlayerHTML5Api6.maxQuality;this.$VideoPlayerHTML5Api2=this.$VideoPlayerHTML5Api6.accessToken;this.$VideoPlayerHTML5Api31=this.$VideoPlayerHTML5Api6.startTimestamp;this.$VideoPlayerHTML5Api4=this.$VideoPlayerHTML5Api6.autoFullscreenHD;this.switchVideo(0);this.initLogger(this.$VideoPlayerHTML5Api48.bind(this),this.$VideoPlayerHTML5Api6.useEventTime);this.$VideoPlayerHTML5Api49();if(this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Spherical&&!this.$VideoPlayerHTML5Api6.fallbackSources)this.$VideoPlayerHTML5Api50();this.$VideoPlayerHTML5Api26=null;this.$VideoPlayerHTML5Api43=false;}n.prototype.getAdClientToken=function(){'use strict';this.$VideoPlayerHTML5Api6.ad_client_token;};n.prototype.$VideoPlayerHTML5Api44=function(){'use strict';this.emit('buffering');};n.prototype.$VideoPlayerHTML5Api45=function(){'use strict';this.emit('buffered');};n.prototype.$VideoPlayerHTML5Api51=function(){'use strict';this.emit('streamInterrupted');this.$VideoPlayerHTML5Api43=true;};n.prototype.$VideoPlayerHTML5Api52=function(){'use strict';this.emit('streamResumed');this.$VideoPlayerHTML5Api43=false;};n.prototype.isStreamInterrupted=function(){'use strict';return this.$VideoPlayerHTML5Api43;};n.prototype.getVideoID=function(){'use strict';if(this.$VideoPlayerHTML5Api7)return this.$VideoPlayerHTML5Api7.getVideoID();return this.$VideoPlayerHTML5Api6.video_id;};n.prototype.getDOMElement=function(){'use strict';return this.$VideoPlayerHTML5Api28;};n.prototype.getVideoElement=function(){'use strict';return this.$VideoPlayerHTML5Api28;};n.prototype.getSubscriptions=function(){'use strict';return this.$VideoPlayerHTML5Api34;};n.onImplementationReady=function(o,p){'use strict';p();};n.prototype.destroy=function(o){'use strict';if(this.$VideoPlayerHTML5Api9)return;this.$VideoPlayerHTML5Api9=true;this.abortLoading(o);this.$VideoPlayerHTML5Api53();if(this.$VideoPlayerHTML5Api54)c('DOM').remove(this.$VideoPlayerHTML5Api54);if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api30.destroy();};n.prototype.getVideoInfo=function(){'use strict';if(!this.$VideoPlayerHTML5Api7)return null;return {isHD:this.getSelectedVideoQuality()==this.getAvailableVideoQualities().pop(),streamType:this.$VideoPlayerHTML5Api7.getStreamType(),hasHD:this.getAvailableVideoQualities().length>1,areSubtitlesActive:this.areSubtitlesActive(),isMuted:this.isMuted(),isPlaying:this.$VideoPlayerHTML5Api13,playbackDuration:this.getPlaybackDuration(),volume:this.getVolume(),resourceUrl:this.$VideoPlayerHTML5Api29?'DASH manifest':this.$VideoPlayerHTML5Api55(),hasSubtitles:this.$VideoPlayerHTML5Api7.hasSubtitles(),hasUnlimitedSrc:this.$VideoPlayerHTML5Api7.hasRateLimit(),useUnlimitedSrc:!this.$VideoPlayerHTML5Api15,projection:this.$VideoPlayerHTML5Api56(),tagSD:this.$VideoPlayerHTML5Api7.getSDTag(),tagHD:this.$VideoPlayerHTML5Api7.getHDTag(),isLiveStream:this.$VideoPlayerHTML5Api7.isLiveStream(),liveManifestUrl:this.$VideoPlayerHTML5Api7.getLiveManifestUrl()};};n.isImplementationUnavailable=function(o){'use strict';if(o){var p=c('canVideoPlayType')(c('VideoMimeTypes').h264main30avc);if(c('VideoPlayerHTML5Experiments').relaxedCanPlay)return p!=='probably'&&p!=='maybe';return p!=='probably';}return !c('supportsHTML5Video')();};n.prototype.pause=function(o){'use strict';this.$VideoPlayerHTML5Api17=o;if(o==='unloaded'&&!this.$VideoPlayerHTML5Api57()){this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').PAUSED,this.addWatchTimeData({reason:'unloaded'}));this.preventPauseLoggingInMixin=true;}this.$VideoPlayerHTML5Api58();if(this.$VideoPlayerHTML5Api29){if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api30.prepareScreenshot();this.$VideoPlayerHTML5Api29.pause();}else this.$VideoPlayerHTML5Api28.pause();};n.prototype.preload=function(){'use strict';if(!this.$VideoPlayerHTML5Api27){if(this.$VideoPlayerHTML5Api1)this.$VideoPlayerHTML5Api59();this.$VideoPlayerHTML5Api27=true;this.$VideoPlayerHTML5Api28.setAttribute('preload','auto');}};n.prototype.play=function(o){'use strict';if(!this.$VideoPlayerHTML5Api38)this.$VideoPlayerHTML5Api38=o;this.$VideoPlayerHTML5Api18=o;if(!this.$VideoPlayerHTML5Api57()){this.$VideoPlayerHTML5Api60();return;}this.$VideoPlayerHTML5Api25=true;if(this.$VideoPlayerHTML5Api1){c('dispatchEvent')(this.$VideoPlayerHTML5Api28,'play');this.$VideoPlayerHTML5Api59();this.$VideoPlayerHTML5Api3=true;return;}this.$VideoPlayerHTML5Api61();};n.prototype.$VideoPlayerHTML5Api58=function(){'use strict';if(this.$VideoPlayerHTML5Api3&&this.$VideoPlayerHTML5Api28.paused)c('dispatchEvent')(this.$VideoPlayerHTML5Api28,'pause');this.$VideoPlayerHTML5Api62();};n.prototype.$VideoPlayerHTML5Api62=function(){'use strict';this.$VideoPlayerHTML5Api25=false;this.$VideoPlayerHTML5Api3=false;};n.prototype.$VideoPlayerHTML5Api63=function(){'use strict';this.$VideoPlayerHTML5Api28.setAttribute('preload','auto');this.$VideoPlayerHTML5Api27=true;this.$VideoPlayerHTML5Api28.load();this.$VideoPlayerHTML5Api28.muted=this.$VideoPlayerHTML5Api21;};n.prototype.seek=function(o){'use strict';this.allowNextSeekInMixin();this.$VideoPlayerHTML5Api28.currentTime=o;};n.prototype.removeRotation=function(){'use strict';c('CSS').removeClass(this.$VideoPlayerHTML5Api28,"_56jr");c('CSS').removeClass(this.$VideoPlayerHTML5Api28,"_56js");c('CSS').removeClass(this.$VideoPlayerHTML5Api28,"_56jt");this.$VideoPlayerHTML5Api28.style.marginLeft='';this.$VideoPlayerHTML5Api28.style.marginTop='';this.$VideoPlayerHTML5Api28.style.width='';this.$VideoPlayerHTML5Api28.style.height='';};n.prototype.applyRotation=function(o){'use strict';if(!o)return;c('CSS').conditionClass(this.$VideoPlayerHTML5Api28,"_56jr",o==90);c('CSS').conditionClass(this.$VideoPlayerHTML5Api28,"_56js",o==180);c('CSS').conditionClass(this.$VideoPlayerHTML5Api28,"_56jt",o==270);if(o==180)return;var p=this.$VideoPlayerHTML5Api11,q=this.$VideoPlayerHTML5Api42,r=(p-q)/2,s=(q-p)/2;this.$VideoPlayerHTML5Api28.style.marginLeft=s+'px';this.$VideoPlayerHTML5Api28.style.marginTop=r+'px';this.$VideoPlayerHTML5Api28.style.height=q+'px';this.$VideoPlayerHTML5Api28.style.width=p+'px';};n.prototype.switchVideo=function(o){'use strict';if(!this.$VideoPlayerHTML5Api6.videoData||this.$VideoPlayerHTML5Api6.videoData.length<=o)return;var p=new (c('VideoData'))(this.$VideoPlayerHTML5Api6.videoData[o]);this.$VideoPlayerHTML5Api7=p;if((p.hasDashManifest()||p.isLiveStream())&&this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka&&this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka.isSupported()&&!this.$VideoPlayerHTML5Api6.fallbackSources){this.$VideoPlayerHTML5Api5.destroy();var q,r;q=p.getDashManifest();if(p.isLiveStream())r=p.getLiveManifestUrl();var s=new this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka(this.$VideoPlayerHTML5Api28,p.getDashPrefetchedRepresentationIDs(),{accessToken:this.$VideoPlayerHTML5Api2,minPlayQuality:this.$VideoPlayerHTML5Api22,maxPlayQuality:this.$VideoPlayerHTML5Api23,width:this.$VideoPlayerHTML5Api42,height:this.$VideoPlayerHTML5Api11,manifest:q,manifestUrl:r,isLive:p.isLiveStream(),startTimestamp:this.$VideoPlayerHTML5Api31,videoID:this.getVideoID()});s.addListener('bufferingStart',function(){return this.$VideoPlayerHTML5Api44();}.bind(this));s.addListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Api45();}.bind(this));s.addListener('tracksChanged',function(){return this.emit('qualityChange');}.bind(this));s.addListener('streamInterrupted',function(){return this.$VideoPlayerHTML5Api51();}.bind(this));s.addListener('streamResumed',function(){return this.$VideoPlayerHTML5Api52();}.bind(this));s.addListener('adaptation',function(t){var u=t.reason;this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').QUALITY_CHANGE,{reason:u});this.emit('qualityChange');}.bind(this));s.addListener('representation_ended',function(t){c('dispatchCustomEvent')(this.$VideoPlayerHTML5Api28,'representationended',t);}.bind(this));s.addListener('debug/shakaEvent',function(t){return this.emit('debug/shakaEvent',t);}.bind(this));s.addListener('error',function(t){return this.$VideoPlayerHTML5Api64(t);}.bind(this));this.$VideoPlayerHTML5Api29=s;this.$VideoPlayerHTML5Api10.remove();}else{this.$VideoPlayerHTML5Api28.src=this.$VideoPlayerHTML5Api55();if(this.$VideoPlayerHTML5Api31)this.seek(this.$VideoPlayerHTML5Api31);}this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.removeSubtitles();if(p.hasSubtitles())this.$VideoPlayerHTML5Api65(this.$VideoPlayerHTML5Api7.getSubtitlesSrc());this.removeRotation();this.applyRotation(p.getRotation());};n.prototype.switchToStreamType=function(o){'use strict';};n.prototype.replaceVideoDataFromURL=function(o){'use strict';};n.prototype.getCurrentlyPlayingStreamInfoID=function(){'use strict';if(this.$VideoPlayerHTML5Api29)return this.$VideoPlayerHTML5Api29.getStreamInfoIDForTimePosition(this.getCurrentTimePosition());return null;};n.prototype.unmute=function(){'use strict';if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api1.mutedState=false;this.$VideoPlayerHTML5Api21=false;this.emit('unmuteVideo');return;}this.$VideoPlayerHTML5Api28.muted=false;};n.prototype.mute=function(){'use strict';if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api1.mutedState=true;this.$VideoPlayerHTML5Api21=true;this.emit('muteVideo');return;}this.$VideoPlayerHTML5Api28.muted=true;};n.prototype.setRotation=function(o){'use strict';this.removeRotation();this.applyRotation(o);};n.prototype.setDimensions=function(o,p){'use strict';this.removeRotation();this.$VideoPlayerHTML5Api42=o;this.$VideoPlayerHTML5Api11=p;this.applyRotation(this.$VideoPlayerHTML5Api7.getRotation());if(this.$VideoPlayerHTML5Api32)this.$VideoPlayerHTML5Api32.updateDimensions(o,p);if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api30.setDimensions(o,p);if(this.$VideoPlayerHTML5Api29)this.$VideoPlayerHTML5Api29.setDimensions(o,p);if(this.$VideoPlayerHTML5Api35)this.$VideoPlayerHTML5Api35.setDimensions(o);this.emit('dimensionsChange',o,p);};n.prototype.$VideoPlayerHTML5Api66=function(){'use strict';this.$VideoPlayerHTML5Api28.controls=!this.$VideoPlayerHTML5Api8;};n.prototype.$VideoPlayerHTML5Api46=function(){'use strict';this.$VideoPlayerHTML5Api28.controls=this.$VideoPlayerHTML5Api28.controls&&!this.$VideoPlayerHTML5Api8;};n.prototype.$VideoPlayerHTML5Api47=function(){'use strict';this.$VideoPlayerHTML5Api10=c('EventListener').listen(this.$VideoPlayerHTML5Api28,'error',this.$VideoPlayerHTML5Api67.bind(this));this.$VideoPlayerHTML5Api34.addSubscriptions(this.$VideoPlayerHTML5Api10,c('EventListener').listen(this.$VideoPlayerHTML5Api28,'playing',this.$VideoPlayerHTML5Api68.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'play',this.$VideoPlayerHTML5Api60.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'ended',this.$VideoPlayerHTML5Api69.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'waiting',this.$VideoPlayerHTML5Api70.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'pause',this.$VideoPlayerHTML5Api71.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'volumechange',this.$VideoPlayerHTML5Api72.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'mousedown',this.$VideoPlayerHTML5Api73.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'mouseup',this.$VideoPlayerHTML5Api74.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'timeupdate',this.$VideoPlayerHTML5Api75.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'click',this.$VideoPlayerHTML5Api76.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'loadedmetadata',this.$VideoPlayerHTML5Api77.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'progress',this.$VideoPlayerHTML5Api78.bind(this)),c('EventListener').listen(this.$VideoPlayerHTML5Api28,'seeked',this.$VideoPlayerHTML5Api79.bind(this)),c('EventListener').capture(this.$VideoPlayerHTML5Api28.parentNode,'pause',this.$VideoPlayerHTML5Api80.bind(this)));if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api34.addSubscriptions(this.$VideoPlayerHTML5Api30.getSubscriptions());};n.prototype.$VideoPlayerHTML5Api80=function(o){'use strict';if(o.target!==this.$VideoPlayerHTML5Api28)return;if(!this.$VideoPlayerHTML5Api28.ended){if(this.$VideoPlayerHTML5Api17==='unloaded'){this.preventPauseLoggingInMixin=false;o.preventDefault();o.stopPropagation();}o.lastPauseReason=this.$VideoPlayerHTML5Api17;}};n.prototype.$VideoPlayerHTML5Api78=function(){'use strict';var o=this.$VideoPlayerHTML5Api28.buffered,p=0,q=0,r=o.length;while(r-->0){var s=o.end(r),t=o.start(r);if(t<=this.$VideoPlayerHTML5Api28.currentTime){q=t;p=s-t;break;}}this.$VideoPlayerHTML5Api49();this.$VideoPlayerHTML5Api81('flash/updateBuffer',{duration:p,offset:q});};n.prototype.$VideoPlayerHTML5Api49=function(){'use strict';clearTimeout(this.$VideoPlayerHTML5Api24);if(this.$VideoPlayerHTML5Api28.networkState===this.$VideoPlayerHTML5Api28.NETWORK_LOADING)this.$VideoPlayerHTML5Api24=setTimeout(function(){return this.$VideoPlayerHTML5Api82();}.bind(this),n.networkTimeout);};n.prototype.$VideoPlayerHTML5Api82=function(){'use strict';var o=this.$VideoPlayerHTML5Api28.buffered,p=0;for(var q=0;q<o.length;q++){var r=o.start(q),s=o.end(q);p+=s-r;}this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').NETWORK_TIMEOUT,{buffered:p});};n.prototype.$VideoPlayerHTML5Api75=function(){'use strict';var o;if(this.$VideoPlayerHTML5Api1){o=this.$VideoPlayerHTML5Api1.currentTime;}else o=this.$VideoPlayerHTML5Api28.currentTime;this.$VideoPlayerHTML5Api81('flash/updateStatus',{position:+o.toFixed(3)});};n.prototype.$VideoPlayerHTML5Api76=function(o){'use strict';if(o.button!==0)return;this.emit('clickVideo');o.preventDefault();};n.prototype.$VideoPlayerHTML5Api57=function(){'use strict';return this.$VideoPlayerHTML5Api28.paused;};n.prototype.$VideoPlayerHTML5Api83=function(){'use strict';var o=this.$VideoPlayerHTML5Api28.buffered;return (o.length>0&&o.start(0)===0&&o.end(0)===this.$VideoPlayerHTML5Api28.duration);};n.prototype.$VideoPlayerHTML5Api70=function(){'use strict';if(!this.$VideoPlayerHTML5Api83()){this.$VideoPlayerHTML5Api41=true;this.$VideoPlayerHTML5Api81('flash/buffering');}};n.prototype.setVolume=function(o){'use strict';this.$VideoPlayerHTML5Api28.volume=o;};n.prototype.$VideoPlayerHTML5Api72=function(){'use strict';if(this.$VideoPlayerHTML5Api28.muted!==this.$VideoPlayerHTML5Api21&&this.$VideoPlayerHTML5Api28.volume===this.$VideoPlayerHTML5Api40&&this.$VideoPlayerHTML5Api28.volume>0){this.$VideoPlayerHTML5Api21=this.$VideoPlayerHTML5Api28.muted;this.$VideoPlayerHTML5Api40=this.$VideoPlayerHTML5Api28.volume;if(!this.$VideoPlayerHTML5Api28.muted){this.$VideoPlayerHTML5Api81('flash/unmuteVideo');}else this.$VideoPlayerHTML5Api81('flash/muteVideo');}else{this.$VideoPlayerHTML5Api21=this.$VideoPlayerHTML5Api28.muted;this.$VideoPlayerHTML5Api40=this.$VideoPlayerHTML5Api28.volume;this.$VideoPlayerHTML5Api81('flash/changeVolume',{volume:this.$VideoPlayerHTML5Api28.volume});}if(!this.$VideoPlayerHTML5Api28.muted)this.$VideoPlayerHTML5Api81('flash/turnOffAutoplay',{reason:'unmuted'});};n.prototype.$VideoPlayerHTML5Api73=function(o){'use strict';if(o.button===0)this.$VideoPlayerHTML5Api20=true;};n.prototype.$VideoPlayerHTML5Api74=function(o){'use strict';if(o.button===0)this.$VideoPlayerHTML5Api20=false;};n.prototype.$VideoPlayerHTML5Api68=function(){'use strict';if(this.$VideoPlayerHTML5Api41){this.$VideoPlayerHTML5Api41=false;this.$VideoPlayerHTML5Api81('flash/buffered');}this.$VideoPlayerHTML5Api84();};n.prototype.$VideoPlayerHTML5Api60=function(){'use strict';this.$VideoPlayerHTML5Api13=true;this.$VideoPlayerHTML5Api66();this.$VideoPlayerHTML5Api85();this.$VideoPlayerHTML5Api81('flash/beginPlayback',{position:+this.$VideoPlayerHTML5Api28.currentTime.toFixed(2),reason:this.$VideoPlayerHTML5Api18});this.$VideoPlayerHTML5Api49();};n.prototype.$VideoPlayerHTML5Api71=function(){'use strict';if(this.$VideoPlayerHTML5Api28.ended){this.$VideoPlayerHTML5Api13=false;return;}if(this.$VideoPlayerHTML5Api28.seeking&&this.$VideoPlayerHTML5Api17===c('VideoPlayerReason').SEEK)return;if(this.$VideoPlayerHTML5Api20)return;if(this.$VideoPlayerHTML5Api17===c('VideoPlayerReason').SEEK){this.$VideoPlayerHTML5Api17=null;return;}if(this.$VideoPlayerHTML5Api17===null||this.$VideoPlayerHTML5Api17===c('VideoPlayerReason').USER)this.$VideoPlayerHTML5Api81('flash/turnOffAutoplay',{reason:'manually_paused'});this.$VideoPlayerHTML5Api17=null;this.$VideoPlayerHTML5Api13=false;this.$VideoPlayerHTML5Api46();this.$VideoPlayerHTML5Api81('flash/pausePlayback',{position:this.$VideoPlayerHTML5Api28.currentTime.toFixed(2)});};n.prototype.$VideoPlayerHTML5Api69=function(){'use strict';if(this.$VideoPlayerHTML5Api1)return;this.$VideoPlayerHTML5Api46();this.$VideoPlayerHTML5Api13=false;this.$VideoPlayerHTML5Api81('flash/finishPlayback');this.setRelativeSphericalOrientation(0,0);this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles();this.$VideoPlayerHTML5Api86();};n.prototype.$VideoPlayerHTML5Api79=function(){'use strict';this.emit('seekEnd',{position:+this.$VideoPlayerHTML5Api28.currentTime.toFixed(3)});};n.prototype.$VideoPlayerHTML5Api87=function(){'use strict';if(this.isMuted()&&!this.$VideoPlayerHTML5Api39)this.unmute();this.$VideoPlayerHTML5Api39=true;this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').VIEWPORT_ROTATED,{});};n.prototype.setRelativeSphericalOrientation=function(o,p){'use strict';if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api30.setRelativeSphericalOrientation(o,p);};n.prototype.setSphericalOrientation=function(o,p){'use strict';if(this.$VideoPlayerHTML5Api30){this.$VideoPlayerHTML5Api30.setSphericalOrientation(o,p);this.emit('sphericalOrientationChange',o,p);}};n.prototype.setSphericalFieldOfView=function(o){'use strict';if(this.$VideoPlayerHTML5Api30)this.$VideoPlayerHTML5Api30.setFieldOfView(o);};n.prototype.getSphericalViewportDimensions=function(){'use strict';return this.$VideoPlayerHTML5Api30?this.$VideoPlayerHTML5Api30.getDimensions():null;};n.prototype.isSpherical=function(){'use strict';return !!this.$VideoPlayerHTML5Api30;};n.prototype.getSphericalPlayerID=function(){'use strict';if(this.$VideoPlayerHTML5Api30)return this.$VideoPlayerHTML5Api30.getPlayerID();return null;};n.prototype.getEstimatedBandwidth=function(){'use strict';if(this.$VideoPlayerHTML5Api29)if(this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka)return this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Shaka.getEstimatedBandwidth();return null;};n.prototype.$VideoPlayerHTML5Api77=function(){'use strict';this.$VideoPlayerHTML5Api81('flash/updateMetadata');};n.prototype.$VideoPlayerHTML5Api64=function(o){'use strict';this.emit('error',babelHelpers['extends']({},o,{isPlayback:this.$VideoPlayerHTML5Api25}));};n.prototype.$VideoPlayerHTML5Api67=function(){'use strict';if(this.$VideoPlayerHTML5Api1)return;if(!this.$VideoPlayerHTML5Api28.error)return;var o=this.$VideoPlayerHTML5Api28.error;this.emit('error',{error:l(o.code),isPlayback:this.$VideoPlayerHTML5Api25,message:k(o.code)});};n.prototype.$VideoPlayerHTML5Api48=function(event,o){'use strict';if(event===c('VideoPlayerLoggerEvent').STARTED_PLAYING&&this.$VideoPlayerHTML5Api29)o.longest_init_response_time=this.$VideoPlayerHTML5Api29.getLongestInitResponseTime();o.player_version=c('VideoPlayerVersions').PLEASANTVILLE;o.projection=this.$VideoPlayerHTML5Api56();this.$VideoPlayerHTML5Api81('flash/logEvent',{logData:babelHelpers['extends']({event:event},o)});};n.prototype.$VideoPlayerHTML5Api81=function(event,o){'use strict';c('Arbiter').inform(event,babelHelpers['extends']({divID:this.$VideoPlayerHTML5Api12},o));this.emit(event.substr('flash/'.length),o);};n.prototype.$VideoPlayerHTML5Api84=function(){'use strict';var o=this.getVideoID();this.$VideoPlayerHTML5Api37=c('RTISubscriptionManager').subscribe('live/broadcast/caption/'+o,this.$VideoPlayerHTML5Api88.bind(this));};n.prototype.$VideoPlayerHTML5Api86=function(){'use strict';if(this.$VideoPlayerHTML5Api37)this.$VideoPlayerHTML5Api37.unsubscribe();};n.prototype.getLastPlayReason=function(){'use strict';return this.$VideoPlayerHTML5Api18;};n.prototype.getVideoPlayReason=function(){'use strict';return this.$VideoPlayerHTML5Api38;};n.prototype.isMuted=function(){'use strict';return this.$VideoPlayerHTML5Api21;};n.prototype.getPlaybackDuration=function(){'use strict';if(this.$VideoPlayerHTML5Api1)return this.$VideoPlayerHTML5Api1.playbackDuration;return this.$VideoPlayerHTML5Api28.duration||0;};n.prototype.getVolume=function(){'use strict';return this.$VideoPlayerHTML5Api28.volume;};n.prototype.getCurrentTimePosition=function(){'use strict';return this.$VideoPlayerHTML5Api28.currentTime;};n.prototype.$VideoPlayerHTML5Api55=function(){'use strict';if(this.$VideoPlayerHTML5Api6.fallbackSources)return (this.$VideoPlayerHTML5Api14&&this.$VideoPlayerHTML5Api6.fallbackSources.HD?this.$VideoPlayerHTML5Api6.fallbackSources.HD:this.$VideoPlayerHTML5Api6.fallbackSources.SD);if(this.$VideoPlayerHTML5Api14&&this.$VideoPlayerHTML5Api7.hasHD()){return this.$VideoPlayerHTML5Api89();}else return this.$VideoPlayerHTML5Api90();};n.prototype.$VideoPlayerHTML5Api89=function(){'use strict';if(this.$VideoPlayerHTML5Api15){return this.$VideoPlayerHTML5Api7.getPlayableSrcRateLimitedHD();}else return this.$VideoPlayerHTML5Api7.getPlayableSrcHD();};n.prototype.$VideoPlayerHTML5Api90=function(){'use strict';if(this.$VideoPlayerHTML5Api15){return this.$VideoPlayerHTML5Api7.getPlayableSrcRateLimitedSD();}else return this.$VideoPlayerHTML5Api7.getPlayableSrcSD();};n.prototype.toggleSubtitles=function(){'use strict';this.$VideoPlayerHTML5Api36=!this.$VideoPlayerHTML5Api36;if(this.$VideoPlayerHTML5Api36){this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.showSubtitles();}else this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles();this.emit('toggleSubtitles');};n.prototype.hasSubtitles=function(){'use strict';return this.$VideoPlayerHTML5Api7.hasSubtitles();};n.prototype.areSubtitlesActive=function(){'use strict';return this.$VideoPlayerHTML5Api36;};n.prototype.areHLSActive=function(){'use strict';return false;};n.prototype.isRTMP=function(){'use strict';return false;};n.prototype.$VideoPlayerHTML5Api85=function(){'use strict';if(this.$VideoPlayerHTML5Api36){this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.showSubtitles();}else this.$VideoPlayerHTML5Api35&&this.$VideoPlayerHTML5Api35.hideSubtitles();};n.prototype.$VideoPlayerHTML5Api91=function(){'use strict';if(this.$VideoPlayerHTML5Api13)this.$VideoPlayerHTML5Api85();this.emit('loadedSubtitles');};n.prototype.$VideoPlayerHTML5Api88=function(){'use strict';var o=this.getVideoID(),p=c('XLiveBroadcastCaptionsURIFetchAsyncController').getURIBuilder().setString('video_id',o).getURI();new (c('AsyncRequest'))().setURI(p).setMethod('POST').setHandler(function(q){this.$VideoPlayerHTML5Api92(q.getPayload());}.bind(this)).send();};n.prototype.$VideoPlayerHTML5Api92=function(o){'use strict';this.$VideoPlayerHTML5Api65(o);};n.prototype.$VideoPlayerHTML5Api65=function(o){'use strict';c('Bootloader').loadModules(["VideoPlayerHTML5Subtitles"],function(p){if(this.$VideoPlayerHTML5Api35)this.$VideoPlayerHTML5Api35.removeSubtitles();var q=this.$VideoPlayerHTML5Api6.subtitleDrawer;this.$VideoPlayerHTML5Api35=new p(this.$VideoPlayerHTML5Api28);this.$VideoPlayerHTML5Api35.setOnSubtitlesReady(function(){return this.$VideoPlayerHTML5Api91();}.bind(this));this.$VideoPlayerHTML5Api35.registerDrawer(q);this.$VideoPlayerHTML5Api35.loadSubtitles(o);}.bind(this),'VideoPlayerHTML5Api');};n.prototype.setStillFrameEnabled=function(o){'use strict';this.$VideoPlayerHTML5Api33=!o;};n.prototype.$VideoPlayerHTML5Api93=function(){'use strict';if(this.$VideoPlayerHTML5Api30){this.$VideoPlayerHTML5Api30.freeze();return;}if(this.$VideoPlayerHTML5Api33)return;var o;if(!this.$VideoPlayerHTML5Api32){var p=c('DOMDimensions').getElementDimensions(this.$VideoPlayerHTML5Api28),q=c('DOM').create('canvas',{width:p.width,height:p.height,className:"_3t5i"});c('DOM').insertAfter(this.$VideoPlayerHTML5Api28,q);this.$VideoPlayerHTML5Api32=o=new (c('VideoFrameBuffer'))(q,this.$VideoPlayerHTML5Api28);}else o=this.$VideoPlayerHTML5Api32;c('CSS').show(o.getDOMNode());o.updateFrameBuffer();c('CSS').hide(this.$VideoPlayerHTML5Api28);};n.prototype.$VideoPlayerHTML5Api53=function(){'use strict';if(this.$VideoPlayerHTML5Api30){this.$VideoPlayerHTML5Api30.unfreeze();return;}if(!this.$VideoPlayerHTML5Api32)return;c('CSS').hide(this.$VideoPlayerHTML5Api32.getDOMNode());c('CSS').show(this.$VideoPlayerHTML5Api28);};n.prototype.$VideoPlayerHTML5Api59=function(){'use strict';var o=this.$VideoPlayerHTML5Api1;if(!o)return;if(this.$VideoPlayerHTML5Api16)return;this.$VideoPlayerHTML5Api16=true;this.emit('restoringAfterAbort');this.allowNextSeekInMixin();if(this.$VideoPlayerHTML5Api29){this.$VideoPlayerHTML5Api29.reload(o.currentTime);}else{this.$VideoPlayerHTML5Api28.src=this.$VideoPlayerHTML5Api55();this.$VideoPlayerHTML5Api28.preload=o.preload;}c('seekHTMLMediaElementTo')(this.$VideoPlayerHTML5Api28,o.currentTime,function(){this.$VideoPlayerHTML5Api53();if(this.$VideoPlayerHTML5Api1){this.$VideoPlayerHTML5Api28.muted=this.$VideoPlayerHTML5Api1.mutedState;this.$VideoPlayerHTML5Api1=null;this.emit('restoredAfterAbort');}this.$VideoPlayerHTML5Api16=false;c('onCanPlayHTMLMediaElement').once(this.$VideoPlayerHTML5Api28,function(){return this.$VideoPlayerHTML5Api61();}.bind(this));}.bind(this));};n.prototype.abortLoading=function(o){'use strict';o=o||{};if(this.$VideoPlayerHTML5Api1)return;if(!o.disableStillFrame)this.$VideoPlayerHTML5Api93();var p=this.$VideoPlayerHTML5Api28.currentTime,q=this.isMuted(),r=this.$VideoPlayerHTML5Api28.duration,s=this.$VideoPlayerHTML5Api28.paused,t=this.$VideoPlayerHTML5Api28.preload;this.$VideoPlayerHTML5Api27=false;this.$VideoPlayerHTML5Api1={mutedState:q,currentTime:p,playbackDuration:r,preload:t};if(s&&this.$VideoPlayerHTML5Api13)c('dispatchEvent')(this.$VideoPlayerHTML5Api28,'pause');this.emit('abortedLoading');if(this.$VideoPlayerHTML5Api29){this.$VideoPlayerHTML5Api29.unload();return;}this.$VideoPlayerHTML5Api28.preload='none';this.$VideoPlayerHTML5Api28.removeAttribute('src');this.$VideoPlayerHTML5Api28.load();};n.prototype.setPreferredVideoQuality=function(o){'use strict';this.$VideoPlayerHTML5Api26=o;if(!this.$VideoPlayerHTML5Api7)return;if(this.$VideoPlayerHTML5Api29&&c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Api29.setPreferredVideoQuality(o);return;}if(!c('VideoPlayerHTML5Experiments').newStateChangeCalculation){this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').PAUSED,this.addWatchTimeData({reason:'toggle_hd'}));this.$VideoPlayerHTML5Api48(c('VideoPlayerLoggerEvent').REQUESTED_PLAYING,{reason:c('VideoPlayerReason').USER});}if(this.$VideoPlayerHTML5Api29&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Api29.setPreferredVideoQuality(o);return;}this.$VideoPlayerHTML5Api14=!this.$VideoPlayerHTML5Api14;var p=this.$VideoPlayerHTML5Api28.currentTime,q=this.$VideoPlayerHTML5Api28.muted,r=this.$VideoPlayerHTML5Api28.volume;this.$VideoPlayerHTML5Api28.src=this.$VideoPlayerHTML5Api55();c('onCanPlayHTMLMediaElement').once(this.$VideoPlayerHTML5Api28,function(){this.$VideoPlayerHTML5Api28.currentTime=p;this.$VideoPlayerHTML5Api28.muted=q;this.$VideoPlayerHTML5Api28.volume=r;this.$VideoPlayerHTML5Api61();this.emit('qualityChange');}.bind(this));this.$VideoPlayerHTML5Api25=true;this.$VideoPlayerHTML5Api63();};n.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Api26=null;if(this.$VideoPlayerHTML5Api29)this.$VideoPlayerHTML5Api29.unsetPreferredVideoQuality();};n.prototype.getPreferredVideoQuality=function(){'use strict';return this.$VideoPlayerHTML5Api26;};n.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Api29)return this.$VideoPlayerHTML5Api29.getSelectedVideoQuality();return this.$VideoPlayerHTML5Api14?'HD':'SD';};n.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Api6.fallbackSources)return (this.$VideoPlayerHTML5Api6.fallbackSources.HD?['SD','HD']:['SD']);if(!this.$VideoPlayerHTML5Api7)return [];if(this.$VideoPlayerHTML5Api29)return this.$VideoPlayerHTML5Api29.getAvailableVideoQualities();return this.$VideoPlayerHTML5Api7.hasHD()?['SD','HD']:['SD'];};n.prototype.getIsAbrEnabled=function(){'use strict';if(this.$VideoPlayerHTML5Api29)return this.$VideoPlayerHTML5Api29.getIsAbrEnabled();return false;};n.prototype.canAutoSelectVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Api29)return this.$VideoPlayerHTML5Api29.canAutoSelectVideoQuality();return false;};n.prototype.setPreloadDisabled=function(o){'use strict';if(this.$VideoPlayerHTML5Api29)this.$VideoPlayerHTML5Api29.setPreloadDisabled(o);};n.prototype.$VideoPlayerHTML5Api50=function(){'use strict';var o={projectionType:this.$VideoPlayerHTML5Api56(),fieldOfView:this.$VideoPlayerHTML5Api6.sphericalFieldOfView,expansionCoef:1.01},p={videoID:this.getVideoID(),playerID:this.$VideoPlayerHTML5Api6.id};if(this.$VideoPlayerHTML5Api6.sphericalConfig)Object.assign(o,this.$VideoPlayerHTML5Api6.sphericalConfig);if(this.$VideoPlayerHTML5Api6.sphericalPlayerConfig)Object.assign(p,this.$VideoPlayerHTML5Api6.sphericalPlayerConfig);try{this.$VideoPlayerHTML5Api30=new this.$VideoPlayerHTML5Api6.VideoPlayerHTML5Spherical(this.$VideoPlayerHTML5Api28,o,p);}catch(q){c('setImmediate')(function(){return this.emit('error',{error:'SPHERICAL_SETUP_FAILED',message:q.message});}.bind(this));}if(this.$VideoPlayerHTML5Api30){var r=this.$VideoPlayerHTML5Api30;r.addListener('DOM/click',function(s){return this.$VideoPlayerHTML5Api76(s);}.bind(this));r.addListener('updateViewportBegin',function(){return this.$VideoPlayerHTML5Api87();}.bind(this));r.addListener('renderingContextLost',function(){if(!this.$VideoPlayerHTML5Api57())this.pause(c('VideoPlayerReason').SPHERICAL_SWITCH_CANVAS);}.bind(this));['updateViewportBegin','updateViewportMove','updateViewportEnd','dimensionsChange','viewportChange','wheelScroll','error'].forEach(c('forwardEvent').bind(null,r,this));if(!this.$VideoPlayerHTML5Api29)this.$VideoPlayerHTML5Api28.src=this.$VideoPlayerHTML5Api55();}};n.getPlayerVersion=function(){'use strict';return c('VideoPlayerVersions').PLEASANTVILLE;};n.prototype.$VideoPlayerHTML5Api56=function(){'use strict';return this.$VideoPlayerHTML5Api7.getProjection();};n.prototype.$VideoPlayerHTML5Api61=function(){'use strict';if(this.$VideoPlayerHTML5Api25){if(this.$VideoPlayerHTML5Api3)var o=c('EventListener').capture(this.$VideoPlayerHTML5Api28.parentNode,'play',function(q){c('Event').kill(q);o.remove();});var p=null;if(this.$VideoPlayerHTML5Api29){p=this.$VideoPlayerHTML5Api29.play();}else{if(c('VideoPlayerHTML5Experiments').preloadOnPlay)this.$VideoPlayerHTML5Api28.preload='auto';p=this.$VideoPlayerHTML5Api28.play();}if(p&&p['catch'])p['catch'](function(q){return false;});}this.$VideoPlayerHTML5Api62();};n.getStreamTypeFromConfig=function(o){'use strict';var p=new (c('VideoData'))(o.videoData[0]);return p.getStreamType();};n.getIsPlayingLiveFromConfig=function(o){'use strict';var p=new (c('VideoData'))(o.videoData[0]);return p.isLiveStream();};n.networkTimeout=5000;f.exports=n;}),null);
__d('SphericalVideoPlayerEvents',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={SET_RELATIVE_SPHERICAL_ORIENTATION:'setRelativeSphericalOrientation',SET_ABSOLUTE_SPHERICAL_ORIENTATION:'setAbsoluteSphericalOrientation',SET_FIELD_OF_VIEW:'setFieldOfView'};}),null);
__d('VideoHomeViewportTracking',['csx','DOM','VideoHomeEvents','VideoHomeEventTargets','VideoHomeLoggerFields','ViewportTracking','viewportTrackingBuilder'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();function k(n){return {getDataFromConfig:function o(p,q){q.log=p.log;},getAllStories:function o(){var p=c('DOM').scry(n.container,"._5bll");return p.filter(function(q){return q.getAttribute('data-home-vpv');});},getStoryID:function o(p){var q=JSON.parse(p.getAttribute('data-home-vpv'));return q&&q.storyID;},getDataToLog:function o(p){return JSON.parse(p.getAttribute('data-home-vpv'));}};}i=babelHelpers.inherits(l,c('ViewportTracking'));j=i&&i.prototype;l.prototype.sendDataToLog=function(n,o){var p={};p[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').VPV;p[c('VideoHomeLoggerFields').SESSION_ID]=o.sessionID;p[c('VideoHomeLoggerFields').DATA_SOURCE]=o.dataSource;p[c('VideoHomeLoggerFields').CHANNEL_ID]=o.channelID;p[c('VideoHomeLoggerFields').EVENT_TARGET]=c('VideoHomeEventTargets').STORY;p[c('VideoHomeLoggerFields').EVENT_TARGET_ID]=o.storyID;p[c('VideoHomeLoggerFields').CHANNEL_POSITION]=o.channelPosition;p[c('VideoHomeLoggerFields').POSITION_IN_CHANNEL]=o.positionInChannel;p[c('VideoHomeLoggerFields').TRACKING_DATA]=o.trackingData;this.log&&this.log(p);};l.prototype.cleanup=function(){m.clearSingleton();j.cleanup.call(this);};function l(){i.apply(this,arguments);}var m=c('viewportTrackingBuilder')(function(n){var o=new l(k(n));o.init(n);return o;});f.exports=m;}),null);
__d('VideoHomeLogger',['Arbiter','Banzai','BanzaiLogger','BigPipe','Run','StreamViewportTracking','VideoHomeExitPointTypes','VideoHomeEvents','VideoHomeLoggerFields','VideoHomeViewportTracking','ViewportTrackingConfig'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=void 0,i=void 0,j=void 0,k=0,l={init:function m(n){j=n.session_id;k=Date.now();var o=c('StreamViewportTracking').factory(c('ViewportTrackingConfig'),n.container);i=o;var p=c('VideoHomeViewportTracking').factory({log:l.log,container:n.container,record_delay:0});h=p;c('Arbiter').subscribe(c('BigPipe').Events.init,function(r,s){var t=s.arbiter;if(t){t.subscribe(c('BigPipe').Events.tti,function(event,u){var v={};v[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').TTI;v[c('VideoHomeLoggerFields').SESSION_ID]=j;v[c('VideoHomeLoggerFields').PERF_TIME_MS]=Date.now()-k;l.log(v);});t.subscribe(c('BigPipe').Events.loaded,function(event,u){var v={};v[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').E2E;v[c('VideoHomeLoggerFields').SESSION_ID]=j;v[c('VideoHomeLoggerFields').PERF_TIME_MS]=Date.now()-k;l.log(v);});}});function q(){if(j!==n.session_id)return;var r={};r[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').SESSION_END;r[c('VideoHomeLoggerFields').SESSION_ID]=j;r[c('VideoHomeLoggerFields').EXIT_POINT_TYPE]=c('VideoHomeExitPointTypes').UNKNOWN;l.log(r);o.updateTimeTrackingData(true);p.updateTimeTrackingData(true);j=null;i=null;h=null;}c('Run').onLeave(q);c('Banzai').subscribe(c('Banzai').SHUTDOWN,q);},updateViewportTracking:function m(){if(i){i.fireTimer();i.updateTimeTrackingData(false,'scroll');}if(h){h.fireTimer();h.updateTimeTrackingData(false,'scroll');}},_pause:function m(n,o){if(j){var p={};p[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').SESSION_PAUSE;p[c('VideoHomeLoggerFields').SESSION_ID]=j;p[c('VideoHomeLoggerFields').EXIT_POINT_TYPE]=c('VideoHomeExitPointTypes').CHANNEL;p[c('VideoHomeLoggerFields').EXIT_POINT_VALUE]=o;l.log(p);}},_resume:function m(n,o){if(j){var p={};p[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').SESSION_RESUME;p[c('VideoHomeLoggerFields').SESSION_ID]=j;p[c('VideoHomeLoggerFields').ENTRY_POINT_TYPE]=c('VideoHomeExitPointTypes').CHANNEL;p[c('VideoHomeLoggerFields').EXIT_POINT_VALUE]=o;l.log(p);}},getPlayerLoggingData:function m(){return {video_home_session_id:j};},log:function m(n){if(j&&k){var o=Date.now()-k;n[c('VideoHomeLoggerFields').TIME_SINCE_START]=o+.001;}c('BanzaiLogger').log('VideoHomeLoggerConfig',n);}};c('Arbiter').subscribe('LogEnterChannel',l._pause);c('Arbiter').subscribe('LogExitChannel',l._resume);f.exports=l;}),null);
__d('VideoPlayerLoggerPlayerStates',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={STARTED:'started',UNPAUSED:'unpaused'};}),null);
__d('VideoPlayerLogger',['Banzai','ErrorUtils','TimeSpentImmediateActiveSecondsLogger','VideoPlayerHTML5Experiments','VideoPlayerLoggerEvent','VideoPlayerLoggerErrors','VideoPlayerLoggerErrorStates','VideoPlayerLoggerFallbackReasons','VideoPlayerLoggerSource','VideoPlayerInitializationEvent','VideoPlayerLoggerPlayerStates','ex','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('VideoPlayerHTML5Experiments').useBanzaiVitalForLive,i='video_player',j=5000,k=function m(){return c('VideoPlayerHTML5Experiments').useMonotonicallyIncreasingTimers?c('performanceAbsoluteNow')():Date.now();};function l(m,n){this.$VideoPlayerLogger2=m;this.$VideoPlayerLogger3=null;this.$VideoPlayerLogger6={};this.$VideoPlayerLogger4=n;this.$VideoPlayerLogger8=0;this.$VideoPlayerLogger9=0;this.$VideoPlayerLogger7=[];this.$VideoPlayerLogger15();}l.prototype.updateSource=function(m){this.$VideoPlayerLogger2=m;};l.prototype.getSource=function(){return this.$VideoPlayerLogger2;};l.prototype.logEvent=function(event,m){m=babelHelpers['extends']({},m,this.$VideoPlayerLogger4);m.initial_event=!this.$VideoPlayerLogger6.hasOwnProperty(event);if(!m.hasOwnProperty('time_ms'))m.time_ms=k();if(!m.hasOwnProperty('time'))m.time=Math.round(m.time_ms/1000);m.is_stalling=this.$VideoPlayerLogger16();m.error_user_info=this.$VideoPlayerLogger17(m.error_user_info);if(this.$VideoPlayerLogger3)Object.assign(m,this.$VideoPlayerLogger3);switch(event){case c('VideoPlayerInitializationEvent').PLAYER_INITIALIZATION:this.$VideoPlayerLogger5=m.time_ms;break;case c('VideoPlayerInitializationEvent').REQUESTED_PLAYING:case c('VideoPlayerInitializationEvent').STARTED_PLAYING:case c('VideoPlayerInitializationEvent').PLAYER_ALLOCATED:case c('VideoPlayerInitializationEvent').PLAYER_SENT_REQUEST:case c('VideoPlayerInitializationEvent').PLAYER_RECEIVED_FIRST_BYTE:case c('VideoPlayerInitializationEvent').BUFFER_READY:case c('VideoPlayerInitializationEvent').METADATA_READY:if(!m.initial_event)break;m.elapsed_time_since_init=Date.now()-this.$VideoPlayerLogger5;break;}switch(event){case c('VideoPlayerLoggerEvent').REQUESTED_PLAYING:this.$VideoPlayerLogger15();this.$VideoPlayerLogger18();if(this.$VideoPlayerLogger6[c('VideoPlayerLoggerEvent').STARTED_PLAYING]){m.state=c('VideoPlayerLoggerPlayerStates').UNPAUSED;}else m.state=c('VideoPlayerLoggerPlayerStates').STARTED;break;case c('VideoPlayerLoggerEvent').STARTED_PLAYING:case c('VideoPlayerLoggerEvent').UNPAUSED:case c('VideoPlayerLoggerEvent').FINISHED_PLAYING:case c('VideoPlayerLoggerEvent').CANCELLED_REQUESTED_PLAYING:case c('VideoPlayerLoggerEvent').ERROR:case c('VideoPlayerLoggerEvent').PAUSED:if(event===c('VideoPlayerLoggerEvent').STARTED_PLAYING||event===c('VideoPlayerLoggerEvent').UNPAUSED)this.$VideoPlayerLogger7=[];if(event===c('VideoPlayerLoggerEvent').ERROR&&m.state!==c('VideoPlayerLoggerErrorStates').PLAYBACK_FAILURE)break;if(event===c('VideoPlayerLoggerEvent').CANCELLED_REQUESTED_PLAYING)if(this.$VideoPlayerLogger6[c('VideoPlayerLoggerEvent').STARTED_PLAYING]){m.state=c('VideoPlayerLoggerPlayerStates').UNPAUSED;}else m.state=c('VideoPlayerLoggerPlayerStates').STARTED;this.$VideoPlayerLogger19();if(event===c('VideoPlayerLoggerEvent').PAUSED||event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING)m.recent_stalls_count=this.$VideoPlayerLogger20();this.$VideoPlayerLogger21();this.$VideoPlayerLogger22(m);this.$VideoPlayerLogger15();break;}var n={logData:m,event:event,scriptPath:this.$VideoPlayerLogger1,source:this.$VideoPlayerLogger2};if(!event)c('ErrorUtils').reportError(new Error(c('ex')('VideoPlayerLogger: Missing event name')),false);this.$VideoPlayerLogger6[event]=true;if(this.$VideoPlayerLogger2===c('VideoPlayerLoggerSource').ANIMATED_IMAGE_SHARE)return null;if(m.ad_client_token||h&&m.playback_is_live_streaming){c('Banzai').post(i,n,c('Banzai').VITAL);}else c('Banzai').post(i,n);if(event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING||event===c('VideoPlayerLoggerEvent').PAUSED){var o=m.time_ms||k(),p=m.video_time_position-m.video_last_start_time_position;if(p>=0)c('TimeSpentImmediateActiveSecondsLogger').maybeReportActiveInterval('video',o-Math.floor(p*1000),o);}return n;};l.prototype.setScriptPath=function(m){this.$VideoPlayerLogger1=m;};l.prototype.setFTData=function(m){this.$VideoPlayerLogger3=m;};l.prototype.startBuffering=function(m){this.$VideoPlayerLogger18(m);};l.prototype.endBuffering=function(){this.$VideoPlayerLogger19();this.$VideoPlayerLogger21();};l.prototype.$VideoPlayerLogger16=function(){return this.$VideoPlayerLogger12>0;};l.prototype.$VideoPlayerLogger18=function(m){if(this.$VideoPlayerLogger16())return;this.$VideoPlayerLogger12=Date.now();if(m!==undefined&&this.$VideoPlayerLogger6[c('VideoPlayerLoggerEvent').STARTED_PLAYING])this.$VideoPlayerLogger13=m;};l.prototype.$VideoPlayerLogger23=function(){return this.$VideoPlayerLogger16()?Date.now()-this.$VideoPlayerLogger12:0;};l.prototype.$VideoPlayerLogger19=function(){if(this.$VideoPlayerLogger16()){var m=this.$VideoPlayerLogger23();if(this.$VideoPlayerLogger13!==null)this.$VideoPlayerLogger14=m;this.$VideoPlayerLogger11+=m;this.$VideoPlayerLogger9+=m;this.$VideoPlayerLogger10++;this.$VideoPlayerLogger8++;}};l.prototype.$VideoPlayerLogger21=function(){if(this.$VideoPlayerLogger16())this.$VideoPlayerLogger12=0;};l.prototype.$VideoPlayerLogger17=function(m){if(m&&typeof m=='object')return JSON.stringify(m);return m;};l.prototype.getCumulativeStallCount=function(){return this.$VideoPlayerLogger8;};l.prototype.getCumulativeStallTime=function(){return this.$VideoPlayerLogger9+this.$VideoPlayerLogger23();};l.prototype.$VideoPlayerLogger22=function(m){m.stall_time=Math.max(0,this.$VideoPlayerLogger11);m.stall_count=this.$VideoPlayerLogger10;if(this.$VideoPlayerLogger14){m.first_stall_time=this.$VideoPlayerLogger14;m.first_stall_start_position=this.$VideoPlayerLogger13;}};l.prototype.$VideoPlayerLogger20=function(){var m=k(),n=m-j;this.$VideoPlayerLogger7=this.$VideoPlayerLogger7.filter(function(o){return o>=n;});if(this.$VideoPlayerLogger10>0)this.$VideoPlayerLogger7.push(m);return this.$VideoPlayerLogger7.length;};l.prototype.$VideoPlayerLogger15=function(){this.$VideoPlayerLogger11=0;this.$VideoPlayerLogger12=0;this.$VideoPlayerLogger10=0;this.$VideoPlayerLogger13=null;this.$VideoPlayerLogger14=0;};l.Sources=c('VideoPlayerLoggerSource');l.Errors=c('VideoPlayerLoggerErrors');l.FallbackReasons=c('VideoPlayerLoggerFallbackReasons');l.ErrorStates=c('VideoPlayerLoggerErrorStates');l.PlayerStates=c('VideoPlayerLoggerPlayerStates');f.exports=l;}),null);
__d('VideoPlayerUIComponentDrawerController',['VideoPlayerUIComponentDrawer'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function j(k,l){return k.getPriority()-l.getPriority();};function i(){this.$VideoPlayerUIComponentDrawerController1=[];}i.prototype.register=function(j,k){var l=new (c('VideoPlayerUIComponentDrawer'))(j,k);l.addListener('reserve',function(){return this.$VideoPlayerUIComponentDrawerController2(j);}.bind(this));l.addListener('release',function(){return this.$VideoPlayerUIComponentDrawerController2(j);}.bind(this));l.addListener('heightChange',function(){return this.$VideoPlayerUIComponentDrawerController2(j);}.bind(this));this.$VideoPlayerUIComponentDrawerController1.push(l);this.$VideoPlayerUIComponentDrawerController1.sort(h);return l;};i.prototype.$VideoPlayerUIComponentDrawerController2=function(j){var k=0;this.$VideoPlayerUIComponentDrawerController1.forEach(function(l){if(l.getPriority()>j)l.emit('reposition',k);if(l.isReserved())k+=l.getHeight();});};f.exports=i;}),null);
__d("XVideoDataController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/video_data\/",{video_id:{type:"String",required:true},width:{type:"Int"},height:{type:"Int"},scrubbing_preference:{type:"Int"},source:{type:"String"},preferred_projection:{type:"Enum",enumType:1},supports_html5_video:{type:"Bool",defaultValue:true},is_ad:{type:"Bool",defaultValue:false},force_flash:{type:"Bool",defaultValue:false}});}),null);
__d('VideoPlayerController',['csx','cx','invariant','Promise','Arbiter','Banzai','CSS','DOM','DOMDimensions','DOMQuery','EventEmitter','FullScreen','JSLogger','JSResource','Map','VideoPlayerReason','Run','ScriptPath','SphericalVideoPlayerEvents','SubscriptionsHandler','URI','VideoChannelLogger','VideoChannelViewChainLengthManager','VideoHomeLogger','VideoMimeTypes','VideoPermalinkURI','VideoPlayerApiEvents','VideoPlayerExperiments','VideoPlayerFallbackEvents','VideoPlayerHTML5Experiments','VideoPlayerInitializationEvent','VideoPlayerLogger','VideoPlayerLoggerErrorStates','VideoPlayerLoggerEvent','VideoPlayerLoggerSource','VideoPlayerResizeSettings','VideoPlayerStates','VideoPlayerUIComponentDrawer','VideoPlayerUIComponentDrawerController','VideoPlayerVolumeSettings','VideosRenderingInstrumentation','Visibility','XVideoDataController','canVideoPlayType','collectDataAttributes','enumerate','forwardEvent','getElementPosition','getFullScreenElement','getViewportDimensions','ifRequired','logVideosClickTracking','mapObject','performanceAbsoluteNow','uniqueID'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=5,n=1;function o(){return c('VideoPlayerHTML5Experiments').useMonotonicallyIncreasingTimers?c('performanceAbsoluteNow')():Date.now();}k=babelHelpers.inherits(p,c('EventEmitter'));l=k&&k.prototype;function p(q,r){var s=q.video_id,t=q.video_ids,u=q.video_url,v=q.video_urls,w=q.chaining_token,x=q.video_channel_id,y=q.source,z=q.ad_client_token,aa=q.should_autoplay,ba=q.player_version,ca=q.autoplay_setting,da=q.apiModule,ea=q.apiConfig,fa=q.useInlineFallback,ga=q.accessToken,ha=q.projection,ia=q.playerOrigin,ja=q.playerSuborigin,ka=q.isBroadcast,la=q.components,ma=q.trackingCodes,na=q.alwaysShowCaptions,oa=q.disableLogging,pa=q.componentDependencies,qa=r.root_element,ra=r.container_element,sa=r.video_element;'use strict';l.constructor.call(this);if(aa===undefined)throw new Error('Must pass should_autoplay to '+this.constructor.name+'!');this.$VideoPlayerController18=new (c('VideoPlayerUIComponentDrawerController'))();this.$VideoPlayerController12=new (c('Map'))();this.$VideoPlayerController43=ha;this.$VideoPlayerController1=ga;this.$VideoPlayerController51=!!aa;this.$VideoPlayerController8=ca;this.$VideoPlayerController2=z;this.$VideoPlayerController39=false;this.$VideoPlayerController63=sa;this.$VideoPlayerController50=qa;this.$VideoPlayerController13=ra;this.$VideoPlayerController25=false;this.$VideoPlayerController26=false;this.$VideoPlayerController42=ba;this.$VideoPlayerController62=s||t&&t[0]||'';this.$VideoPlayerController64=u||v&&v[0];this.$VideoPlayerController10=w;this.$VideoPlayerController60=x;this.$VideoPlayerController55={};this.$VideoPlayerController19=new (c('Map'))();this.$VideoPlayerController40=ia;this.$VideoPlayerController41=ja||y;this.$VideoPlayerController24=ka;this.$VideoPlayerController57=ma;this.$VideoPlayerController3=na;this.$VideoPlayerController23=c('uniqueID')();if(pa)this.$VideoPlayerController66={dependencies:pa,callbacks:[]};this.$VideoPlayerController5=da;this.$VideoPlayerController4=ea;this.$VideoPlayerController30=this.$VideoPlayerController5.getStreamTypeFromConfig(this.$VideoPlayerController4);this.$VideoPlayerController29=this.$VideoPlayerController5.getIsPlayingLiveFromConfig(this.$VideoPlayerController4);this.$VideoPlayerController58=!!fa;this.$VideoPlayerController16=0;var ta=c('URI').getRequestURI(),ua=c('VideoPermalinkURI').parse(ta),va=parseFloat(ta.getQueryData().t),wa=ua?ua.video_id==this.$VideoPlayerController62:false;if(va&&wa&&this.$VideoPlayerController4)this.$VideoPlayerController4.startTimestamp=va;this.$VideoPlayerController14=null;this.$VideoPlayerController37=null;this.$VideoPlayerController52=y;this.$VideoPlayerController33=new (c('VideoPlayerLogger'))(y);if(this.$VideoPlayerController52===c('VideoPlayerLoggerSource').CHANNEL)this.setIsInChannel(true);this.collectFeedTrackingData();this.$VideoPlayerController33.setScriptPath(c('ScriptPath').getScriptPath());this.$VideoPlayerController45=c('VideosRenderingInstrumentation').retrieveRenderTime(this.$VideoPlayerController50);this.$VideoPlayerController44=o()-this.$VideoPlayerController45;if(ea)ea.subtitleDrawer=this.registerDrawer(c('VideoPlayerUIComponentDrawer').priorities.Subtitles,0);this.$VideoPlayerController53='loading';this.logEvent(c('VideoPlayerInitializationEvent').PLAYER_INITIALIZATION,{time_ms:this.$VideoPlayerController45});this.$VideoPlayerController67(false);if(this.$VideoPlayerController5.isImplementationUnavailable(this.$VideoPlayerController58)){if(this.$VideoPlayerController58){this.$VideoPlayerController68();}else{this.$VideoPlayerController69();return;}}else this.$VideoPlayerController70();c('Banzai').subscribe(c('Banzai').SHUTDOWN,function(){this.pause(c('VideoPlayerReason').UNLOADED);this.destroy();}.bind(this));if(this.$VideoPlayerController51)if(c('Visibility').isHidden()){c('Visibility').once(c('Visibility').VISIBLE,function(){this.play(c('VideoPlayerReason').AUTOPLAY);}.bind(this));}else this.play(c('VideoPlayerReason').AUTOPLAY);this.$VideoPlayerController17=0;this.$VideoPlayerController49=false;this.$VideoPlayerController20=this.$VideoPlayerController71();this.$VideoPlayerController7=new (c('SubscriptionsHandler'))();this.$VideoPlayerController7.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(xa,ya){if(ya.type==='DialogX'||ya.type==='PhotoSnowlift'){this.$VideoPlayerController17=this.$VideoPlayerController17+1;if(this.$VideoPlayerController17>0)if(this.isState('playing')&&!this.getIsInChannel()){this.pause(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoPlayerController49=true;}}}.bind(this)),c('Arbiter').subscribe('layer_hidden',function(xa,ya){if(ya.type==='DialogX'||ya.type==='PhotoSnowlift'){this.$VideoPlayerController17=this.$VideoPlayerController17-1;if(this.$VideoPlayerController17===0)if(this.$VideoPlayerController49&&!this.getIsInChannel()){this.play(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoPlayerController49=false;}}}.bind(this)),c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(xa,ya){return this.$VideoPlayerController72(xa,ya);}.bind(this)));c('Run').onLeave(function(){this.pause(c('VideoPlayerReason').UNLOADED);this.destroy();}.bind(this));this.$VideoPlayerController11=la||[];this.$VideoPlayerController11.forEach(function(xa){return xa.enable(this);}.bind(this));this.$VideoPlayerController36=1;}p.prototype.destroy=function(q){'use strict';q=q||{};if(this.isState('destroyed')||this.$VideoPlayerController26)return;this.$VideoPlayerController26=true;var r=this.$VideoPlayerController11;for(var s=r.length-1;s>=0;s--)r[s].disable(this);this.getVideoAPI().destroy(q);this.setState('destroyed');this.$VideoPlayerController7.release();this.removeAllListeners();};p.prototype.$VideoPlayerController73=function(){'use strict';var q=c('DOMQuery').scry(this.getVideoNode(),'[data-fallback-markup="1"]');if(!q.length)return c('Promise').reject();c('DOM').replace(this.getVideoNode(),q[0]);this.$VideoPlayerController63=q[0];return c('JSResource')('VideoPlayerFlashApi').__setRef('VideoPlayerController').load();};p.prototype.$VideoPlayerController68=function(){'use strict';this.logEvent(c('VideoPlayerLoggerEvent').SWITCHED_IMPLEMENTATION,{error_user_info:this.getDebugInfo()});this.$VideoPlayerController73().then(function(q){if(q.isImplementationUnavailable()){return c('Promise').reject();}else return c('Promise').resolve(q);}).done(function(q){this.$VideoPlayerController5=q;this.$VideoPlayerController70();}.bind(this),function(q){return this.$VideoPlayerController69();}.bind(this));};p.prototype.collectFeedTrackingData=function(){'use strict';var q=null;if(this.$VideoPlayerController57){var r={tn:'','tn-debug':','},s={};for(var t=0;t<this.$VideoPlayerController57.length;t++){var u=JSON.parse(this.$VideoPlayerController57[t]);if(!Array.isArray(u))for(var v in u)if(r[v]!==undefined){if(s[v]===undefined)s[v]=[];s[v].push(u[v]);}else if(s[v]===undefined)s[v]=u[v];}for(var w in r)if(s[w]!==undefined)s[w]=s[w].join(r[w]);q={ft:s};}else q=c('collectDataAttributes')(this.getRootNode(),['ft']);this.$VideoPlayerController33.setFTData(q);};p.prototype.$VideoPlayerController72=function(q,r){'use strict';r.video_player_debug_info=r.video_player_debug_info||{};r.video_player_debug_info[this.getVideoID()]=this.getDebugInfo();r.video_hardware_info=this.$VideoPlayerController74();};p.prototype.$VideoPlayerController74=function(){'use strict';try{var r=document.createElement('canvas'),s=r.getContext('webgl')||r.getContext('experimental-webgl'),t=s.getExtension('WEBGL_debug_renderer_info');return t&&{vendor:s.getParameter(t.UNMASKED_VENDOR_WEBGL),renderer:s.getParameter(t.UNMASKED_RENDERER_WEBGL)};}catch(q){}return null;};p.prototype.setStillFrameEnabled=function(q){'use strict';var r=this.getVideoAPI();if(r.setStillFrameEnabled)r.setStillFrameEnabled(q);};p.prototype.isFallbackRecoverable=function(){'use strict';return !!this.$VideoPlayerController54;};p.prototype.setFallbackSources=function(q){'use strict';this.$VideoPlayerController54=q;this.emit(c('VideoPlayerFallbackEvents').RECOVER);};p.prototype.setRelativeSphericalOrientation=function(q,r){'use strict';this.getVideoAPI().setRelativeSphericalOrientation(q,r);this.emit(c('SphericalVideoPlayerEvents').SET_RELATIVE_SPHERICAL_ORIENTATION,q,r);};p.prototype.setSphericalOrientation=function(q,r){'use strict';this.getVideoAPI().setSphericalOrientation(q,r);this.emit(c('SphericalVideoPlayerEvents').SET_ABSOLUTE_SPHERICAL_ORIENTATION,q,r);};p.prototype.setSphericalFieldOfView=function(q){'use strict';this.getVideoAPI().setSphericalFieldOfView(q);this.emit(c('SphericalVideoPlayerEvents').SET_FIELD_OF_VIEW,q);};p.prototype.getSphericalViewportDimensions=function(){'use strict';return this.getOption('SphericalVideoPlayer','getDimensions')||this.getVideoAPI().getSphericalViewportDimensions();};p.prototype.isSpherical=function(){'use strict';return this.$VideoPlayerController4?this.$VideoPlayerController4.isSpherical:false;};p.prototype.getVideoPlayerID=function(){'use strict';return this.$VideoPlayerController23;};p.prototype.setLogEntryPropertyGetters=function(q){'use strict';Object.keys(q).forEach(function(r){var s=q[r];if(typeof s==='function'){this.$VideoPlayerController19.set(r,s);}else this.$VideoPlayerController55[r]=s;}.bind(this));};p.prototype.removeLogEntryPropertyGetters=function(q){'use strict';if(typeof q==='string')q=[q];if(!Array.isArray(q))q=Object.keys(q);q.forEach(function(r){this.$VideoPlayerController19['delete'](r);delete this.$VideoPlayerController55[r];}.bind(this));};p.prototype.$VideoPlayerController70=function(){'use strict';this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return this.onApiReady();}.bind(this));};p.prototype.isImplementationUnavailable=function(){'use strict';return this.$VideoPlayerController5.isImplementationUnavailable(this.$VideoPlayerController58)&&!this.$VideoPlayerController58;};p.prototype.getIsInChannel=function(){'use strict';return this.$VideoPlayerController28;};p.prototype.setIsInChannel=function(q){'use strict';if(q&&c('VideoPlayerLoggerSource').CHANNEL!==this.$VideoPlayerController52){this.$VideoPlayerController33.updateSource(c('VideoPlayerLoggerSource').CHANNEL);this.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED);}else if(!q&&c('VideoPlayerLoggerSource').CHANNEL!==this.$VideoPlayerController52){this.$VideoPlayerController33.updateSource(this.$VideoPlayerController52);this.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED);}this.$VideoPlayerController28=q;};p.prototype.getSource=function(){'use strict';return this.$VideoPlayerController33.getSource();};p.prototype.getPlayerOrigin=function(){'use strict';return this.$VideoPlayerController40;};p.prototype.getPlayerSuborigin=function(){'use strict';return this.$VideoPlayerController41;};p.prototype.hasLooped=function(){'use strict';return this.$VideoPlayerController36>1;};p.prototype.$VideoPlayerController69=function(){'use strict';var q={error:'IMPLEMENTATION_NOT_SUPPORTED',state:c('VideoPlayerLoggerErrorStates').PLAYER_FAILURE,error_description:'Implementation unavailable',error_user_info:this.getDebugInfo()};this.logEvent(c('VideoPlayerLoggerEvent').ERROR,q);this.$VideoPlayerController51=false;};p.prototype.logError=function(q){'use strict';var r=this.$VideoPlayerController31=q,s=r.error,t=r.message,u=r.isPlayback,v=r.httpStatus,w=r.url,x=this.getDebugInfo();delete x.player.loggedError;delete x.player.lastError;var y={error:s,error_description:t,error_user_info:x,error_code:v,resource_url:w,state:u?c('VideoPlayerLoggerErrorStates').PLAYBACK_FAILURE:c('VideoPlayerLoggerErrorStates').PLAYER_FAILURE};this.$VideoPlayerController32=this.logEvent(c('VideoPlayerLoggerEvent').ERROR,y);if(u&&this.$VideoPlayerController39)this.$VideoPlayerController67(false);};p.prototype.setRotation=function(q){'use strict';this.getVideoAPI().setRotation(q);};p.prototype.setDimensions=function(q,r){'use strict';this.$VideoPlayerController13.style.width=q+'px';this.$VideoPlayerController13.style.height=r+'px';this.$VideoPlayerController63.style.width=q+'px';this.$VideoPlayerController63.style.height=r+'px';if(this.isState('loading')){this.$VideoPlayerController46={width:q,height:r};}else if(this.getVideoAPI().setDimensions){if(this.isPlayerVersion('silvercity')&&(this.$VideoPlayerController27||c('VideoPlayerResizeSettings').disable_flash_set_dimensions))return;this.getVideoAPI().setDimensions(q,r);}};p.prototype.isPlayRequestPending=function(){'use strict';return this.$VideoPlayerController39;};p.prototype.$VideoPlayerController67=function(q){'use strict';if(this.$VideoPlayerController39===q)return;this.$VideoPlayerController39=q;this.emit('pendingPlayRequestChanged');};p.prototype.updateAutoplayRestrained=function(){'use strict';c('ifRequired')('VideoPlayerHTML5Shaka',function(q){var r=q.isAutoplayBandwidthRestrained(this.$VideoPlayerController29);this.$VideoPlayerController75(r);}.bind(this));};p.prototype.$VideoPlayerController75=function(q){'use strict';if(q){this.emit('turnOffAutoplay',{reason:'poor_network_quality'});}else this.emit('resumeAutoplay',{reason:'poor_network_quality'});this.getVideoAPI().setPreloadDisabled(q);};p.prototype.play=function(q){'use strict';if(this.$VideoPlayerController66){this.$VideoPlayerController66.callbacks.push(function(){return this.play(q);}.bind(this));return;}this.$VideoPlayerController76();if(!this.$VideoPlayerController38)this.$VideoPlayerController38=q;if(!this.$VideoPlayerController39){this.$VideoPlayerController37=this.$VideoPlayerController77();var r=this.$VideoPlayerController78({debug_reason:q});this.logEvent(c('VideoPlayerLoggerEvent').REQUESTED_PLAYING,r);}this.emit('playRequested',q);this.sendPlayRequest(q);if(q===c('VideoPlayerReason').LOOP)this.$VideoPlayerController36++;};p.prototype.sendPlayRequest=function(q){'use strict';if(this.isState('fallback')){this.emit('fallbackPlay');return;}this.$VideoPlayerController67(true);if(this.isState('loading')){this.$VideoPlayerController47={reason:q};}else{if(!this.getVideoAPI().isMuted()&&this.$VideoPlayerController35)this.logEvent(c('VideoPlayerLoggerEvent').UNMUTED);this.$VideoPlayerController35=false;if(c('VideoPlayerExperiments').universalVolume&&(q===c('VideoPlayerReason').AUTOPLAY||q===c('VideoPlayerReason').USER)&&this.$VideoPlayerController52!==c('VideoPlayerLoggerSource').LIVE_MAP&&!this.getVideoAPI().isMuted()){var r=c('VideoPlayerVolumeSettings').getVolume();if(r!==0){this.setVolume(r);}else{this.setVolume(c('VideoPlayerVolumeSettings').getLastVolumeBeforeMute());if(!this.getVideoAPI().isMuted())this.mute();}}this.getVideoAPI().play(q);}};p.prototype.getOriginalPlayReason=function(){'use strict';return this.$VideoPlayerController38;};p.prototype.reset=function(){'use strict';if(this.isState('loading')||this.isState('fallback')&&!this.isFallbackRecoverable())return;this.resetPositions();this.$VideoPlayerController79();if(this.$VideoPlayerController59&&this.$VideoPlayerController59.destroy)this.$VideoPlayerController59.destroy();this.$VideoPlayerController59=null;this.setState('loading');this.$VideoPlayerController70();};p.prototype.detachRootNode=function(){'use strict';c('DOM').remove(this.$VideoPlayerController50);if(this.isState('fallback')||this.isState('loading'))return;this.setState('loading');this.$VideoPlayerController5.onImplementationReady(this.getVideoNode(),function(){return this.$VideoPlayerController80();}.bind(this));};p.prototype.getVideoAPI=function(){'use strict';!this.$VideoPlayerController59?j(0):void 0;return this.$VideoPlayerController59;};p.prototype.getVideoNode=function(){'use strict';return this.$VideoPlayerController63;};p.prototype.getRootNode=function(){'use strict';return this.$VideoPlayerController50;};p.prototype.$VideoPlayerController80=function(){'use strict';this.setState('ready');this.logEvent(c('VideoPlayerInitializationEvent').PLAYER_ALLOCATED);this.$VideoPlayerController35=!this.getVideoAPI().isMuted();this.$VideoPlayerController56=!this.$VideoPlayerController3&&this.getVideoAPI().areSubtitlesActive();if(this.$VideoPlayerController47){this.sendPlayRequest(this.$VideoPlayerController47.reason);this.$VideoPlayerController47=null;}if(this.$VideoPlayerController46){this.setDimensions(this.$VideoPlayerController46.width,this.$VideoPlayerController46.height);this.$VideoPlayerController46=null;}if(this.$VideoPlayerController48){this.getVideoAPI().unmute();this.$VideoPlayerController48=null;}};p.prototype.onApiReady=function(){'use strict';if(this.$VideoPlayerController4){this.$VideoPlayerController4.id=this.$VideoPlayerController23;if(this.$VideoPlayerController54)this.$VideoPlayerController4.fallbackSources=this.$VideoPlayerController54;}this.$VideoPlayerController59=new this.$VideoPlayerController5(this.getVideoNode(),this.$VideoPlayerController4);this.logEvent(c('VideoPlayerInitializationEvent').PLAYER_ALLOCATED);this.$VideoPlayerController81();this.$VideoPlayerController80();var q={is_auto_played:this.isAutoplayable()};this.logEvent(c('VideoPlayerLoggerEvent').PLAYER_LOADED,q);this.emit('apiReady');};p.prototype.runOnApiReady=function(){var q=arguments.length<=0||arguments[0]===undefined?function(){}:arguments[0];'use strict';if(!this.isState('loading')){q();}else this.once('apiReady',q);};p.prototype.resetPositions=function(){'use strict';this.$VideoPlayerController16=0;};p.prototype.getCurrentTimePosition=function(){'use strict';if(this.isState('playing')){var q=this.getVideoAPI().getCurrentTimePosition();if(q!=null&&q!==undefined)this.$VideoPlayerController16=q;}return this.$VideoPlayerController16;};p.prototype.$VideoPlayerController76=function(){'use strict';if(!this.$VideoPlayerController9){c('VideoChannelViewChainLengthManager').registerChainingInfos(this.getVideoID(),this.$VideoPlayerController10);var q=this.getVideoID();if(this.$VideoPlayerController10){var r=this.$VideoPlayerController10.decode();q=r.root_id;}this.$VideoPlayerController9=c('VideoChannelViewChainLengthManager').getLoggingData(q);}this.$VideoPlayerController61=c('VideoChannelLogger').getPlayerLoggingData();};p.prototype.$VideoPlayerController82=function(q){'use strict';this.$VideoPlayerController67(false);var r=q.position;if(r!==undefined)this.$VideoPlayerController16=r;this.setState('playing');if(this.areHLSActive()){this.$VideoPlayerController83();}else if(this.isRTMP_DEPRECATED())this.$VideoPlayerController84();};p.prototype.$VideoPlayerController85=function(q){'use strict';var r=q.position;if(r!==undefined)this.$VideoPlayerController16=r;this.$VideoPlayerController14=this.getVideoAPI().getCurrentlyPlayingStreamInfoID();};p.prototype.$VideoPlayerController86=function(q){'use strict';var event=q.event;delete q.event;this.logEvent(event,q);};p.prototype.$VideoPlayerController87=function(){'use strict';if(!this.isState('finished'))this.setState('paused');};p.prototype.$VideoPlayerController88=function(q){'use strict';var r=q.position;if(r!==undefined)this.$VideoPlayerController16=r;};p.prototype.$VideoPlayerController89=function(){'use strict';this.setState('finished');this.$VideoPlayerController49=false;};p.prototype.getVolume=function(){'use strict';return this.getVideoAPI().getVolume();};p.prototype.$VideoPlayerController90=function(){'use strict';var q=this.isFullscreen();c('CSS').conditionClass(this.$VideoPlayerController13,"_1hwh",q);c('CSS').conditionClass(this.$VideoPlayerController13,"_52fb",q);if(!q&&this.$VideoPlayerController21){this.$VideoPlayerController21.unsubscribe();this.$VideoPlayerController21=null;}if(this.$VideoPlayerController27!=q){this.logEvent(q?c('VideoPlayerLoggerEvent').ENTERED_FS:c('VideoPlayerLoggerEvent').EXITED_FS);var r=c('DOMDimensions').getElementDimensions(this.$VideoPlayerController13);if(!this.isPlayerVersion('silvercity'))this.getVideoAPI().setDimensions(r.width,r.height);this.emit('toggleFullscreen');c('Arbiter').inform('video_fullscreen_change',{});}this.$VideoPlayerController27=q;};p.prototype.isFullscreen=function(){'use strict';return c('FullScreen').isFullScreen()&&this.$VideoPlayerController13===c('getFullScreenElement')();};p.prototype.toggleFullscreen=function(){'use strict';if(c('FullScreen').toggleFullScreen(this.$VideoPlayerController13)){c('CSS').addClass(this.$VideoPlayerController13,"_1hwh");this.$VideoPlayerController21=c('FullScreen').subscribe('changed',this.$VideoPlayerController90.bind(this));}};p.prototype.instreamVideoStart=function(){'use strict';c('CSS').addClass(this.$VideoPlayerController13,"_24pm");};p.prototype.instreamVideoEnd=function(){'use strict';c('CSS').removeClass(this.$VideoPlayerController13,"_24pm");};p.prototype.unmute=function(){'use strict';if(!this.isState('loading')){this.getVideoAPI().unmute();if(c('VideoPlayerExperiments').universalVolume)this.setVolume(c('VideoPlayerVolumeSettings').getLastVolumeBeforeMute());c('VideoPlayerVolumeSettings').saveVolume(c('VideoPlayerVolumeSettings').getLastVolumeBeforeMute());if(this.$VideoPlayerController56&&this.getVideoAPI().areSubtitlesActive())this.getVideoAPI().toggleSubtitles();}else this.$VideoPlayerController48=true;};p.prototype.isMuted=function(){'use strict';return this.getVideoAPI().isMuted();};p.prototype.mute=function(){'use strict';if(this.$VideoPlayerController56&&!this.getVideoAPI().areSubtitlesActive())this.getVideoAPI().toggleSubtitles();this.getVideoAPI().mute();c('VideoPlayerVolumeSettings').saveVolume(0);};p.prototype.getPlaybackDuration=function(){'use strict';return this.getVideoAPI().getPlaybackDuration();};p.prototype.getVideoID=function(){'use strict';return this.$VideoPlayerController62;};p.prototype.getVideoChannelID=function(){'use strict';return this.$VideoPlayerController60;};p.prototype.getVideoURL=function(){'use strict';return this.$VideoPlayerController64;};p.prototype.$VideoPlayerController81=function(){'use strict';var q=this.getVideoAPI(),r=new (c('SubscriptionsHandler'))();this.$VideoPlayerController6=r;var s={buffered:function(){return this.setBuffering(false);}.bind(this),buffering:function(){return this.setBuffering(true);}.bind(this),beginPlayback:function(t){return this.$VideoPlayerController82(t);}.bind(this),updateStatus:function(t){return this.$VideoPlayerController85(t);}.bind(this),logEvent:function(t){return this.$VideoPlayerController86(t.logData);}.bind(this),pausePlayback:function(){return this.$VideoPlayerController87();}.bind(this),seekEnd:function(t){return this.$VideoPlayerController88(t);}.bind(this),clickForTracking:function(){return c('logVideosClickTracking')(this.getVideoNode());}.bind(this),error:function(t){return this.logError(t);}.bind(this),finishPlayback:function(){return this.$VideoPlayerController89();}.bind(this)};r.addSubscriptions.apply(r,Object.keys(s).map(function(t){return q.addListener(t,s[t]);}));r.addSubscriptions.apply(r,c('VideoPlayerApiEvents').map(function(t){return c('forwardEvent')(q,this,t);}.bind(this)));};p.prototype.$VideoPlayerController79=function(){'use strict';if(this.$VideoPlayerController6)this.$VideoPlayerController6.release();};p.prototype.seek=function(q){'use strict';this.getVideoAPI().seek(q);};p.prototype.pause=function(q){'use strict';if(this.isState('loading')){this.$VideoPlayerController47=null;}else if(this.isState('playing')){this.getVideoAPI().pause(q);}else if(this.$VideoPlayerController39)this.getVideoAPI().pause(q);this.$VideoPlayerController67(false);this.$VideoPlayerController49=false;this.emit('pauseRequested',q);};p.prototype.isPlayerVersion=function(q){'use strict';return this.getPlayerVersion()===q;};p.prototype.isAutoplayable=function(){'use strict';return this.$VideoPlayerController51;};p.prototype.isBuffering=function(){'use strict';return this.$VideoPlayerController25;};p.prototype.setBuffering=function(q){'use strict';if(q!==this.$VideoPlayerController25){this.$VideoPlayerController25=q;if(this.$VideoPlayerController25){this.$VideoPlayerController33.startBuffering(this.getCurrentTimePosition());}else this.$VideoPlayerController33.endBuffering();this.emit('bufferingChanged');}};p.prototype.isLiveVideo=function(){'use strict';return this.$VideoPlayerController29;};p.prototype.isStreamInterrupted=function(){'use strict';var q=this.$VideoPlayerController59;return !!(q&&q.isStreamInterrupted&&q.isStreamInterrupted());};p.prototype.setVolume=function(q){'use strict';c('VideoPlayerVolumeSettings').saveVolume(q);this.getVideoAPI().setVolume(q);};p.prototype.getDOMPosition=function(){'use strict';return c('getElementPosition')(this.getRootNode());};p.prototype.clickVideo=function(){'use strict';this.emit('clickVideo');this.$VideoPlayerController22=true;};p.prototype.hasSeenClick=function(){'use strict';return !!this.$VideoPlayerController22;};p.prototype.isAd=function(){'use strict';return !!this.$VideoPlayerController2;};p.prototype.getAdClientToken=function(){'use strict';return this.$VideoPlayerController2;};p.prototype.$VideoPlayerController91=function(){'use strict';var q=null,r=null,s=false,t=null;if(!this.isState('loading')&&!this.isState('fallback')){if(this.$VideoPlayerController14===null)this.$VideoPlayerController14=this.getVideoAPI().getCurrentlyPlayingStreamInfoID();q=this.getVideoAPI().getEstimatedBandwidth();r=this.getVideoAPI().getAvailableVideoQualities().length;s=this.getVideoAPI().getIsAbrEnabled();t=this.getPlaybackDuration();}var u=babelHelpers['extends']({},this.$VideoPlayerController55);this.$VideoPlayerController19.forEach(function(v,w){u[w]=v(w,this);}.bind(this));return babelHelpers['extends']({ad_client_token:this.$VideoPlayerController2,available_qualities:r,access_token:this.$VideoPlayerController1,autoplay_eligible:this.isAutoplayable(),autoplay_setting:this.$VideoPlayerController8,projection:this.$VideoPlayerController43,player_version:this.getPlayerVersion(),flash_version:c('ifRequired')('Flash',function(v){return v.getVersionString();}),video_id:this.getVideoID(),player_state:this.$VideoPlayerController53,player_origin:this.$VideoPlayerController40,player_suborigin:this.$VideoPlayerController41,playback_is_broadcast:this.$VideoPlayerController24,playback_duration:t,streaming_format:this.getStreamingFormat(),video_time_position:this.getCurrentTimePosition(),playback_is_live_streaming:this.$VideoPlayerController29,video_channel_id:this.$VideoPlayerController60,fbcdn_pop:this.$VideoPlayerController37,representation_id:this.$VideoPlayerController14,video_bandwidth:q,is_abr_enabled:s,feed_position:this.$VideoPlayerController20&&this.$VideoPlayerController20.getAttribute('data-insertion-position')},c('VideoHomeLogger').getPlayerLoggingData(),this.$VideoPlayerController61,this.$VideoPlayerController9,u);};p.prototype.$VideoPlayerController77=function(){'use strict';var q=this.getVideoInfo_DEPRECATED();if(!q)return null;var r=q.resourceUrl,s=/scontent-([a-z]+)\./.exec(r);if(!s)return null;return s[1];};p.prototype.getVideoInfo_DEPRECATED=function(){'use strict';if(this.isState('loading')||this.isState('fallback'))return null;return this.getVideoAPI().getVideoInfo();};p.prototype.getDebugInfo=function(){'use strict';var q=this.getVideoInfo_DEPRECATED(),r={initializationTime:this.$VideoPlayerController44,initializationTimestamp:this.$VideoPlayerController45,version:this.getPlayerVersion(),stallCount:this.$VideoPlayerController33.getCumulativeStallCount(),stallTime:this.$VideoPlayerController33.getCumulativeStallTime(),state:this.$VideoPlayerController53,canPlayType:c('mapObject')(c('VideoMimeTypes'),c('canVideoPlayType')),loggedError:this.$VideoPlayerController32,lastError:this.$VideoPlayerController31},s={videoID:this.getVideoID()};if(!q)return {player:r,currentVideo:s};return {currentVideo:babelHelpers['extends']({},s,{streamType:q.streamType,isLiveStream:q.isLiveStream,liveManifestUrl:q.liveManifestUrl,isHD:q.isHD,hasHD:q.hasHD,resourceUrl:q.resourceUrl,hasSubtitles:q.hasSubtitles,hasRateLimit:!!q.hasUnlimitedSrc,isRateLimited:q.hasUnlimitedSrc&&!q.useUnlimitedSrc,tagHD:q.tagHD,tagSD:q.tagSD,projection:q.projection,streamId:this.$VideoPlayerController14}),player:r};};p.prototype.hasSubtitles=function(){'use strict';return this.getVideoAPI().hasSubtitles();};p.prototype.areSubtitlesActive=function(){'use strict';return this.getVideoAPI().areSubtitlesActive();};p.prototype.areHLSActive=function(){'use strict';return this.getVideoAPI().areHLSActive();};p.prototype.isRTMP_DEPRECATED=function(){'use strict';return this.getVideoAPI().isRTMP();};p.prototype.toggleSubtitles=function(){'use strict';this.getVideoAPI().toggleSubtitles();if(this.areSubtitlesActive()){this.logEvent(c('VideoPlayerLoggerEvent').TOGGLE_SUBTITLE_ON);}else this.logEvent(c('VideoPlayerLoggerEvent').TOGGLE_SUBTITLE_OFF);this.$VideoPlayerController56=false;};p.prototype.isHD=function(){'use strict';return (this.getSelectedVideoQuality()==this.getAvailableVideoQualities().pop());};p.prototype.hasHD=function(){'use strict';return this.getAvailableVideoQualities().length>1;};p.prototype.toggleHD=function(){'use strict';if(this.isHD()){this.setPreferredVideoQuality(this.getAvailableVideoQualities()[0]);}else this.setPreferredVideoQuality(this.getAvailableVideoQualities().pop());};p.prototype.setPreferredVideoQuality=function(q){'use strict';this.getVideoAPI().setPreferredVideoQuality(q);};p.prototype.unsetPreferredVideoQuality=function(){'use strict';this.getVideoAPI().unsetPreferredVideoQuality();};p.prototype.getPreferredVideoQuality=function(){'use strict';return this.getVideoAPI().getPreferredVideoQuality();};p.prototype.getSelectedVideoQuality=function(){'use strict';return this.getVideoAPI().getSelectedVideoQuality();};p.prototype.getAvailableVideoQualities=function(){'use strict';return this.getVideoAPI().getAvailableVideoQualities();};p.prototype.canAutoSelectVideoQuality=function(){'use strict';return this.getVideoAPI().canAutoSelectVideoQuality();};p.prototype.switchToStreamType=function(q){'use strict';this.getVideoAPI().switchToStreamType(q);};p.prototype.$VideoPlayerController84=function(){'use strict';this.getVideoAPI().replaceVideoDataFromURL(c('XVideoDataController').getURIBuilder().setString('video_id',this.getVideoID()).setInt('scrubbing_preference',m).setString('source',this.$VideoPlayerController52).getURI().toString());};p.prototype.$VideoPlayerController83=function(){'use strict';this.getVideoAPI().replaceVideoDataFromURL(c('XVideoDataController').getURIBuilder().setString('video_id',this.getVideoID()).setInt('scrubbing_preference',n).setString('source',this.$VideoPlayerController52).getURI().toString());};p.prototype.$VideoPlayerController78=function(q){'use strict';var r=this.getVideoInfo_DEPRECATED();if(r!=null)return Object.assign({resource_url:r.resourceUrl,liveStream:r.isLiveStream,hd:r.isHD},q);return q;};p.prototype.$VideoPlayerController92=function(){'use strict';var q=this.getDOMPosition(),r=c('getViewportDimensions')().height,s=null;if(q.y<=0){s=q.y;}else if(q.y+q.height<r){s=0;}else s=q.y+q.height-r;return s;};p.prototype.logEvent=function(event,q){'use strict';if(this.$VideoPlayerController65)return;var r=Object.assign(this.$VideoPlayerController91(),q),s=this.getOriginalPlayReason();if(s&&event!==c('VideoPlayerLoggerEvent').DISPLAYED)r.video_play_reason=s;if(event===c('VideoPlayerLoggerEvent').FINISHED_PLAYING)r.viewport_distance=this.$VideoPlayerController92();return this.$VideoPlayerController33.logEvent(event,r);};p.prototype.getState=function(){'use strict';return this.$VideoPlayerController53;};p.prototype.getStreamingFormat=function(){'use strict';var q=this.getVideoInfo_DEPRECATED()||{};return q.streamType||this.$VideoPlayerController30;};p.prototype.setState=function(q){'use strict';if(this.isState(c('VideoPlayerStates').DESTROYED)||this.isState(c('VideoPlayerStates').FALLBACK)&&!this.isFallbackRecoverable())return;this.$VideoPlayerController53=q;if(this.$VideoPlayerController53==='fallback'){c('CSS').addClass(this.getRootNode(),"_3-n5");this.$VideoPlayerController79();}this.emit('stateChange');};p.prototype.isState=function(q){'use strict';return this.$VideoPlayerController53===q;};p.prototype.isIntentionallyViewing=function(){'use strict';return this.isState('playing')&&!this.isMuted();};p.prototype.abortLoading=function(q){'use strict';if(this.isState('loading')||this.isState('fallback'))return;this.getVideoAPI().abortLoading(q||{});};p.prototype.preload=function(){'use strict';if(this.isState('loading')||this.isState('fallback'))return;this.getVideoAPI().preload();};p.prototype.getPlayerVersion=function(){'use strict';if(this.$VideoPlayerController5.getPlayerVersion){return this.$VideoPlayerController5.getPlayerVersion();}else return this.$VideoPlayerController42;};p.prototype.registerOption=function(q,r,s,t){'use strict';var u=this.$VideoPlayerController12.get(q);if(!u){u=new (c('Map'))();this.$VideoPlayerController12.set(q,u);}if(u.has(r))throw new Error('An option can only be registered once for each component');u.set(r,{getter:s,setter:t});this.emit('optionsChange');};p.prototype.unregisterOption=function(q,r){'use strict';var s=this.$VideoPlayerController12.get(q);if(!s)throw new Error('The component "'+q+'" has no options registered');if(!s.has(r))throw new Error('The component "'+q+'" has no option "'+r+'" registered');s['delete'](r);if(!s.size)this.$VideoPlayerController12['delete'](q);this.emit('optionsChange');};p.prototype.getComponents=function(){'use strict';return this.$VideoPlayerController12.keys();};p.prototype.getOptions=function(q){'use strict';var r=this.$VideoPlayerController12.get(q);if(r)return r.keys();return c('enumerate')([]);};p.prototype.hasOption=function(q,r){'use strict';var s=this.$VideoPlayerController12.get(q);if(!s)return false;if(!s.has(r))return false;return true;};p.prototype.getOption=function(q,r){'use strict';var s=this.$VideoPlayerController12.get(q);if(!s)return undefined;var t=s.get(r);if(!t)return undefined;return t.getter();};p.prototype.setOption=function(q,r,s){'use strict';var t=this.$VideoPlayerController12.get(q);if(!t)throw new Error('Component not registered');var u=t.get(r);if(!u)throw new Error('Option not registered');var v=u.setter;if(v)return v(s);throw new Error('Read-only option');};p.prototype.$VideoPlayerController71=function(){'use strict';var q=c('DOMQuery').scry(this.$VideoPlayerController50,"^._5pat");return q.length?q[0]:null;};p.prototype.registerDrawer=function(q,r){'use strict';return this.$VideoPlayerController18.register(q,r);};p.prototype.notifyComponentReady=function(q){'use strict';if(this.$VideoPlayerController66){var r=this.$VideoPlayerController66,s=r.dependencies.filter(function(u){return u!=q;});if(s.length>0){r.dependencies=s;}else{var t=r.callbacks;this.$VideoPlayerController66=null;t.forEach(function(u){return u();});}}};f.exports=p;}),null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerStreamSwitchReasons','VideoQualityClasses','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.minPlayQuality;this.$CustomAbrManager10=j.maxPlayQuality;this.$CustomAbrManager11=j.initiallyForcedRepresentations;this.$CustomAbrManager12=null;this.$CustomAbrManager13=null;this.$CustomAbrManager14=null;if(j.enableAdaptation){this.$CustomAbrManager15=j.bandwidthDowngradeTarget;this.$CustomAbrManager16=j.bandwidthUpgradeTarget;}}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager17();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager18.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager19.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager20.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager20=function(){'use strict';this.$CustomAbrManager17();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager21(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager12=j;this.$CustomAbrManager17(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager12=null;this.$CustomAbrManager17(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager22();return j?j.id:null;};i.prototype.getInitialSwitchReason=function(){'use strict';return this.$CustomAbrManager14;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager23();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l,m){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m);};i.$CustomAbrManager21=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager18=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager17(event);};i.prototype.$CustomAbrManager17=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager22();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j,0,this.$CustomAbrManager13);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager19=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager22=function(){var j,k=this;'use strict';var l=this.$CustomAbrManager2.getVideoTracks();if(l.length==0)return null;if(!this.$CustomAbrManager6)for(var m=0;m<l.length;m++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(l[m].streamInfoID)){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').FORCED;this.$CustomAbrManager14=c('VideoPlayerStreamSwitchReasons').FORCED;return l[m];}if(this.$CustomAbrManager12){var n=l.find(function(y){return y.id===this.$CustomAbrManager12.id;}.bind(this));if(n){this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').USER;return n;}}l.sort(h.compare);if(this.$CustomAbrManager9!==null||this.$CustomAbrManager10!==null){var j=function(){var y=k.$CustomAbrManager9!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager9):0,z=k.$CustomAbrManager10!==null?c('VideoQualityClasses').indexOf(k.$CustomAbrManager10):c('VideoQualityClasses').length-1;if(y<=z){var aa=l.filter(function(ca){return c('VideoQualityClasses').indexOf(ca.fbQualityClass)>=y&&c('VideoQualityClasses').indexOf(ca.fbQualityClass)<=z;});k.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').PREFER_QUALITY_CLASS;if(!aa.length)return {v:l[l.length-1]};var ba=c('VideoQualityClasses').indexOf('sd');if(l.length==2&&aa.length==2&&z<=ba)return {v:l[0]};l=aa;}}();if(typeof j==="object")return j.v;}var o=l[0],p=this.$CustomAbrManager8,q=this.$CustomAbrManager7;l=l.filter(function(y){return y.width<=q||y.height<=p;});var r=i.$CustomAbrManager21(this.$CustomAbrManager2.getAudioTracks()),s=r?r.bandwidth:0,t=this.$CustomAbrManager1.getBandwidth();for(var m=0;m<l.length;m++){var u=l[m],v=m+1<l.length?l[m+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!u.bandwidth)continue;var w=(u.bandwidth+s)/this.$CustomAbrManager15,x=(v.bandwidth+s)/this.$CustomAbrManager16;if(t>=w&&t<=x){o=u;if(o.active)break;}}this.$CustomAbrManager13=c('VideoPlayerStreamSwitchReasons').BANDWIDTH;return o;};i.prototype.$CustomAbrManager23=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager11&&this.$CustomAbrManager11.includes(j[k].streamInfoID))return j[k];return null;};i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval;f.exports=i;}),null);
__d('VideoPlayerLiveStreamState',['RTISubscriptionManager','EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={interrupt:'streamInterruptAt',ended:'endedAt'};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState1=[];for(var m in j)this.$VideoPlayerLiveStreamState1.push(c('RTISubscriptionManager').subscribe('video_broadcast/'+m+'_'+l,this.$VideoPlayerLiveStreamState2.bind(this,j[m])));}k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;p.unsubscribe();}};k.prototype.$VideoPlayerLiveStreamState2=function(l,m){var n=JSON.parse(m.payload||'{}')||{},o=n.time_position;if(typeof o==='number'){o/=1000;this.emit(l,o);}};f.exports=k;}),null);
__d('VideoPlayerHTML5Shaka',['invariant','Promise','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','TaggedTimeRanges','URI','VideoDashPrefetchCache','VideoPlayerLiveStreamState','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','VideoQualityClasses','VideoPlayerShakaPerformanceLogger','dispatchEvent','Shaka'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util.FailoverUri,q=window.devicePixelRatio||1,r=c('VideoPlayerShakaBandwidthEstimator').getEstimator();p.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);function s(y){var z=y.getVideoTracks();z.sort(n.compare);var aa=z.reduce(function(ba,ca){return ca.fbQualityLabel=='hd'?ca:ba;});if(!aa)return z.pop().id;return aa.id;}function t(y){var z=y.getVideoTracks();z.sort(n.compare);return z.shift().id;}function u(y){var z=c('BlobFactory').getBlob([y]);return URL.createObjectURL(z);}function v(y,event){var z=c('EventListener').capture(y.parentNode,event,function(aa){if(aa.target!=y)return;z.remove();c('Event').kill(aa);});}function w(y,z){'use strict';this.$DisabledAbrManager1=y;this.$DisabledAbrManager2=z;}w.prototype.initialize=function(y,z){'use strict';this.$DisabledAbrManager3=z;};w.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(s(this.$DisabledAbrManager3),false);};w.prototype.enable=function(){'use strict';};w.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return t(this.$DisabledAbrManager3);var y=this.$DisabledAbrManager1?s(this.$DisabledAbrManager3):t(this.$DisabledAbrManager3);return y;};w.prototype.setPreferredVideoTrack=function(y){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(y.id,true);};w.prototype.unsetPreferredVideoTrack=function(){'use strict';};w.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(x,c('EventEmitter'));j=i&&i.prototype;function x(y,z,aa){var ba=aa.videoID,ca=aa.width,da=aa.height,ea=aa.manifest,fa=aa.manifestUrl,ga=aa.isLive,ha=aa.minPlayQuality,ia=aa.maxPlayQuality,ja=aa.accessToken,ka=aa.startTimestamp;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ha;this.$VideoPlayerHTML5Shaka2=ia;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka5=1;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=ga;this.$VideoPlayerHTML5Shaka8=false;this.$VideoPlayerHTML5Shaka9=ca;this.$VideoPlayerHTML5Shaka10=da;this.$VideoPlayerHTML5Shaka11=c('VideoPlayerShakaPerformanceLogger').isEnabled()?new (c('VideoPlayerShakaPerformanceLogger'))(ba,ga,ja):null;if(!c('VideoPlayerShakaExperiments').improveRebufferLogging)this.$VideoPlayerHTML5Shaka12=true;c('EventListener').listen(y,'playing',this.$VideoPlayerHTML5Shaka13.bind(this));c('EventListener').listen(y,'timeupdate',function(oa){this.$VideoPlayerHTML5Shaka14(oa.target.currentTime);}.bind(this));c('EventListener').listen(y,'pause',this.$VideoPlayerHTML5Shaka15.bind(this));c('EventListener').listen(y,'play',function(){this.$VideoPlayerHTML5Shaka8=true;}.bind(this));this.$VideoPlayerHTML5Shaka16=null;this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka19=new l(y,this.$VideoPlayerHTML5Shaka11);this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka20();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka21();}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('error',function(oa){return this.$VideoPlayerHTML5Shaka22(oa);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka23.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka24.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('debug/shakaEvent',function(oa){return this.emit('debug/shakaEvent',oa.detail);}.bind(this));this.$VideoPlayerHTML5Shaka19.addEventListener('manifestwrapped',this.$VideoPlayerHTML5Shaka25.bind(this));if(c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection)this.$VideoPlayerHTML5Shaka19.addEventListener('manifestIsUpdating',this.$VideoPlayerHTML5Shaka26.bind(this));this.$VideoPlayerHTML5Shaka27=z;this.$VideoPlayerHTML5Shaka28=null;var la=false,ma=null,na=null;this.$VideoPlayerHTML5Shaka29=c('VideoPlayerShakaExperiments').liveSendPushHeaders;if(ea){this.$VideoPlayerHTML5Shaka30=o(ea,fa);}else{this.$VideoPlayerHTML5Shaka30=fa;la=fa.indexOf('dash-abr')!==-1;}if(la){this.$VideoPlayerHTML5Shaka29=c('VideoPlayerShakaExperiments').liveAbrSendPushHeaders;if(this.$VideoPlayerHTML5Shaka29){ma=c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation;na=c('VideoPlayerShakaExperiments').liveAbrAudioPushRepresentation;this.$VideoPlayerHTML5Shaka27=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}if(c('VideoPlayerShakaExperiments').liveAbrAlwaysForceRepresentation)this.$VideoPlayerHTML5Shaka27=[c('VideoPlayerShakaExperiments').liveAbrInitialPushRepresentation];}this.$VideoPlayerHTML5Shaka31=this.$VideoPlayerHTML5Shaka32();this.$VideoPlayerHTML5Shaka33=this.$VideoPlayerHTML5Shaka34();this.$VideoPlayerHTML5Shaka35=y;this.$VideoPlayerHTML5Shaka19.configure({enableAdaptation:true,appendPlayingQueryParam:c('VideoPlayerShakaExperiments').addCdnDebugQueryParameters,allowSkipUnloading:c('VideoPlayerShakaExperiments').allowSkipUnloading,endBufferingOnPlaying:c('VideoPlayerShakaExperiments').endBufferingOnPlaying,usePlaybackRateForBuffering:c('VideoPlayerShakaExperiments').improveRebufferLogging,streamBufferSize:ga?c('VideoPlayerShakaExperiments').liveStreamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:x.isAutoplayBandwidthRestrained(ga)?0:this.$VideoPlayerHTML5Shaka36(),dynamicStreamBufferSize:ga?c('VideoPlayerShakaExperiments').liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:c('VideoPlayerShakaExperiments').includeStreamBufferSizeInStartOffset,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c('VideoPlayerShakaExperiments').liveMaxSegmentsToPush,liveSendPushHeaders:x.isAutoplayBandwidthRestrained(ga)?false:this.$VideoPlayerHTML5Shaka37(),liveMaxManifestFetchesWithPush:c('VideoPlayerShakaExperiments').liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c('VideoPlayerShakaExperiments').resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c('VideoPlayerShakaExperiments').enableVideoDebug,reappendInitSegmentAfterAbort:c('VideoPlayerShakaExperiments').reappendInitSegmentAfterAbort,useInlineInitSegment:c('VideoPlayerShakaExperiments').useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c('VideoPlayerShakaExperiments').currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:ma,liveAudioPushRepresentation:na});if(ga&&c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection){this.$VideoPlayerHTML5Shaka38=new (c('VideoPlayerLiveStreamState'))(ba);this.$VideoPlayerHTML5Shaka38.addListener('streamInterruptAt',this.$VideoPlayerHTML5Shaka39.bind(this));['streamInterruptAt','commercialBreakAt','endedAt'].forEach(function(oa){this.$VideoPlayerHTML5Shaka38.addListener(oa,function(event){this.emit('debug/shakaEvent',{type:oa,event:event});}.bind(this));}.bind(this));}if(ka)this.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(ka);this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka33);}x.prototype.getDebug=function(){'use strict';return {AbrManager:this.$VideoPlayerHTML5Shaka31,VideoSource:this.$VideoPlayerHTML5Shaka33,ShakaPlayer:this.$VideoPlayerHTML5Shaka19};};x.getEstimatedBandwidth=function(){'use strict';return r.getBandwidth();};x.isAutoplayBandwidthRestrained=function(y){'use strict';var z=c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained(y);return z;};x.prototype.$VideoPlayerHTML5Shaka14=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka40.get(y);if(!z)return;var aa=z.id,ba=z.reason;if(this.$VideoPlayerHTML5Shaka28!==aa){var ca=this.$VideoPlayerHTML5Shaka28;this.$VideoPlayerHTML5Shaka28=aa;this.emit('representation_ended',{representationID:ca,nextRepresentationID:aa,streamSwitchReason:ba});}};x.prototype.getStreamInfoIDForTimePosition=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka40.get(y),aa=null;if(z)aa=z.id;return aa;};x.prototype.$VideoPlayerHTML5Shaka41=function(y,z){'use strict';if(y.fbQualityLabel){return y.fbQualityLabel;}else if(n.compare(y,z[0])==0){return 'SD';}else if(n.compare(y,z[z.length-1])==0){return 'HD';}else return null;};x.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka16;var y=this.$VideoPlayerHTML5Shaka33.getVideoTracks();y.sort(n.compare);return y.every(function(z){return z.fbQualityLabel!==null;})?y.map(function(z){return z.fbQualityLabel;}):y.length>1?['SD','HD']:['SD'];};x.prototype.getIsAbrEnabled=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};x.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka17;var y=this.$VideoPlayerHTML5Shaka33.getVideoTracks();y.sort(n.compare);var z=y.find(function(aa){return aa.active;});return z?this.$VideoPlayerHTML5Shaka41(z,y):null;};x.prototype.canAutoSelectVideoQuality=function(){'use strict';return true;};x.prototype.setPreloadDisabled=function(y){'use strict';if(c('VideoPlayerShakaExperiments').blockAutoplayAllowPreloadSettingsChange)this.$VideoPlayerHTML5Shaka19.configure({initialStreamBufferSize:y?0:this.$VideoPlayerHTML5Shaka36(),liveSendPushHeaders:y?false:this.$VideoPlayerHTML5Shaka37()});};x.prototype.$VideoPlayerHTML5Shaka36=function(){'use strict';return this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveInitialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize;};x.prototype.$VideoPlayerHTML5Shaka37=function(){'use strict';return this.$VideoPlayerHTML5Shaka29;};x.prototype.setPreferredVideoQuality=function(y){'use strict';var z=this.$VideoPlayerHTML5Shaka33.getVideoTracks();z.sort(n.compare);var aa=z.find(function(ba){return y==this.$VideoPlayerHTML5Shaka41(ba,z);}.bind(this));if(aa){this.$VideoPlayerHTML5Shaka18=y;this.$VideoPlayerHTML5Shaka31.setPreferredVideoTrack(aa);}};x.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka18=null;this.$VideoPlayerHTML5Shaka31.unsetPreferredVideoTrack();};x.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka42&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka43=true;this.$VideoPlayerHTML5Shaka44=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'pause');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka35.pause();};x.prototype.play=function(){'use strict';this.$VideoPlayerHTML5Shaka8=true;if(this.$VideoPlayerHTML5Shaka11&&(this.$VideoPlayerHTML5Shaka35.paused||this.$VideoPlayerHTML5Shaka35.ended))this.$VideoPlayerHTML5Shaka45=this.$VideoPlayerHTML5Shaka11.getOperationLogger('play').setState('pending_play');if(this.$VideoPlayerHTML5Shaka42&&!c('VideoPlayerShakaExperiments').improveRebufferLogging){this.$VideoPlayerHTML5Shaka43=false;this.$VideoPlayerHTML5Shaka44=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'waiting');this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);return c('Promise').resolve();}else return this.$VideoPlayerHTML5Shaka35.play();};x.prototype.$VideoPlayerHTML5Shaka46=function(){'use strict';var y=this.$VideoPlayerHTML5Shaka4;if(y){var z=this.$VideoPlayerHTML5Shaka35.currentTime,aa=4,ba=z>y-aa,ca=z>y;if(ca){this.emit('debug/shakaEvent',{type:'streamResumedAt',event:this.$VideoPlayerHTML5Shaka4});this.$VideoPlayerHTML5Shaka4=null;}else if(this.$VideoPlayerHTML5Shaka42)this.$VideoPlayerHTML5Shaka6=ba;}return this.$VideoPlayerHTML5Shaka6;};x.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){v(this.$VideoPlayerHTML5Shaka35,'pause');this.$VideoPlayerHTML5Shaka43=false;this.$VideoPlayerHTML5Shaka44=false;}this.$VideoPlayerHTML5Shaka42=true;if(this.$VideoPlayerHTML5Shaka46()){if(!c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka47)this.$VideoPlayerHTML5Shaka47=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka33.setIsLiveInterrupted(true);}this.emit('streamInterrupted');}else{this.$VideoPlayerHTML5Shaka19.setResumeAfterBuffering(true);this.emit('bufferingStart');}};x.prototype.$VideoPlayerHTML5Shaka21=function(){var y,z=this;'use strict';if(!c('VideoPlayerShakaExperiments').improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka43)v(this.$VideoPlayerHTML5Shaka35,'play');if(!this.$VideoPlayerHTML5Shaka44)(function(){var aa=c('EventListener').capture(z.$VideoPlayerHTML5Shaka35.parentNode,'playing',function(ba){if(ba.target!=this.$VideoPlayerHTML5Shaka35)return;aa.remove();if(this.$VideoPlayerHTML5Shaka12){this.$VideoPlayerHTML5Shaka12=false;return;}c('Event').kill(ba);}.bind(z));})();}this.$VideoPlayerHTML5Shaka42=false;if(this.$VideoPlayerHTML5Shaka47){this.$VideoPlayerHTML5Shaka47.log();this.$VideoPlayerHTML5Shaka47=null;}this.$VideoPlayerHTML5Shaka33.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka48();}else this.emit('bufferingEnd');};x.prototype.$VideoPlayerHTML5Shaka22=function(y){'use strict';var z=y.detail||{},aa=z.type||'undefined',ba=z.status||null,ca=z.url||null;if(c('VideoPlayerShakaExperiments').blockPlayRequestOnNetworkError&&this.$VideoPlayerHTML5Shaka7&&Object.values(c('VideoPlayerShakaExperiments').blockPlayRequestHTTPStatusList).indexOf(ba)!=-1&&new (c('URI'))(ca).getPath().split('.').pop()==='mpd'){if(this.$VideoPlayerHTML5Shaka8){c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'playing');this.$VideoPlayerHTML5Shaka8=false;}return this.$VideoPlayerHTML5Shaka49();}this.emit('error',{error:'SHAKA_'+aa.toUpperCase(),message:z.message,httpStatus:ba,url:ca});};x.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka17=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka16=this.getAvailableVideoQualities();if(!this.$VideoPlayerHTML5Shaka33){this.$VideoPlayerHTML5Shaka7=false;}else if(this.$VideoPlayerHTML5Shaka33.isLive()!==null)this.$VideoPlayerHTML5Shaka7=this.$VideoPlayerHTML5Shaka33.isLive();this.$VideoPlayerHTML5Shaka19.unload();this.$VideoPlayerHTML5Shaka3=true;};x.prototype.$VideoPlayerHTML5Shaka32=function(){'use strict';var y={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka1,maxPlayQuality:this.$VideoPlayerHTML5Shaka2,maxWidth:this.$VideoPlayerHTML5Shaka50(),maxHeight:this.$VideoPlayerHTML5Shaka51(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka27,bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthDowngradeTarget:c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka7?c('VideoPlayerShakaExperiments').liveBandwidthUpgradeTarget:c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget},z=c('VideoQualityClasses').indexOf('hd'),aa=this.$VideoPlayerHTML5Shaka1!=null&&c('VideoQualityClasses').indexOf(this.$VideoPlayerHTML5Shaka1)>=z;return new (c('CustomAbrManager'))(y);};x.prototype.$VideoPlayerHTML5Shaka34=function(){'use strict';!this.$VideoPlayerHTML5Shaka31?h(0):void 0;!this.$VideoPlayerHTML5Shaka30?h(0):void 0;var y=new m(this.$VideoPlayerHTML5Shaka30,null,r,this.$VideoPlayerHTML5Shaka31);this.$VideoPlayerHTML5Shaka40=new (c('TaggedTimeRanges'))(function(z,aa){return (z.id===aa.id&&z.reason===aa.reason);});y.setTaggedTimeRangesEntryAdder(function(z,aa,ba){this.$VideoPlayerHTML5Shaka40.add(z,aa,ba);}.bind(this));return y;};x.prototype.reload=function(y){'use strict';if(!this.$VideoPlayerHTML5Shaka3)return;this.$VideoPlayerHTML5Shaka31=this.$VideoPlayerHTML5Shaka32();this.$VideoPlayerHTML5Shaka33=this.$VideoPlayerHTML5Shaka34();if(this.$VideoPlayerHTML5Shaka46()){this.$VideoPlayerHTML5Shaka35.playbackRate=0;this.emit('streamInterrupted');}this.$VideoPlayerHTML5Shaka19.setPlaybackStartTime(y);this.$VideoPlayerHTML5Shaka19.load(this.$VideoPlayerHTML5Shaka33).then(function(){if(this.$VideoPlayerHTML5Shaka7!=this.$VideoPlayerHTML5Shaka33.isLive())return this.$VideoPlayerHTML5Shaka49();if(this.$VideoPlayerHTML5Shaka18)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka18);this.$VideoPlayerHTML5Shaka17=null;this.$VideoPlayerHTML5Shaka52=null;this.$VideoPlayerHTML5Shaka3=false;}.bind(this)).done();};x.prototype.$VideoPlayerHTML5Shaka49=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka35,'ended');this.emit('streamResumed');this.$VideoPlayerHTML5Shaka38.unsubscribe();this.unload();};x.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka33.getLongestInitResponseTime();};x.$VideoPlayerHTML5Shaka53=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*q);};x.prototype.$VideoPlayerHTML5Shaka50=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka9*x.$VideoPlayerHTML5Shaka53();};x.prototype.$VideoPlayerHTML5Shaka51=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka10*x.$VideoPlayerHTML5Shaka53();};x.prototype.setDimensions=function(y,z){'use strict';this.$VideoPlayerHTML5Shaka9=y;this.$VideoPlayerHTML5Shaka10=z;this.$VideoPlayerHTML5Shaka31.setResolutionConstraint(this.$VideoPlayerHTML5Shaka50(),this.$VideoPlayerHTML5Shaka51());};x.isSupported=function(){'use strict';return l.isBrowserSupported();};x.prototype.$VideoPlayerHTML5Shaka24=function(){'use strict';this.emit('tracksChanged');};x.prototype.$VideoPlayerHTML5Shaka23=function(event){'use strict';if(event.contentType==='video')this.emit('adaptation',{reason:event.reason});};x.prototype.$VideoPlayerHTML5Shaka39=function(y){'use strict';if(c('VideoPlayerShakaExperiments').fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka11&&!this.$VideoPlayerHTML5Shaka47)this.$VideoPlayerHTML5Shaka47=this.$VideoPlayerHTML5Shaka11.getOperationLogger('stream_interrupted');this.$VideoPlayerHTML5Shaka33.setIsLiveInterrupted(true);}this.$VideoPlayerHTML5Shaka4=y;};x.prototype.$VideoPlayerHTML5Shaka26=function(){'use strict';if(this.$VideoPlayerHTML5Shaka46())this.$VideoPlayerHTML5Shaka48();};x.prototype.$VideoPlayerHTML5Shaka48=function(){'use strict';this.$VideoPlayerHTML5Shaka4=null;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka33.forceResyncVideoBuffer();this.emit('streamResumed');};x.prototype.$VideoPlayerHTML5Shaka25=function(){'use strict';var y=!this.$VideoPlayerHTML5Shaka35.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka6)this.$VideoPlayerHTML5Shaka48();if(y)this.play();}.bind(this))['catch'](function(z){});};x.prototype.$VideoPlayerHTML5Shaka13=function(){'use strict';this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka12)this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka45){this.$VideoPlayerHTML5Shaka45.log();this.$VideoPlayerHTML5Shaka45=null;}};x.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';if(this.$VideoPlayerHTML5Shaka8)this.$VideoPlayerHTML5Shaka8=false;if(this.$VideoPlayerHTML5Shaka45){this.$VideoPlayerHTML5Shaka45.setResult('aborted').log();this.$VideoPlayerHTML5Shaka45=null;}};f.exports=x;}),null);